(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3656:function(e,a,t){Promise.resolve().then(t.bind(t,5642))},5642:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return V}});var n=t(7437),s=t(2265),i=t(9376),o=t(3810);function l(e){let{title:a,description:t,children:s,showBack:i=!1,onBack:l}=e;return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,n.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8 md:p-12",children:[i&&l&&(0,n.jsxs)("button",{onClick:l,className:"mb-6 text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,n.jsx)(o.E.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:a}),t&&(0,n.jsx)(o.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-lg text-gray-600 mb-8",children:t}),(0,n.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"space-y-3",children:s})]})})}function r(e){let{label:a,shortcut:t,onClick:i,variant:l="primary",disabled:r=!1,autoFocus:c=!1}=e,d=(0,s.useRef)(null);return(0,s.useEffect)(()=>{c&&d.current&&d.current.focus()},[c]),(0,s.useEffect)(()=>{if(!t||r)return;let e=e=>{var a,n;(null===(a=document.activeElement)||void 0===a?void 0:a.tagName)!=="INPUT"&&(null===(n=document.activeElement)||void 0===n?void 0:n.tagName)!=="TEXTAREA"&&(e.key===t||e.key==="Digit".concat(t))&&(e.preventDefault(),i())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,i,r]),(0,n.jsx)(o.E.button,{ref:d,whileHover:{scale:r?1:1.02},whileTap:{scale:r?1:.98},className:"".concat("w-full px-6 py-4 rounded-lg text-left transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",outline:"border-2 border-gray-300 text-gray-700 hover:border-gray-400 focus:ring-gray-500"}[l]," ").concat(r?"opacity-50 cursor-not-allowed":"cursor-pointer"),onClick:i,onKeyDown:e=>{"Enter"!==e.key||r||(e.preventDefault(),i()),t&&(e.key===t||e.key==="Digit".concat(t))&&!r&&(e.preventDefault(),i())},disabled:r,autoFocus:c,children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-lg font-medium",children:a}),t&&(0,n.jsx)("span",{className:"text-sm opacity-70 bg-white/20 px-2 py-1 rounded",children:t.toUpperCase()})]})})}function c(e){let{label:a,value:t,onChange:s,min:i,max:l,required:r=!1,autoFocus:c=!1}=e;return(0,n.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[a,r&&(0,n.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,n.jsx)("input",{type:"date",value:t,onChange:e=>s(e.target.value),min:i,max:l,required:r,autoFocus:c,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"})]})}function d(e){let{label:a,value:t,onChange:s,min:i,max:l,step:r=1,required:c=!1,placeholder:d,autoFocus:u=!1}=e;return(0,n.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[a,c&&(0,n.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,n.jsx)("input",{type:"number",value:t,onChange:e=>{let a=parseFloat(e.target.value);isNaN(a)?s(0):s(a)},min:i,max:l,step:r,required:c,placeholder:d,autoFocus:u,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"})]})}function u(e){let{label:a,value:t,onChange:s,placeholder:i,required:l=!1,rows:r=4,autoFocus:c=!1}=e;return(0,n.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[a,l&&(0,n.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,n.jsx)("textarea",{value:t,onChange:e=>s(e.target.value),placeholder:i,required:l,rows:r,autoFocus:c,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg resize-none"})]})}let m=["en","sl","de"];function h(e){return m.includes(e)}let f={en:{common:{next:"Next",back:"Back",cancel:"Cancel",submit:"Submit",save:"Save",delete:"Delete",edit:"Edit",yes:"Yes",no:"No",loading:"Loading...",backToFirstPage:"Back to first page",close:"Close"},absence:{title:"Request Absence",myRequests:"My Requests",newRequest:"Start New Request",ongoing:"Ongoing",upcoming:"Upcoming",pending:"Pending",rejected:"Rejected",showAllHistory:"Show All History",hideHistory:"Hide History",allHistory:"All History",showHolidays:"Show Public Holidays",publicHolidays:"Public Holidays",holidays:"Holidays",noHistory:"No history available",showFeatures:"Show Features",features:"Features",showDocumentation:"Show Documentation",documentation:"Documentation",abortRequest:"Abort",resendRequest:"Resend",selectType:"What type of absence would you like to request?",selectOffice:"Which office are you requesting absence for?",selectDuration:"How long?",selectDate:"Select date",selectStartDate:"Start date",selectEndDate:"End date",selectHours:"Number of hours",selectDays:"Number of days",addNote:"Add a note (optional)",notePlaceholder:"Enter any additional information...",review:"Review your request",submitted:"Request submitted successfully",types:{vacation:"Vacation",sick_leave:"Sick Leave",parental_leave:"Parental Leave",sick_child:"Care for sick child",work_from_home:"Work from Home",knowledge_time:"Knowledge Time",flex_time:"Flex Time",paid_leave:"Paid Leave",unpaid_leave:"Unpaid Leave",care_relative:"Care of Close Relative",military_duties:"Military Duties"},duration:{hours:"Hours",days:"Days"}},office:{ljubljana:"Ljubljana",munich:"Munich"},status:{pending:"Pending",sent:"Sent",approved:"Approved",denied:"Denied",cancelled:"Cancelled"},manager:{dashboard:"Manager Dashboard",approve:"Yes - Approve",deny:"No - Deny",backToUserList:"Back to User List",backToRoleList:"Back to Role List",backToDashboard:"Back to Dashboard",addRole:"Add Role",createNewRole:"Create New Role",roleManagement:"Role Management",allUsers:"All Users",showPublicHolidays:"Show Public Holidays",listAllUsers:"List All Users",manageRoles:"Manage Roles",noPendingRequests:"No pending requests",noApprovedRequests:"No approved requests",noDeniedRequests:"No denied requests",noRequests:"No requests",noRolesAvailable:"No roles available. Create roles in Role Management.",publicHolidays:"Public Holidays",logout:"Logout",searchUsers:"Search users by name, email, or role...",noUsersFound:"No users found.",noUsersFoundSearch:"No users found matching your search.",roleName:"Role name",create:"Create",currentName:"Current name",usedBy:"Used by",user:"user",users:"users",renameRole:"Rename Role",newRoleName:"New role name",rename:"Rename",existingRoles:"Existing Roles",noRolesCreated:"No roles created yet.",roles:"Roles",email:"Email",role:"Role",office:"Office",startDate:"Start Date",endDate:"End Date",hours:"Hours",days:"Days",note:"Note"},login:{demoManager:"\uD83D\uDC54 Demo Manager",demoEmployee:"\uD83D\uDC64 Demo Employee",demoAccountsNote:"These are demo accounts connected to each other. The employee reports to the manager."}},sl:{common:{next:"Naprej",back:"Nazaj",cancel:"Prekliči",submit:"Pošlji",save:"Shrani",delete:"Izbriši",edit:"Uredi",yes:"Da",no:"Ne",loading:"Nalaganje...",backToFirstPage:"Nazaj na prvo stran",close:"Zapri"},absence:{title:"Zahtevaj odsotnost",myRequests:"Moje zahteve",newRequest:"Začni novo zahtevo",ongoing:"V teku",upcoming:"Prihajajoče",pending:"V čakanju",rejected:"Zavrnjeno",showAllHistory:"Prikaži vso zgodovino",hideHistory:"Skrij zgodovino",allHistory:"Vsa zgodovina",showHolidays:"Prikaži javne praznike",publicHolidays:"Javni prazniki",holidays:"Prazniki",noHistory:"Ni zgodovine na voljo",showFeatures:"Prikaži funkcije",features:"Funkcije",showDocumentation:"Prikaži dokumentacijo",documentation:"Dokumentacija",abortRequest:"Prekliči",resendRequest:"Ponovno pošlji",selectType:"Kakšno odsotnost želite zahtevati?",selectOffice:"Za katero pisarno zahtevate odsotnost?",selectDuration:"Kako dolgo?",selectDate:"Izberite datum",selectStartDate:"Začetni datum",selectEndDate:"Končni datum",selectHours:"Število ur",selectDays:"Število dni",addNote:"Dodajte opombo (neobvezno)",notePlaceholder:"Vnesite dodatne informacije...",review:"Preglejte svojo zahtevo",submitted:"Zahteva je bila uspešno poslana",types:{vacation:"Dopust",sick_leave:"Bolnica",parental_leave:"Starševski dopust",sick_child:"Skrb za bolnega otroka",work_from_home:"Delo od doma",knowledge_time:"Čas za znanje",flex_time:"Fleksibilni čas",paid_leave:"Plačan dopust",unpaid_leave:"Neplačan dopust",care_relative:"Skrb za sorodnika",military_duties:"Vojaške obveznosti"},duration:{hours:"Ure",days:"Dni"}},office:{ljubljana:"Ljubljana",munich:"M\xfcnchen"},status:{pending:"V teku",sent:"Poslano",approved:"Odobreno",denied:"Zavrnjeno",cancelled:"Preklicano"},manager:{dashboard:"Upravljalski nadzor",approve:"Da - Odobri",deny:"Ne - Zavrni",backToUserList:"Nazaj na seznam uporabnikov",backToRoleList:"Nazaj na seznam vlog",backToDashboard:"Nazaj na nadzorno ploščo",addRole:"Dodaj vlogo",createNewRole:"Ustvari novo vlogo",roleManagement:"Upravljanje vlog",allUsers:"Vsi uporabniki",showPublicHolidays:"Prikaži javne praznike",listAllUsers:"Prikaži vse uporabnike",manageRoles:"Upravljaj vloge",noPendingRequests:"Ni čakajočih zahtev",noApprovedRequests:"Ni odobrenih zahtev",noDeniedRequests:"Ni zavrnjenih zahtev",noRequests:"Ni zahtev",noRolesAvailable:"Ni razpoložljivih vlog. Ustvarite vloge v upravljanju vlog.",publicHolidays:"Javni prazniki",logout:"Odjava",searchUsers:"Išči uporabnike po imenu, e-pošti ali vlogi...",noUsersFound:"Ni najdenih uporabnikov.",noUsersFoundSearch:"Ni najdenih uporabnikov, ki bi ustrezali vašemu iskanju.",roleName:"Ime vloge",create:"Ustvari",currentName:"Trenutno ime",usedBy:"Uporablja",user:"uporabnik",users:"uporabniki",renameRole:"Preimenuj vlogo",newRoleName:"Novo ime vloge",rename:"Preimenuj",existingRoles:"Obstoječe vloge",noRolesCreated:"Še ni ustvarjenih vlog.",roles:"Vloge",email:"E-pošta",role:"Vloga",office:"Pisarna",startDate:"Začetni datum",endDate:"Končni datum",hours:"Ure",days:"Dni",note:"Opomba"},login:{demoManager:"\uD83D\uDC54 Demo Manager",demoEmployee:"\uD83D\uDC64 Demo Zaposleni",demoAccountsNote:"To so demo računi, povezani med seboj. Zaposleni poroča manageru."}},de:{common:{next:"Weiter",back:"Zur\xfcck",cancel:"Abbrechen",submit:"Absenden",save:"Speichern",delete:"L\xf6schen",edit:"Bearbeiten",yes:"Ja",no:"Nein",loading:"Laden...",backToFirstPage:"Zur\xfcck zur ersten Seite",close:"Schlie\xdfen"},absence:{title:"Abwesenheit beantragen",myRequests:"Meine Anfragen",newRequest:"Neue Anfrage starten",ongoing:"Laufend",upcoming:"Bevorstehend",pending:"Ausstehend",rejected:"Abgelehnt",showAllHistory:"Alle Historie anzeigen",hideHistory:"Historie ausblenden",allHistory:"Alle Historie",showHolidays:"Feiertage anzeigen",publicHolidays:"Feiertage",holidays:"Feiertage",noHistory:"Keine Historie verf\xfcgbar",showFeatures:"Funktionen anzeigen",features:"Funktionen",showDocumentation:"Dokumentation anzeigen",documentation:"Dokumentation",abortRequest:"Abbrechen",resendRequest:"Erneut senden",selectType:"Welche Art von Abwesenheit m\xf6chten Sie beantragen?",selectOffice:"F\xfcr welches B\xfcro beantragen Sie die Abwesenheit?",selectDuration:"Wie lange?",selectDate:"Datum ausw\xe4hlen",selectStartDate:"Startdatum",selectEndDate:"Enddatum",selectHours:"Anzahl der Stunden",selectDays:"Anzahl der Tage",addNote:"Notiz hinzuf\xfcgen (optional)",notePlaceholder:"Geben Sie zus\xe4tzliche Informationen ein...",review:"\xdcberpr\xfcfen Sie Ihre Anfrage",submitted:"Anfrage erfolgreich \xfcbermittelt",types:{vacation:"Urlaub",sick_leave:"Krankheit",parental_leave:"Elternzeit",sick_child:"Betreuung krankes Kind",work_from_home:"Homeoffice",knowledge_time:"Wissenszeit",flex_time:"Gleitzeit",paid_leave:"Bezahlter Urlaub",unpaid_leave:"Unbezahlter Urlaub",care_relative:"Pflege von Angeh\xf6rigen",military_duties:"Wehrdienst"},duration:{hours:"Stunden",days:"Tage"}},office:{ljubljana:"Ljubljana",munich:"M\xfcnchen"},status:{pending:"Ausstehend",sent:"Gesendet",approved:"Genehmigt",denied:"Abgelehnt",cancelled:"Storniert"},manager:{dashboard:"Manager Dashboard",approve:"Ja - Genehmigen",deny:"Nein - Ablehnen",backToUserList:"Zur\xfcck zur Benutzerliste",backToRoleList:"Zur\xfcck zur Rollenliste",backToDashboard:"Zur\xfcck zum Dashboard",addRole:"Rolle hinzuf\xfcgen",createNewRole:"Neue Rolle erstellen",roleManagement:"Rollenverwaltung",allUsers:"Alle Benutzer",showPublicHolidays:"Feiertage anzeigen",listAllUsers:"Alle Benutzer auflisten",manageRoles:"Rollen verwalten",noPendingRequests:"Keine ausstehenden Anfragen",noApprovedRequests:"Keine genehmigten Anfragen",noDeniedRequests:"Keine abgelehnten Anfragen",noRequests:"Keine Anfragen",noRolesAvailable:"Keine Rollen verf\xfcgbar. Erstellen Sie Rollen in der Rollenverwaltung.",publicHolidays:"Feiertage",logout:"Abmelden",searchUsers:"Benutzer nach Name, E-Mail oder Rolle suchen...",noUsersFound:"Keine Benutzer gefunden.",noUsersFoundSearch:"Keine Benutzer gefunden, die Ihrer Suche entsprechen.",roleName:"Rollenname",create:"Erstellen",currentName:"Aktueller Name",usedBy:"Verwendet von",user:"Benutzer",users:"Benutzer",renameRole:"Rolle umbenennen",newRoleName:"Neuer Rollenname",rename:"Umbenennen",existingRoles:"Vorhandene Rollen",noRolesCreated:"Noch keine Rollen erstellt.",roles:"Rollen",email:"E-Mail",role:"Rolle",office:"B\xfcro",startDate:"Startdatum",endDate:"Enddatum",hours:"Stunden",days:"Tage",note:"Notiz"},login:{demoManager:"\uD83D\uDC54 Demo Manager",demoEmployee:"\uD83D\uDC64 Demo Mitarbeiter",demoAccountsNote:"Dies sind Demo-Konten, die miteinander verbunden sind. Der Mitarbeiter berichtet an den Manager."}}};function g(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return f[h(e)?e:"en"]}(a),n=e.split("."),s=t;for(let a of n){if(!s||"object"!=typeof s||!(a in s))return e;s=s[a]}return"string"==typeof s?s:e}function p(e){let{onLogin:a,language:t,onShowFeatures:i,onShowDocumentation:l}=e;return(0,s.useEffect)(()=>{let e=e=>{var t,n;(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="INPUT"&&(null===(n=document.activeElement)||void 0===n?void 0:n.tagName)!=="TEXTAREA"&&("1"===e.key?(e.preventDefault(),a("manager@demo.com","manager")):"2"===e.key?(e.preventDefault(),a("employee@demo.com","employee")):"3"===e.key?(e.preventDefault(),i()):"4"===e.key&&(e.preventDefault(),l()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,i,l]),(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,n.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8 md:p-12",children:[(0,n.jsx)(o.E.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4 text-center",children:"VacayBot Demo"}),(0,n.jsx)(o.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-lg text-gray-600 mb-8 text-center",children:"Choose a demo account to explore the absence management system"}),(0,n.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Demo Accounts"}),(0,n.jsx)(r,{label:"\uD83D\uDC54 Demo Manager",shortcut:"1",onClick:()=>a("manager@demo.com","manager"),variant:"primary",autoFocus:!0}),(0,n.jsx)("p",{className:"text-sm text-gray-500 ml-2",children:"View and approve/deny absence requests from employees"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(r,{label:"\uD83D\uDC64 Demo Employee",shortcut:"2",onClick:()=>a("employee@demo.com","employee"),variant:"secondary"}),(0,n.jsx)("p",{className:"text-sm text-gray-500 ml-2",children:"Request vacation and other absences"})]})]}),(0,n.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-8 pt-8 border-t border-gray-200 space-y-4",children:[(0,n.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"These are demo accounts connected to each other. The employee reports to the manager."}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(r,{label:g("absence.showFeatures",t)||"Show Features",onClick:i,variant:"outline",shortcut:"3"}),(0,n.jsx)(r,{label:g("absence.showDocumentation",t)||"Show Documentation",onClick:l,variant:"outline",shortcut:"4"})]})]})]})})}var y=t(7647),b=t(936);let x={vacation:{id:"vacation",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},sick_leave:{id:"sick_leave",requiresApproval:!1,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},parental_leave:{id:"parental_leave",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},sick_child:{id:"sick_child",requiresApproval:!1,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},work_from_home:{id:"work_from_home",requiresApproval:!1,affectsCalendar:!1,affectsSlackStatus:!1,affectsCinode:!1,durationType:"days"},knowledge_time:{id:"knowledge_time",requiresApproval:!0,affectsCalendar:!1,affectsSlackStatus:!1,affectsCinode:!1,durationType:"days"},flex_time:{id:"flex_time",requiresApproval:!1,affectsCalendar:!1,affectsSlackStatus:!1,affectsCinode:!1,durationType:"hours"},paid_leave:{id:"paid_leave",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},unpaid_leave:{id:"unpaid_leave",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},care_relative:{id:"care_relative",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},military_duties:{id:"military_duties",requiresApproval:!1,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"}},j={ljubljana:{id:"ljubljana",name:"Ljubljana",timezone:"Europe/Ljubljana",holidayCalendar:"slovenian"},munich:{id:"munich",name:"Munich",timezone:"Europe/Berlin",holidayCalendar:"german"}};var v=t(2090),D=t(420);let N=new Map;[{date:"2025-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2025-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2025-02-08",name:{en:"Prešeren Day",sl:"Prešernov dan",de:"Prešeren-Tag"},office:"ljubljana"},{date:"2025-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2025-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2025-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2025-06-25",name:{en:"Statehood Day",sl:"Dan državnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2025-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2025-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2025-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2025-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2025-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2026-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2026-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2026-02-08",name:{en:"Prešeren Day",sl:"Prešernov dan",de:"Prešeren-Tag"},office:"ljubljana"},{date:"2026-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2026-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2026-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2026-06-25",name:{en:"Statehood Day",sl:"Dan državnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2026-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2026-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2026-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2026-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2026-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2027-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2027-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2027-02-08",name:{en:"Prešeren Day",sl:"Prešernov dan",de:"Prešeren-Tag"},office:"ljubljana"},{date:"2027-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2027-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2027-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2027-06-25",name:{en:"Statehood Day",sl:"Dan državnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2027-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2027-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2027-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2027-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2027-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2028-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2028-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2028-02-08",name:{en:"Prešeren Day",sl:"Prešernov dan",de:"Prešeren-Tag"},office:"ljubljana"},{date:"2028-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2028-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2028-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2028-06-25",name:{en:"Statehood Day",sl:"Dan državnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2028-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2028-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2028-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2028-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2028-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2029-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2029-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2029-02-08",name:{en:"Prešeren Day",sl:"Prešernov dan",de:"Prešeren-Tag"},office:"ljubljana"},{date:"2029-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2029-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2029-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2029-06-25",name:{en:"Statehood Day",sl:"Dan državnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2029-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2029-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2029-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2029-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2029-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2030-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2030-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2030-02-08",name:{en:"Prešeren Day",sl:"Prešernov dan",de:"Prešeren-Tag"},office:"ljubljana"},{date:"2030-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2030-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2030-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2030-06-25",name:{en:"Statehood Day",sl:"Dan državnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2030-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2030-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2030-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2030-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2030-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2025-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2025-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2025-04-18",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2025-04-21",name:{en:"Easter Monday",sl:"Velikonočni ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2025-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2025-05-29",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2025-06-09",name:{en:"Whit Monday",sl:"Binkoštni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2025-06-19",name:{en:"Corpus Christi",sl:"Božje telo",de:"Fronleichnam"},office:"munich"},{date:"2025-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2025-10-03",name:{en:"German Unity Day",sl:"Dan nemške enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2025-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2025-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2025-12-26",name:{en:"Boxing Day",sl:"Štefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2026-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2026-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2026-04-03",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2026-04-06",name:{en:"Easter Monday",sl:"Velikonočni ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2026-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2026-05-14",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2026-05-25",name:{en:"Whit Monday",sl:"Binkoštni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2026-06-04",name:{en:"Corpus Christi",sl:"Božje telo",de:"Fronleichnam"},office:"munich"},{date:"2026-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2026-10-03",name:{en:"German Unity Day",sl:"Dan nemške enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2026-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2026-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2026-12-26",name:{en:"Boxing Day",sl:"Štefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2027-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2027-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2027-03-26",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2027-03-29",name:{en:"Easter Monday",sl:"Velikonočni ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2027-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2027-05-06",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2027-05-17",name:{en:"Whit Monday",sl:"Binkoštni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2027-05-27",name:{en:"Corpus Christi",sl:"Božje telo",de:"Fronleichnam"},office:"munich"},{date:"2027-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2027-10-03",name:{en:"German Unity Day",sl:"Dan nemške enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2027-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2027-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2027-12-26",name:{en:"Boxing Day",sl:"Štefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2028-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2028-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2028-04-14",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2028-04-17",name:{en:"Easter Monday",sl:"Velikonočni ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2028-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2028-05-25",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2028-06-05",name:{en:"Whit Monday",sl:"Binkoštni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2028-06-15",name:{en:"Corpus Christi",sl:"Božje telo",de:"Fronleichnam"},office:"munich"},{date:"2028-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2028-10-03",name:{en:"German Unity Day",sl:"Dan nemške enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2028-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2028-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2028-12-26",name:{en:"Boxing Day",sl:"Štefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2029-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2029-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2029-03-30",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2029-04-02",name:{en:"Easter Monday",sl:"Velikonočni ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2029-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2029-05-10",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2029-05-21",name:{en:"Whit Monday",sl:"Binkoštni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2029-05-31",name:{en:"Corpus Christi",sl:"Božje telo",de:"Fronleichnam"},office:"munich"},{date:"2029-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2029-10-03",name:{en:"German Unity Day",sl:"Dan nemške enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2029-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2029-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2029-12-26",name:{en:"Boxing Day",sl:"Štefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2030-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2030-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2030-04-19",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2030-04-22",name:{en:"Easter Monday",sl:"Velikonočni ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2030-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2030-05-30",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2030-06-10",name:{en:"Whit Monday",sl:"Binkoštni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2030-06-20",name:{en:"Corpus Christi",sl:"Božje telo",de:"Fronleichnam"},office:"munich"},{date:"2030-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2030-10-03",name:{en:"German Unity Day",sl:"Dan nemške enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2030-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2030-12-25",name:{en:"Christmas",sl:"Božič",de:"Weihnachten"},office:"both"},{date:"2030-12-26",name:{en:"Boxing Day",sl:"Štefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"}].forEach(e=>{let a="".concat(e.date,"-").concat(e.office),t="both"===e.office?e.date:a;N.has(t)||N.set(t,e)});let w=Array.from(N.values()).sort((e,a)=>e.date.localeCompare(a.date));function k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,a=new Date;a.setHours(0,0,0,0);let t=w.filter(e=>new Date(e.date)>=a),n=new Map;t.forEach(e=>{let a=n.get(e.date)||[];a.push(e),n.set(e.date,a)});let s=[];return n.forEach((e,a)=>{let t;let n=[],i={},o={};if(e.forEach(e=>{("ljubljana"===e.office||"both"===e.office)&&(n.includes("ljubljana")||n.push("ljubljana"),i.ljubljana=e.name.en,o.ljubljana=e.name),("munich"===e.office||"both"===e.office)&&(n.includes("munich")||n.push("munich"),i.munich=e.name.en,o.munich=e.name)}),1===n.length)t=o[n[0]];else if(i.ljubljana===i.munich&&o.ljubljana&&o.munich)t=o.ljubljana;else{let e=o.ljubljana||{en:"",sl:"",de:""},a=o.munich||{en:"",sl:"",de:""};t={en:"".concat(e.en," / ").concat(a.en),sl:"".concat(e.sl," / ").concat(a.sl),de:"".concat(e.de," / ").concat(a.de)}}s.push({date:a,offices:n.sort(),names:i,displayName:t})}),s.sort((e,a)=>e.date.localeCompare(a.date)).slice(0,e)}var A=t(8558);async function E(e){let a=await (0,D.getDatabase)();if(!a.roles)throw Error("Roles collection not available");let t=e.trim();if(await C(t))throw Error('Role with name "'.concat(t,'" already exists'));let n=new Date().toISOString(),s={id:"role_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:t,createdAt:n,updatedAt:n};return await a.roles.insert(s),s}async function S(){let e=await (0,D.getDatabase)();return e.roles?(await e.roles.find().exec()).map(e=>e.toJSON()):[]}async function C(e){try{let a=await (0,D.getDatabase)();if(!a.roles)return null;let t=await a.roles.findOne({selector:{name:e.trim()}}).exec();return t?t.toJSON():null}catch(e){return console.error("Error getting role by name:",e),null}}async function R(e,a){try{let n=await (0,D.getDatabase)();if(!n.roles)return null;let s=await n.roles.findOne({selector:{name:e.trim()}}).exec();if(!s)return null;if(await s.update({$set:{name:a.trim(),updatedAt:new Date().toISOString()}}),n.users)for(let s of(await n.users.find().exec())){let n=s.toJSON();if((n.teams||[]).includes(e.trim())){var t;let i=(null===(t=n.teams)||void 0===t?void 0:t.map(t=>t===e.trim()?a.trim():t))||[];await s.update({$set:{teams:i,updatedAt:new Date().toISOString()}})}}return s.toJSON()}catch(e){return console.error("Error renaming role:",e),null}}async function P(e){try{let a=await (0,D.getDatabase)();if(!a.users)return 0;return(await a.users.find().exec()).filter(a=>(a.toJSON().teams||[]).includes(e)).length}catch(e){return console.error("Error getting role usage count:",e),0}}let T={vacation:"Vacation",sick_leave:"Sick Leave",parental_leave:"Parental Leave",sick_child:"Care for sick child",work_from_home:"Work from Home",knowledge_time:"Knowledge Time",flex_time:"Flex Time",paid_leave:"Paid Leave",unpaid_leave:"Unpaid Leave",care_relative:"Care of Close Relative",military_duties:"Military Duties"},z={pending:"Pending",sent:"Sent",approved:"Approved",denied:"Denied",cancelled:"Cancelled"};function H(e){let{managerEmail:a,language:t,onLogout:i}=e,[c,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(!0),[h,f]=(0,s.useState)("pending"),[g,p]=(0,s.useState)(!1),[x,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),[C,T]=(0,s.useState)(!1),[z,H]=(0,s.useState)(null),[U,_]=(0,s.useState)([]),[B,M]=(0,s.useState)(""),[F,L]=(0,s.useState)([]),[O,W]=(0,s.useState)({}),[I,K]=(0,s.useState)(""),[V,Z]=(0,s.useState)(null),[J,Y]=(0,s.useState)(""),[G,$]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=null,t=null;return(async()=>{try{let n=await (0,D.getDatabase)();if(n.absences)console.log("Setting up subscription for all requests, manager:",a),e=n.absences.find({selector:{managerEmail:a}}).$.subscribe(e=>{let a=e.map(e=>e.toJSON());console.log("Subscription update - all requests count:",a.length,"statuses:",a.map(e=>"".concat(e.id,":").concat(e.status))),d(a),m(!1)});else{let e=async()=>{try{let e=await (0,v.listAbsenceRequests)({managerEmail:a});d(e)}catch(e){console.error("Error loading requests:",e)}finally{m(!1)}};await e(),t=setInterval(e,2e3)}}catch(n){console.error("Error initializing database:",n);let e=async()=>{try{let e=await (0,v.listAbsenceRequests)({managerEmail:a});d(e)}catch(e){console.error("Error loading requests:",e)}finally{m(!1)}};await e(),t=setInterval(e,2e3)}})(),()=>{e&&e.unsubscribe(),t&&clearInterval(t)}},[a]);let X=async e=>{try{await (0,v.updateAbsenceRequest)(e,{status:"approved"})}catch(e){console.error("Error approving request:",e)}},Q=async e=>{try{await (0,v.updateAbsenceRequest)(e,{status:"denied"})}catch(e){console.error("Error denying request:",e)}},ee="all"===h?c:"pending"===h?c.filter(e=>"pending"===e.status||"sent"===e.status):c.filter(e=>e.status===h),ea=c.filter(e=>"pending"===e.status||"sent"===e.status),et=c.filter(e=>"approved"===e.status),en=c.filter(e=>"denied"===e.status);(0,s.useEffect)(()=>{(x||N)&&(async()=>{try{let e=await (0,A.yw)();_(e)}catch(e){console.error("Error loading users:",e)}})()},[x,N]),(0,s.useEffect)(()=>{N&&(async()=>{try{let e=await S();L(e);let a={};for(let t of e)a[t.name]=await P(t.name);W(a)}catch(e){console.error("Error loading roles:",e)}})()},[N]),(0,s.useEffect)(()=>{z&&(async()=>{try{let e=await S();L(e)}catch(e){console.error("Error loading roles:",e)}})()},[z]);let es=async e=>{if(!z||G)return;$(e);let a=z.teams||[],t=a.includes(e)?a.filter(a=>a!==e):[...a,e],n={...z,teams:t};H(n),_(U.map(e=>e.id===z.id?n:e));try{await (0,A.wy)(z.id,t)}catch(e){console.error("Failed to update user teams:",e),H(z),_(U.map(e=>e.id===z.id?z:e))}finally{$(null)}},ei=async()=>{if(I.trim())try{await E(I.trim()),K(""),T(!1);let e=await S();L(e);let a={};for(let t of e)a[t.name]=await P(t.name);W(a)}catch(e){console.error("Error creating role:",e),alert("Failed to create role. It may already exist.")}},eo=async()=>{if(V&&J.trim())try{if(await R(V.name,J.trim())){Y(""),Z(null);let e=await S();L(e);let a={};for(let t of e)a[t.name]=await P(t.name);if(W(a),z){let e=(await (0,A.yw)()).find(e=>e.id===z.id);e&&H(e)}}else alert("Failed to rename role. Role may not exist.")}catch(e){console.error("Error renaming role:",e),alert("Failed to rename role.")}};(0,s.useEffect)(()=>{let e=e=>{var a,t;(null===(a=document.activeElement)||void 0===a?void 0:a.tagName)!=="INPUT"&&(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="TEXTAREA"&&("2"!==e.key||g||x||N||z||V||C?"1"!==e.key||!N||V||C?("Escape"===e.key||"Backspace"===e.key)&&(g||x||N||z||V||C)&&(e.preventDefault(),C?(T(!1),K("")):V?(Z(null),Y("")):z?H(null):N?w(!1):x?j(!1):g&&p(!1)):(e.preventDefault(),T(!0)):(e.preventDefault(),p(!0)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[g,x,N,z,V,C]);let el=U.filter(e=>{if(!B.trim())return!0;let a=B.toLowerCase();return e.email.toLowerCase().includes(a)||e.name.toLowerCase().includes(a)||(e.teams||[]).some(e=>e.toLowerCase().includes(a))});if(z)return(0,n.jsx)(l,{title:"User: ".concat(z.name),children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,n.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Email: ",z.email]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Role: ",z.role]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Office: ",z.office]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Roles"}),(0,n.jsx)("div",{className:"space-y-2",children:0===F.length?(0,n.jsx)("p",{className:"text-gray-500 text-sm",children:"No roles available. Create roles in Role Management."}):F.map(e=>{let a=(z.teams||[]).includes(e.name),t=G===e.name;return(0,n.jsxs)("button",{onClick:()=>es(e.name),disabled:t,className:"w-full text-left px-4 py-2 rounded-lg transition-colors flex items-center justify-between ".concat(a?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"," ").concat(t?"opacity-50 cursor-not-allowed":""),children:[(0,n.jsxs)("span",{children:[e.name," ",a&&"✓"]}),t&&(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent"})]},e.id)})})]}),(0,n.jsx)(r,{label:"Back to User List",onClick:()=>H(null),variant:"primary",autoFocus:!0})]})});if(N&&C)return(0,n.jsx)(l,{title:"Add Role",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Create New Role"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{type:"text",value:I,onChange:e=>K(e.target.value),onKeyDown:e=>{"Enter"===e.key&&ei()},placeholder:"Role name",className:"flex-1 px-4 py-2 border rounded-lg",autoFocus:!0}),(0,n.jsx)("button",{onClick:ei,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create"})]})]}),(0,n.jsx)(r,{label:"Back to Role List",onClick:()=>{T(!1),K("")},variant:"primary"})]})});if(N&&V)return(0,n.jsx)(l,{title:"Role: ".concat(V.name),children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,n.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Current name: ",(0,n.jsx)("strong",{children:V.name})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Used by ",O[V.name]||0," user",1!==O[V.name]?"s":""]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Rename Role"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("input",{type:"text",value:J,onChange:e=>Y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eo()},placeholder:"New role name",className:"w-full px-4 py-2 border rounded-lg",autoFocus:!0}),(0,n.jsx)("button",{onClick:eo,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Rename"})]})]}),(0,n.jsx)(r,{label:"Back to Role List",onClick:()=>{Z(null),Y("")},variant:"primary"})]})});if(N)return(0,n.jsx)(l,{title:"Role Management",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(r,{label:"Add Role",onClick:()=>T(!0),variant:"primary",shortcut:"1",autoFocus:!0}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Existing Roles"}),(0,n.jsx)("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:0===F.length?(0,n.jsx)("p",{className:"text-gray-500 text-sm",children:"No roles created yet."}):F.map(e=>(0,n.jsxs)("button",{onClick:()=>Z(e),className:"w-full text-left bg-white rounded-lg shadow p-4 hover:bg-gray-50 transition-colors flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-medium",children:e.name}),(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:["Used by ",O[e.name]||0," user",1!==O[e.name]?"s":""]})]},e.id))})]}),(0,n.jsx)(r,{label:"Back to Dashboard",onClick:()=>w(!1),variant:"primary"})]})});if(x)return(0,n.jsx)(l,{title:"All Users",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"text",value:B,onChange:e=>M(e.target.value),placeholder:"Search users by name, email, or role...",className:"w-full px-4 py-2 border rounded-lg",autoFocus:!0})}),(0,n.jsx)("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:0===el.length?(0,n.jsx)("p",{className:"text-gray-500 text-center py-8",children:B?"No users found matching your search.":"No users found."}):el.map(e=>(0,n.jsxs)("button",{onClick:()=>H(e),className:"w-full text-left bg-white rounded-lg shadow p-4 hover:bg-gray-50 transition-colors",children:[(0,n.jsx)("div",{className:"font-medium",children:e.name}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:e.email}),e.teams&&e.teams.length>0&&(0,n.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.teams.map(e=>(0,n.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:e},e))})]},e.id))}),(0,n.jsx)(r,{label:"Back to Dashboard",onClick:()=>{j(!1),M("")},variant:"primary"})]})});if(g){let e=k(100),a=e=>"ljubljana"===e?"\uD83C\uDDF8\uD83C\uDDEE":"\uD83C\uDDE9\uD83C\uDDEA";return(0,n.jsx)(l,{title:"Public Holidays",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"space-y-2 max-h-[70vh] overflow-y-auto",children:e.map(e=>(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0 flex gap-1 mt-1",children:e.offices.map(e=>(0,n.jsx)("span",{className:"text-2xl",children:a(e)},e))}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"font-medium text-lg",children:e.displayName.en}),(0,n.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:(0,y.WU)((0,b.D)(e.date),"PPP")})]})]})},e.date))}),(0,n.jsx)(r,{label:"Close",onClick:()=>p(!1),variant:"primary",shortcut:"2",autoFocus:!0})]})})}return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,n.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Manager Dashboard"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:a})]}),(0,n.jsx)("button",{onClick:i,className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"Logout"})]}),(0,n.jsxs)("div",{className:"flex gap-2 mb-6 flex-wrap",children:[(0,n.jsxs)("button",{onClick:()=>f("pending"),className:"px-4 py-2 rounded-lg transition-colors ".concat("pending"===h?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Pending (",ea.length,")"]}),(0,n.jsxs)("button",{onClick:()=>f("approved"),className:"px-4 py-2 rounded-lg transition-colors ".concat("approved"===h?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Approved (",et.length,")"]}),(0,n.jsxs)("button",{onClick:()=>f("denied"),className:"px-4 py-2 rounded-lg transition-colors ".concat("denied"===h?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Denied (",en.length,")"]}),(0,n.jsxs)("button",{onClick:()=>f("all"),className:"px-4 py-2 rounded-lg transition-colors ".concat("all"===h?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["All (",c.length,")"]}),(0,n.jsx)(r,{label:"Show Public Holidays",onClick:()=>p(!0),variant:"outline",shortcut:"2"}),(0,n.jsx)(r,{label:"List All Users",onClick:()=>j(!0),variant:"outline"}),(0,n.jsx)(r,{label:"Manage Roles",onClick:()=>w(!0),variant:"outline"})]})]}),u?(0,n.jsx)("div",{className:"text-center py-12",children:(0,n.jsx)("p",{className:"text-gray-600",children:"Loading..."})}):0===ee.length?(0,n.jsxs)(o.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-2xl shadow-xl p-12 text-center",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"✅"}),(0,n.jsxs)("p",{className:"text-xl text-gray-600",children:["pending"===h&&"No pending requests","approved"===h&&"No approved requests","denied"===h&&"No denied requests","all"===h&&"No requests"]})]}):(0,n.jsx)("div",{className:"space-y-4",children:ee.map(e=>(0,n.jsx)(q,{request:e,onApprove:()=>X(e.id),onDeny:()=>Q(e.id),showActions:"pending"===h},e.id))})]})})}function q(e){let{request:a,onApprove:t,onDeny:s,showActions:i}=e;x[a.type];let l=j[a.office];return(0,n.jsxs)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:a.userEmail}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[T[a.type]||a.type," • ",(null==l?void 0:l.name)||a.office]})]}),(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat({pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",denied:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[a.status]),children:z[a.status]||a.status})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Start Date"}),(0,n.jsx)("p",{className:"font-medium",children:(0,y.WU)((0,b.D)(a.startDate),"PPP")})]}),a.endDate&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"End Date"}),(0,n.jsx)("p",{className:"font-medium",children:(0,y.WU)((0,b.D)(a.endDate),"PPP")})]}),a.hours&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Hours"}),(0,n.jsx)("p",{className:"font-medium",children:a.hours})]}),a.days&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Days"}),(0,n.jsx)("p",{className:"font-medium",children:a.days})]})]}),a.note&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Note"}),(0,n.jsx)("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:a.note})]}),i&&(0,n.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[(0,n.jsx)(r,{label:"Yes - Approve",onClick:t,variant:"primary"}),(0,n.jsx)(r,{label:"No - Deny",onClick:s,variant:"outline"})]})]})}var U=t(3430),_=t(4289),B=t(1303);async function M(){try{let e=await (0,D.getDatabase)(),a=(e.absences?await e.absences.find().exec():[]).map(e=>e.toJSON()),t=(e.users?await e.users.find().exec():[]).map(e=>e.toJSON()),n=(e.roles?await e.roles.find().exec():[]).map(e=>e.toJSON());console.log("=== IndexedDB Data Export ==="),console.log("Total Absences: ".concat(a.length)),console.log("Total Users: ".concat(t.length)),console.log("Total Roles: ".concat(n.length)),console.log(""),a.length>0?(console.log("--- Absences ---"),console.table(a)):console.log("--- Absences: No data ---"),console.log(""),t.length>0?(console.log("--- Users ---"),console.table(t)):console.log("--- Users: No data ---"),console.log(""),n.length>0?(console.log("--- Roles ---"),console.table(n)):console.log("--- Roles: No data ---"),console.log(""),console.log("=== End of Export ==="),console.log("--- JSON Export (for copying) ---"),console.log(JSON.stringify({absences:a,users:t,roles:n},null,2))}catch(e){console.error("Error exporting data:",e)}}function F(){let e=(0,i.useRouter)(),a=(0,i.useSearchParams)(),[o,m]=(0,s.useState)("en"),[f,b]=(0,s.useState)("home"),[v,N]=(0,s.useState)(null),[w,k]=(0,s.useState)(null),[E,S]=(0,s.useState)({step:"home",data:{}}),[C,R]=(0,s.useState)(!1),[P,T]=(0,s.useState)([]),[z,q]=(0,s.useState)(!1),[U,_]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),[V,Z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{Promise.resolve().then(t.bind(t,420)).then(e=>{let{getDatabase:a}=e;a().catch(console.error)})},[]),(0,s.useEffect)(()=>{if(!v||"employee"!==w){T([]);return}let e=null;return(async()=>{try{let{getDatabase:a}=await Promise.resolve().then(t.bind(t,420)),n=await a();if(n.absences)e=n.absences.find({selector:{userEmail:v}}).$.subscribe(e=>{let a=e.map(e=>e.toJSON());T(a)});else{let{listAbsenceRequests:e}=await Promise.resolve().then(t.bind(t,2090)),a=await e({userEmail:v});T(a)}}catch(e){console.error("Error loading user requests:",e)}})(),()=>{e&&e.unsubscribe()}},[v,w]),(0,s.useEffect)(()=>{let e=a.get("lang"),t=a.get("state");if(e&&h(e)&&m(e),t){let e=function(e){try{let a=e.replace(/-/g,"+").replace(/_/g,"/");for(;a.length%4;)a+="=";{let e=decodeURIComponent(escape(atob(a)));return JSON.parse(e)}}catch(e){return null}}(t);if(e){S(e);let a=e.step;b("type"===a&&"employee"===w?"home":a),e.language&&h(e.language)&&m(e.language),e.data.userEmail&&(N(e.data.userEmail),(0,A.getUserByEmail)(e.data.userEmail).then(e=>{e&&(k(e.role),"employee"===e.role&&"type"===a&&b("home"))}).catch(e=>{console.error("Error loading user:",e)}))}}},[a,w]);let[J,Y]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(J){Y(!1);return}let t=btoa(unescape(encodeURIComponent(JSON.stringify(E)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),n="/?state=".concat(t,"&lang=").concat(o);a.toString()!=="state=".concat(t,"&lang=").concat(o)&&e.replace(n,{scroll:!1})},[E,o,e,a,J]);let G=(0,s.useCallback)(e=>{S(a=>({...a,...e}))},[]),$=async(e,a)=>{N(e),k(a),G({step:"employee"===a?"home":"type",data:{...E.data,userEmail:e,userId:e}}),b("employee"===a?"home":"type")},X=()=>{N(null),k(null),b("home"),S({step:"home",data:{}}),F(!1),Z(!1),q(!1),_(!1),e.replace("/")},Q=(0,s.useCallback)(e=>{S(a=>({...a,step:"office",data:{...a.data,type:e}})),b("office")},[]),ee=(0,s.useCallback)(e=>{S(a=>{let t="both"===x[a.data.type].durationType?"duration":"dates";return b(t),{...a,step:t,data:{...a.data,office:e}}})},[]),ea=(0,s.useCallback)(e=>{S(a=>({...a,step:"dates",data:{...a.data,durationType:e}})),b("dates")},[]),et=(0,s.useCallback)(()=>{S(e=>({...e,step:"type",data:e.data})),b("type")},[]),en=(0,s.useCallback)(()=>{b("home"),S({step:"home",data:{}})},[]),es=(0,s.useCallback)(()=>{S(e=>({...e,step:"note",data:e.data})),b("note")},[]),ei=(0,s.useCallback)(()=>{S(e=>({...e,step:"review",data:e.data})),b("review")},[]),eo=(0,s.useCallback)(()=>{F(!1),b("home"),S(e=>({...e,step:"home"}))},[]),el=(0,s.useCallback)(()=>{Z(!1),b("home"),S(e=>({...e,step:"home"}))},[]),er=(0,s.useCallback)(()=>{R(e=>!e)},[]),ec=(0,s.useCallback)(()=>{q(!0),b("holidays")},[]),ed=(0,s.useCallback)(()=>{_(!0),b("history")},[]),eu=(0,s.useCallback)(()=>{q(!1),b("home")},[]),em=(0,s.useCallback)(()=>{_(!1),b("home")},[]),eh=(0,s.useCallback)(()=>{F(!0),b("features")},[]),ef=(0,s.useCallback)(()=>{Z(!0),b("documentation")},[]),eg=(0,s.useCallback)(()=>{if("holidays"===f||"history"===f||"features"===f||"documentation"===f){"features"===f?eo():"documentation"===f?el():(b("home"),S(e=>({...e,step:"home"})));return}if(("features"===f||"documentation"===f)&&(!v||!w)){"features"===f?eo():"documentation"===f&&el();return}if("submitted"===f){b("home"),S(e=>({...e,step:"home"}));return}if("home"===f)return;let e=["type","office","duration","dates","note","review"],a=e.indexOf(f);if(a>0){let t=e[a-1];b(t),G({step:t})}else 0===a&&(b("home"),S(e=>({...e,step:"home"})))},[f,G,v,w,eo,el]),ep=async()=>{try{let{createAbsenceRequest:e}=await Promise.resolve().then(t.bind(t,2090)),{getUserByEmail:a}=await Promise.resolve().then(t.bind(t,8558)),n=v||E.data.userEmail,s=E.data.managerEmail;if(!s&&n){let e=await a(n);e&&e.managerEmail&&(s=e.managerEmail)}let i={userId:n,userEmail:n,type:E.data.type,office:E.data.office,startDate:E.data.startDate,endDate:E.data.endDate,hours:E.data.hours,days:E.data.days,note:E.data.note,managerEmail:s};console.log("=== Absence Request Data ==="),console.log("Request Data:",JSON.stringify(i,null,2)),console.log("Employee Email:",n),console.log("Manager Email:",s||"No manager assigned"),console.log("Absence Type:",i.type),console.log("Office:",i.office),console.log("Start Date:",i.startDate),console.log("End Date:",i.endDate||"N/A"),console.log("Hours:",i.hours||"N/A"),console.log("Days:",i.days||"N/A"),console.log("Note:",i.note||"N/A"),console.log("===========================");let o=await e(i);console.log("Created absence request:",o),S(e=>({...e,step:"submitted"})),b("submitted")}catch(e){console.error("Error submitting request:",e),alert("Failed to submit request. Please try again.")}},ey=E.data.type?x[E.data.type]:null;return((0,s.useEffect)(()=>{let e=e=>{var a,t;(null===(a=document.activeElement)||void 0===a?void 0:a.tagName)!=="INPUT"&&(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="TEXTAREA"&&("E"===e.key&&e.ctrlKey&&e.shiftKey&&(e.preventDefault(),M()),"S"===e.key&&e.ctrlKey&&e.shiftKey&&(e.preventDefault(),(0,D.seedDatabase)().then(()=>{console.log("Database seeding triggered. Check console for details."),alert("Database seeding completed! Check console for details.")}).catch(e=>{console.error("Database seeding failed:",e),alert("Database seeding failed. Check console for details.")})))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,s.useEffect)(()=>{if(v||w)return;let e=e=>{var a,t;(null===(a=document.activeElement)||void 0===a?void 0:a.tagName)!=="INPUT"&&(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="TEXTAREA"&&(("features"===f||"documentation"===f)&&"Escape"===e.key?(e.preventDefault(),"features"===f?eo():"documentation"===f&&el()):"Backspace"===e.key&&("features"===f||"documentation"===f)&&(e.preventDefault(),"features"===f?eo():"documentation"===f&&el()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,v,w,eo,el]),(0,s.useEffect)(()=>{if("employee"!==w)return;let e=e=>{var a,t;if((null===(a=document.activeElement)||void 0===a?void 0:a.tagName)!=="INPUT"&&(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="TEXTAREA"){if("home"===f&&"1"===e.key)e.preventDefault(),et();else if("home"===f&&"2"===e.key)e.preventDefault(),ec();else if("home"===f&&"3"===e.key)e.preventDefault(),ed();else if(("holidays"===f||"history"===f||"features"===f||"documentation"===f)&&"Escape"===e.key)e.preventDefault(),"holidays"===f?eu():"history"===f?em():"features"===f?eo():"documentation"===f&&el();else if("Backspace"===e.key)e.preventDefault(),eg();else if("type"===f&&e.key>="1"&&e.key<="9"){let a=parseInt(e.key)-1,t=Object.entries(x);t[a]&&(e.preventDefault(),Q(t[a][0]))}else if("office"===f&&e.key>="1"&&e.key<="9"){let a=parseInt(e.key)-1,t=Object.entries(j);t[a]&&(e.preventDefault(),ee(t[a][0]))}else"duration"===f&&("1"===e.key?(e.preventDefault(),ea("hours")):"2"===e.key&&(e.preventDefault(),ea("days")))}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,w,et,Q,ee,ea,ec,ed,eu,em,eg]),v&&w)?"manager"===w?(0,n.jsx)(H,{managerEmail:v,language:o,onLogout:X}):(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3 px-4 py-3",children:[(0,n.jsx)("div",{className:"text-sm text-gray-700 truncate min-w-0 flex-shrink",children:v}),(0,n.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,n.jsxs)("select",{value:o,onChange:e=>{let a=e.target.value;m(a),S(e=>({...e,language:a}))},className:"px-3 py-2 bg-white shadow",children:[(0,n.jsx)("option",{value:"en",children:"English"}),(0,n.jsx)("option",{value:"sl",children:"Slovenščina"}),(0,n.jsx)("option",{value:"de",children:"Deutsch"})]}),(0,n.jsx)("button",{onClick:X,className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 bg-white shadow",children:"Logout"})]})]}),"holidays"===f&&"employee"===w?(0,n.jsx)(O,{language:o,onClose:eu}):"history"===f&&"employee"===w?(0,n.jsx)(W,{language:o,requests:P,onClose:em}):"home"===f&&"employee"===w?(0,n.jsx)(L,{userEmail:v,language:o,requests:P,showAllHistory:C,onToggleHistory:er,onStartNewRequest:et,onShowHolidays:ec,onShowHistory:ed}):"submitted"===f?(0,n.jsx)(l,{title:g("absence.submitted",o),children:(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"✅"}),(0,n.jsx)("p",{className:"text-gray-600",children:g("absence.submitted",o)}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsx)(r,{label:g("common.backToFirstPage",o)||"Back to first page",onClick:en,variant:"primary",autoFocus:!0})})]})}):(0,n.jsxs)(n.Fragment,{children:["type"===f&&(0,n.jsx)(l,{title:g("absence.title",o),description:g("absence.selectType",o),children:Object.entries(x).map((e,a)=>{let[t,s]=e;return(0,n.jsx)(r,{label:g("absence.types.".concat(t),o),shortcut:String(a+1),onClick:()=>Q(t),autoFocus:0===a},t)})}),"office"===f&&(0,n.jsx)(l,{title:g("absence.selectOffice",o),showBack:!0,onBack:eg,children:Object.entries(j).map((e,a)=>{let[t,s]=e;return(0,n.jsx)(r,{label:g("office.".concat(t),o),shortcut:String(a+1),onClick:()=>ee(t),autoFocus:0===a},t)})}),"duration"===f&&(0,n.jsxs)(l,{title:g("absence.selectDuration",o),showBack:!0,onBack:eg,children:[(0,n.jsx)(r,{label:g("absence.duration.hours",o),shortcut:"1",onClick:()=>ea("hours"),autoFocus:!0}),(0,n.jsx)(r,{label:g("absence.duration.days",o),shortcut:"2",onClick:()=>ea("days")})]}),"dates"===f&&(0,n.jsxs)(l,{title:g("absence.selectDate",o),showBack:!0,onBack:eg,children:[(0,n.jsx)(c,{label:g("absence.selectStartDate",o),value:E.data.startDate||"",onChange:e=>G({data:{...E.data,startDate:e}}),min:(0,y.WU)(new Date,"yyyy-MM-dd"),required:!0,autoFocus:!0}),((null==ey?void 0:ey.durationType)==="days"||"days"===E.data.durationType)&&(0,n.jsx)(c,{label:g("absence.selectEndDate",o),value:E.data.endDate||"",onChange:e=>G({data:{...E.data,endDate:e}}),min:E.data.startDate||(0,y.WU)(new Date,"yyyy-MM-dd")}),((null==ey?void 0:ey.durationType)==="hours"||"hours"===E.data.durationType)&&(0,n.jsx)(d,{label:g("absence.selectHours",o),value:E.data.hours||"",onChange:e=>G({data:{...E.data,hours:e}}),min:.5,step:.5,required:!0}),(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(r,{label:g("common.next",o),onClick:es,variant:"primary"})})]}),"note"===f&&(0,n.jsxs)(l,{title:g("absence.addNote",o),showBack:!0,onBack:eg,children:[(0,n.jsx)(u,{label:g("absence.addNote",o),value:E.data.note||"",onChange:e=>G({data:{...E.data,note:e}}),placeholder:g("absence.notePlaceholder",o),autoFocus:!0}),(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(r,{label:g("common.next",o),onClick:ei,variant:"primary"})})]}),"review"===f&&(0,n.jsxs)(l,{title:g("absence.review",o),showBack:!0,onBack:eg,children:[(0,n.jsxs)("div",{className:"space-y-4 bg-gray-50 p-6 rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[g("absence.selectType",o),":"]})," ",g("absence.types.".concat(E.data.type),o)]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[g("absence.selectOffice",o),":"]})," ",g("office.".concat(E.data.office),o)]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[g("absence.selectStartDate",o),":"]})," ",E.data.startDate]}),E.data.endDate&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[g("absence.selectEndDate",o),":"]})," ",E.data.endDate]}),E.data.hours&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[g("absence.selectHours",o),":"]})," ",E.data.hours]}),E.data.note&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[g("absence.addNote",o),":"]})," ",E.data.note]})]}),(0,n.jsx)("div",{className:"pt-4",children:(0,n.jsx)(r,{label:g("common.submit",o),onClick:ep,variant:"primary",autoFocus:!0})})]})]})]}):(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(p,{onLogin:$,language:o,onShowFeatures:eh,onShowDocumentation:ef}),"features"===f&&(0,n.jsx)("div",{className:"absolute inset-0 z-50",children:(0,n.jsx)(I,{language:o,onClose:eo})}),"documentation"===f&&(0,n.jsx)("div",{className:"absolute inset-0 z-50",children:(0,n.jsx)(K,{language:o,onClose:el})})]})}function L(e){let{userEmail:a,language:s,requests:i,showAllHistory:o,onToggleHistory:c,onStartNewRequest:d,onShowHolidays:u,onShowHistory:m}=e,h=new Date;h.setHours(0,0,0,0);let f=i.filter(e=>{let a=(0,b.D)(e.startDate),t=e.endDate?(0,b.D)(e.endDate):a;return((0,U.R)(a,h)||a.getTime()===h.getTime())&&((0,_.A)(t,h)||t.getTime()===h.getTime())&&"approved"===e.status}),p=i.filter(e=>{let a=(0,b.D)(e.startDate);return(0,_.A)(a,h)&&"approved"===e.status}),x=i.filter(e=>"pending"===e.status||"sent"===e.status),j=i.filter(e=>"denied"===e.status),v=[...i].sort((e,a)=>{let t=(0,b.D)(e.startDate);return(0,b.D)(a.startDate).getTime()-t.getTime()}),D=e=>{let a=(0,b.D)(e.createdAt),t=(0,b.D)(e.startDate);return(0,B.j)(t,a)>30},N=async e=>{try{let{updateAbsenceRequest:a}=await Promise.resolve().then(t.bind(t,2090));await a(e,{status:"cancelled"}),console.log("Request aborted:",e)}catch(e){console.error("Error aborting request:",e),alert("Failed to abort request. Please try again.")}},w=async e=>{try{let{updateAbsenceRequest:a}=await Promise.resolve().then(t.bind(t,2090));await a(e,{status:"sent"}),console.log("Request resent:",e)}catch(e){console.error("Error resending request:",e),alert("Failed to resend request. Please try again.")}},k=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="pending"===e.status||"sent"===e.status;return(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-medium",children:g("absence.types.".concat(e.type),s)}),a&&(0,n.jsx)("span",{className:"text-red-600 font-bold",children:"!!"})]}),(0,n.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[(0,y.WU)((0,b.D)(e.startDate),"PPP"),e.endDate&&e.endDate!==e.startDate&&(0,n.jsxs)(n.Fragment,{children:[" - ",(0,y.WU)((0,b.D)(e.endDate),"PPP")]})]}),e.note&&(0,n.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:e.note}),t&&(0,n.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,n.jsx)("button",{onClick:()=>N(e.id),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:g("absence.abortRequest",s)||"Abort"}),(0,n.jsx)("button",{onClick:()=>w(e.id),className:"px-3 py-1.5 text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors",children:g("absence.resendRequest",s)||"Resend"})]})]}),(0,n.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat({pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",denied:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[e.status]),children:g("status.".concat(e.status),s)})]})},e.id)};return(0,n.jsx)(l,{title:g("absence.myRequests",s)||"My Requests",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(r,{label:g("absence.newRequest",s)||"Start New Request",onClick:d,variant:"primary",shortcut:"1",autoFocus:!0}),o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:g("absence.allHistory",s)||"All History"}),(0,n.jsx)("div",{className:"space-y-2",children:v.map(e=>k(e,D(e)))})]}),(0,n.jsx)(r,{label:g("absence.hideHistory",s)||"Hide History",onClick:c,variant:"outline"})]}):(0,n.jsxs)(n.Fragment,{children:[f.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:g("absence.ongoing",s)||"Ongoing"}),(0,n.jsx)("div",{className:"space-y-2",children:f.map(e=>k(e))})]}),p.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:g("absence.upcoming",s)||"Upcoming"}),(0,n.jsx)("div",{className:"space-y-2",children:p.map(e=>k(e))})]}),x.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:g("absence.pending",s)||"Pending"}),(0,n.jsx)("div",{className:"space-y-2",children:x.map(e=>k(e))})]}),j.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:g("absence.rejected",s)||"Rejected"}),(0,n.jsx)("div",{className:"space-y-2",children:j.map(e=>k(e))})]}),(0,n.jsx)(r,{label:g("absence.showHolidays",s)||"Show Public Holidays",onClick:u,variant:"outline",shortcut:"2"}),v.length>0&&(0,n.jsx)(r,{label:g("absence.showAllHistory",s)||"Show All History",onClick:m,variant:"outline",shortcut:"3"})]}),(0,n.jsx)(r,{label:g("absence.newRequest",s)||"Start New Request",onClick:d,variant:"primary",shortcut:"1"})]})})}function O(e){let{language:a,onClose:t}=e,s=k(100),i=e=>"ljubljana"===e?"\uD83C\uDDF8\uD83C\uDDEE":"\uD83C\uDDE9\uD83C\uDDEA";return(0,n.jsx)(l,{title:g("absence.publicHolidays",a)||"Public Holidays",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"space-y-2 max-h-[70vh] overflow-y-auto",children:s.map(e=>(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0 flex gap-1 mt-1",children:e.offices.map(e=>(0,n.jsx)("span",{className:"text-2xl",children:i(e)},e))}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"font-medium text-lg",children:e.displayName[a]||e.displayName.en}),(0,n.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:(0,y.WU)((0,b.D)(e.date),"PPP")})]})]})},e.date))}),(0,n.jsx)(r,{label:g("common.close",a)||"Close",onClick:t,variant:"primary",autoFocus:!0})]})})}function W(e){let{language:a,requests:t,onClose:s}=e,i=[...t].sort((e,a)=>{let t=(0,b.D)(e.startDate);return(0,b.D)(a.startDate).getTime()-t.getTime()}),o=e=>{let a=(0,b.D)(e.createdAt),t=(0,b.D)(e.startDate);return(0,B.j)(t,a)>30},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-medium",children:g("absence.types.".concat(e.type),a)}),t&&(0,n.jsx)("span",{className:"text-red-600 font-bold",children:"!!"})]}),(0,n.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[(0,y.WU)((0,b.D)(e.startDate),"PPP"),e.endDate&&e.endDate!==e.startDate&&(0,n.jsxs)(n.Fragment,{children:[" - ",(0,y.WU)((0,b.D)(e.endDate),"PPP")]})]}),e.note&&(0,n.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:e.note})]}),(0,n.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat({pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",denied:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[e.status]),children:g("status.".concat(e.status),a)})]})},e.id)};return(0,n.jsx)(l,{title:g("absence.allHistory",a)||"All History",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:i.length>0?i.map(e=>c(e,o(e))):(0,n.jsx)("div",{className:"text-center py-8 text-gray-500",children:g("absence.noHistory",a)||"No history available"})}),(0,n.jsx)(r,{label:g("common.close",a)||"Close",onClick:s,variant:"primary",autoFocus:!0})]})})}function I(e){let{language:a,onClose:t}=e,[i,o]=(0,s.useState)(""),r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{fetch("/FEATURES.md").then(e=>e.text()).then(e=>o(e)).catch(e=>{console.error("Error loading features:",e),o("Error loading features documentation.")})},[]),(0,s.useEffect)(()=>{if(r.current){let e=setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.focus()},100);return()=>clearTimeout(e)}},[i]),(0,n.jsx)(l,{title:g("absence.features",a)||"Features",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"max-h-[70vh] overflow-y-auto bg-white rounded-lg shadow p-6",children:(0,n.jsx)("div",{className:"text-sm text-gray-800",children:i?i.split("\n").map((e,a)=>e.startsWith("## ")?(0,n.jsx)("h2",{className:"text-2xl font-bold mt-6 mb-3 text-gray-900",children:e.substring(3)},a):e.startsWith("### ")?(0,n.jsx)("h3",{className:"text-xl font-semibold mt-4 mb-2 text-gray-800",children:e.substring(4)},a):e.startsWith("- ✅")?(0,n.jsx)("div",{className:"text-green-700 ml-4 mb-1",children:e.substring(2)},a):e.startsWith("- ⏳")?(0,n.jsx)("div",{className:"text-yellow-700 ml-4 mb-1",children:e.substring(2)},a):e.startsWith("- \uD83D\uDD2E")?(0,n.jsx)("div",{className:"text-gray-600 ml-4 mb-1",children:e.substring(2)},a):e.startsWith("- ")?(0,n.jsx)("div",{className:"ml-4 mb-1",children:e.substring(2)},a):""===e.trim()?(0,n.jsx)("div",{className:"mb-2"},a):(0,n.jsx)("div",{className:"mb-2",children:e},a)):(0,n.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading features..."})})}),(0,n.jsx)("button",{ref:r,onClick:t,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),t())},className:"w-full px-6 py-4 rounded-lg text-left transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 cursor-pointer",autoFocus:!0,children:(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsx)("span",{className:"text-lg font-medium",children:g("common.close",a)||"Close"})})})]})})}function K(e){let{language:a,onClose:t}=e,[i,o]=(0,s.useState)(""),r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{fetch("/DOCUMENTATION.md").then(e=>e.text()).then(e=>o(e)).catch(e=>{console.error("Error loading documentation:",e),o("Error loading documentation.")})},[]),(0,s.useEffect)(()=>{if(r.current){let e=setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.focus()},100);return()=>clearTimeout(e)}},[i]),(0,n.jsx)(l,{title:g("absence.documentation",a)||"Documentation",children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"max-h-[70vh] overflow-y-auto bg-white rounded-lg shadow p-6",children:(0,n.jsx)("div",{className:"text-sm text-gray-800",children:i?(e=>{let a=e.split("\n"),t=[],s=!1,i=[],o=0;return a.forEach((e,a)=>{if(e.trim().startsWith("```")){s?(t.push((0,n.jsx)("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg my-4 overflow-x-auto",children:(0,n.jsx)("code",{className:"text-sm font-mono whitespace-pre",children:i.join("\n")})},"code-".concat(o))),i=[],s=!1,o++):s=!0;return}if(s){i.push(e);return}e.startsWith("## ")?t.push((0,n.jsx)("h2",{className:"text-2xl font-bold mt-6 mb-3 text-gray-900",children:e.substring(3)},a)):e.startsWith("### ")?t.push((0,n.jsx)("h3",{className:"text-xl font-semibold mt-4 mb-2 text-gray-800",children:e.substring(4)},a)):e.startsWith("- ")?t.push((0,n.jsx)("div",{className:"ml-4 mb-1",children:e.substring(2)},a)):""===e.trim()?t.push((0,n.jsx)("div",{className:"mb-2"},a)):e.startsWith("**")&&e.endsWith("**")?t.push((0,n.jsx)("div",{className:"font-semibold mb-2",children:e.substring(2,e.length-2)},a)):t.push((0,n.jsx)("div",{className:"mb-2",children:e},a))}),s&&i.length>0&&t.push((0,n.jsx)("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg my-4 overflow-x-auto",children:(0,n.jsx)("code",{className:"text-sm font-mono whitespace-pre",children:i.join("\n")})},"code-".concat(o))),t})(i):(0,n.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading documentation..."})})}),(0,n.jsx)("button",{ref:r,onClick:t,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),t())},className:"w-full px-6 py-4 rounded-lg text-left transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 cursor-pointer",autoFocus:!0,children:(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsx)("span",{className:"text-lg font-medium",children:g("common.close",a)||"Close"})})})]})})}function V(){return(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,n.jsx)(F,{})})}},2090:function(e,a,t){"use strict";t.d(a,{createAbsenceRequest:function(){return s},listAbsenceRequests:function(){return o},updateAbsenceRequest:function(){return i}});var n=t(420);async function s(e){let a=await (0,n.getDatabase)();if(!a.absences)throw Error("Absences collection not available");let t={id:"abs_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),...e,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await a.absences.insert(t),t}async function i(e,a){try{let t=await (0,n.getDatabase)();if(!t.absences)return null;let s=await t.absences.findOne(e).exec();if(!s)return null;let i={updatedAt:new Date().toISOString()};return a.status&&(i.status=a.status),"approved"===a.status?i.approvedAt=new Date().toISOString():"denied"===a.status?i.deniedAt=new Date().toISOString():"cancelled"===a.status&&(i.cancelledAt=new Date().toISOString()),void 0!==a.note&&(i.note=a.note),await s.incrementalPatch(i),s.toJSON()}catch(e){return console.error("Error updating absence request:",e),null}}async function o(e){try{let a=await (0,n.getDatabase)();if(!a.absences)return[];let t={};e.userId&&(t.userId=e.userId),e.userEmail&&(t.userEmail=e.userEmail),e.department&&(t.office=e.department),e.managerEmail&&(t.managerEmail=e.managerEmail),e.status&&(t.status=e.status),(e.startDate||e.endDate)&&(t.startDate={},e.startDate&&(t.startDate.$gte=e.startDate),e.endDate&&(t.startDate.$lte=e.endDate));let s=a.absences.find({selector:t});return(await s.exec()).map(e=>e.toJSON())}catch(e){return console.error("Error listing absence requests:",e),[]}}},420:function(e,a,t){"use strict";t.r(a),t.d(a,{closeDatabase:function(){return p},getDatabase:function(){return m},seedDatabase:function(){return g}});var n=t(2372),s=t(5627),i=t(6357),o=t(707),l=t(4073);let r={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},userId:{type:"string"},userEmail:{type:"string"},type:{type:"string"},office:{type:"string"},startDate:{type:"string"},endDate:{type:"string"},hours:{type:"number"},days:{type:"number"},note:{type:"string"},status:{type:"string"},managerEmail:{type:"string"},createdAt:{type:"string"},updatedAt:{type:"string"},approvedAt:{type:"string"},deniedAt:{type:"string"},cancelledAt:{type:"string"}},required:["id","userId","userEmail","type","office","startDate","status","createdAt","updatedAt"],indexes:["userId","userEmail","managerEmail","status","startDate","office"]},c={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},email:{type:"string"},name:{type:"string"},role:{type:"string"},managerEmail:{type:"string"},office:{type:"string"},createdAt:{type:"string"},updatedAt:{type:"string"},teams:{type:"array",items:{type:"string"}}},required:["id","email","name","role","office","createdAt"],indexes:["email","role","managerEmail","office"]},d={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},createdAt:{type:"string"},updatedAt:{type:"string"}},required:["id","name","createdAt","updatedAt"],indexes:["name"]};(0,n.o)(o.G3),(0,n.o)(l.Rf);let u=null;async function m(){if(u)return u;let e=(0,i.J)();u=await (0,s.tl)({name:"vacaybot",storage:e,ignoreDuplicate:!0});let a=await u.addCollections({absences:{schema:r},users:{schema:c},roles:{schema:d}});if(!a.users||!a.absences||!a.roles)throw Error("Failed to create database collections");if((!u.users||!u.absences||!u.roles)&&(await new Promise(e=>setTimeout(e,100)),!u.users||!u.absences||!u.roles))throw Error("Database collections not available after initialization");try{let e=await u.users.count().exec(),a=await u.absences.count().exec(),t=await u.roles.count().exec();0===e&&0===a&&await h(u),0===t&&await f(u)}catch(e){console.error("Error checking/initializing demo data:",e);try{let e=await u.users.count().exec(),a=await u.absences.count().exec();0===e&&0===a&&await h(u);let t=await u.roles.count().exec();0===t&&await f(u)}catch(e){console.error("Error initializing demo data:",e)}}return u}async function h(e){let a="2025-11-11T22:55:29.924Z";await e.users.insert({id:"demo-employee-1",email:"employee@demo.com",name:"Demo Employee",role:"employee",managerEmail:"manager@demo.com",office:"ljubljana",createdAt:a}),await e.users.insert({id:"demo-manager-1",email:"manager@demo.com",name:"Demo Manager",role:"manager",office:"ljubljana",createdAt:a}),await e.absences.insert({id:"abs_1762902314011_fmgqo8zsq",userId:"employee@demo.com",userEmail:"employee@demo.com",type:"vacation",office:"ljubljana",startDate:"2025-11-15",endDate:"2025-11-23",managerEmail:"manager@demo.com",status:"approved",createdAt:"2025-11-11T23:05:14.011Z",updatedAt:"2025-11-11T23:13:44.571Z",approvedAt:"2025-11-11T23:13:44.571Z"}),await e.absences.insert({id:"abs_1762903173668_13geoe102",userId:"employee@demo.com",userEmail:"employee@demo.com",type:"sick_child",office:"ljubljana",startDate:"2025-11-14",endDate:"2025-11-17",note:"test",managerEmail:"manager@demo.com",status:"pending",createdAt:"2025-11-11T23:19:33.668Z",updatedAt:"2025-11-11T23:19:33.668Z"})}async function f(e){let a=new Date().toISOString();await e.roles.insert({id:"role_manager",name:"Manager",createdAt:a,updatedAt:a}),await e.roles.insert({id:"role_employee",name:"Employee",createdAt:a,updatedAt:a}),await e.roles.insert({id:"role_admin",name:"Admin",createdAt:a,updatedAt:a})}async function g(){try{let e=await m(),a=await e.users.count().exec(),t=await e.absences.count().exec(),n=await e.roles.count().exec();0===a&&0===t?(await h(e),console.log("✅ Seeded demo users and absence requests")):console.log("ℹ️ Users/absences already exist, skipping demo data seed"),0===n?(await f(e),console.log("✅ Seeded default roles (Manager, Employee, Admin)")):console.log("ℹ️ Roles already exist, skipping role seed"),console.log("✅ Database seeding completed")}catch(e){throw console.error("❌ Error seeding database:",e),e}}async function p(){u&&(await u.destroy(),u=null)}},8558:function(e,a,t){"use strict";t.d(a,{getUserByEmail:function(){return s},wy:function(){return o},yw:function(){return i}});var n=t(420);async function s(e){try{let a=await (0,n.getDatabase)();if(!a.users)return console.error("Users collection not available"),null;let t=await a.users.findOne({selector:{email:e}}).exec();return t?t.toJSON():null}catch(e){return console.error("Error getting user by email:",e),null}}async function i(){let e=await (0,n.getDatabase)();return e.users?(await e.users.find().exec()).map(e=>e.toJSON()):[]}async function o(e,a){try{let t=await (0,n.getDatabase)();if(!t.users)return null;let s=await t.users.findOne(e).exec();if(!s)return null;return await s.update({$set:{teams:a,updatedAt:new Date().toISOString()}}),s.toJSON()}catch(e){return console.error("Error updating user teams:",e),null}}}},function(e){e.O(0,[973,971,117,744],function(){return e(e.s=3656)}),_N_E=e.O()}]);