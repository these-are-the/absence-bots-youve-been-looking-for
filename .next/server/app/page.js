(()=>{var e={};e.id=931,e.ids=[931],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},99836:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>f,pages:()=>c,routeModule:()=>d,tree:()=>l}),r(35480),r(32029),r(35866);var n=r(23191),o=r(88716),i=r(37922),a=r.n(i),s=r(95231),u={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>s[e]);r.d(t,u);let l=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,35480)),"/Users/simonbohlin/13/VacayBot/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"/Users/simonbohlin/13/VacayBot/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/simonbohlin/13/VacayBot/src/app/page.tsx"],f="/page",p={require:r,loadChunk:()=>Promise.resolve()},d=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},73862:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},15636:()=>{},33960:(e,t,r)=>{Promise.resolve().then(r.bind(r,30901))},46192:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{Aggregator:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(7767),c=r(50981);class f{constructor(e,t){this.pipeline=e,this.options=(0,u.initOptions)(t)}stream(e){let t=(0,l.Lazy)(e),r=this.options.processingMode;(r==u.ProcessingMode.CLONE_ALL||r==u.ProcessingMode.CLONE_INPUT)&&t.map(c.cloneDeep);let n=[];if(!(0,c.isEmpty)(this.pipeline))for(let e of this.pipeline){let r=Object.keys(e),o=r[0],i=(0,u.getOperator)(u.OperatorType.PIPELINE,o,this.options);(0,c.assert)(1===r.length&&!!i,`invalid pipeline operator ${o}`),n.push(o),t=i(t,e[o],this.options)}return(r==u.ProcessingMode.CLONE_OUTPUT||r==u.ProcessingMode.CLONE_ALL&&(0,c.intersection)([["$group","$unwind"],n]).length)&&t.map(c.cloneDeep),t}run(e){return this.stream(e).value()}}},93561:(e,t,r)=>{let n,o;var i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,u=Object.prototype.hasOwnProperty,l={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(l,{ComputeOptions:()=>p,Context:()=>m,OperatorType:()=>h,ProcessingMode:()=>f,computeValue:()=>w,getOperator:()=>v,initOptions:()=>d,redact:()=>x,useOperators:()=>b}),e.exports=((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of s(t))u.call(e,o)||o===r||i(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e})(i({},"__esModule",{value:!0}),l);var c=r(50981),f=((n=f||{}).CLONE_ALL="CLONE_ALL",n.CLONE_INPUT="CLONE_INPUT",n.CLONE_OUTPUT="CLONE_OUTPUT",n.CLONE_OFF="CLONE_OFF",n);class p{constructor(e,t,r,n=Date.now()){this._opts=e,this._root=t,this._local=r,this.timestamp=n,this.update(t,r)}static init(e,t,r){return e instanceof p?new p(e._opts,(0,c.isNil)(e.root)?t:e.root,Object.assign({},e.local,r)):new p(e,t,r)}update(e,t){return this._root=e,this._local=t?Object.assign({},t,{variables:Object.assign({},this._local?.variables,t?.variables)}):t,this}getOptions(){return Object.freeze({...this._opts,context:m.from(this._opts.context)})}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){return this._opts?.collation}get processingMode(){return this._opts?.processingMode||"CLONE_OFF"}get useStrictMode(){return this._opts?.useStrictMode}get scriptEnabled(){return this._opts?.scriptEnabled}get useGlobalContext(){return this._opts?.useGlobalContext}get hashFunction(){return this._opts?.hashFunction}get collectionResolver(){return this._opts?.collectionResolver}get jsonSchemaValidator(){return this._opts?.jsonSchemaValidator}get variables(){return this._opts?.variables}get context(){return this._opts?.context}}function d(e){return e instanceof p?e.getOptions():Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:"CLONE_OFF",...e,context:e?.context?m.from(e?.context):m.init({})})}var h=((o=h||{}).ACCUMULATOR="accumulator",o.EXPRESSION="expression",o.PIPELINE="pipeline",o.PROJECTION="projection",o.QUERY="query",o.WINDOW="window",o);class m{constructor(e){for(let[t,r]of(this.operators={accumulator:{},expression:{},pipeline:{},projection:{},query:{},window:{}},Object.entries(e)))this.addOperators(t,r)}static init(e={}){return new m(e)}static from(e){return new m(e.operators)}addOperators(e,t){for(let[r,n]of Object.entries(t))this.getOperator(e,r)||(this.operators[e][r]=n);return this}addAccumulatorOps(e){return this.addOperators("accumulator",e)}addExpressionOps(e){return this.addOperators("expression",e)}addQueryOps(e){return this.addOperators("query",e)}addPipelineOps(e){return this.addOperators("pipeline",e)}addProjectionOps(e){return this.addOperators("projection",e)}addWindowOps(e){return this.addOperators("window",e)}getOperator(e,t){return e in this.operators&&this.operators[e][t]||null}}let y=m.init();function b(e,t){for(let[r,n]of Object.entries(t)){(0,c.assert)((0,c.isFunction)(n)&&(0,c.isOperator)(r),`'${r}' is not a valid operator`);let t=v(e,r,null);(0,c.assert)(!t||n===t,`${r} already exists for '${e}' operators. Cannot change operator function once registered.`)}switch(e){case"accumulator":y.addAccumulatorOps(t);break;case"expression":y.addExpressionOps(t);break;case"pipeline":y.addPipelineOps(t);break;case"projection":y.addProjectionOps(t);break;case"query":y.addQueryOps(t);break;case"window":y.addWindowOps(t)}}function v(e,t,r){let{context:n,useGlobalContext:o}=r||{},i=n?n.getOperator(e,t):null;return!i&&o?y.getOperator(e,t):i}let g={$$ROOT:(e,t,r)=>r.root,$$CURRENT:(e,t,r)=>e,$$REMOVE(e,t,r){},$$NOW:(e,t,r)=>new Date(r.timestamp)},O={$$KEEP:(e,t,r)=>e,$$PRUNE(e,t,r){},$$DESCEND(e,t,r){let n;if(!(0,c.has)(t,"$cond"))return e;for(let[o,i]of Object.entries(e))if((0,c.isObjectLike)(i)){if(i instanceof Array){let e=[];for(let n of i)(0,c.isObject)(n)&&(n=x(n,t,r.update(n))),(0,c.isNil)(n)||e.push(n);n=e}else n=x(i,t,r.update(i));(0,c.isNil)(n)?delete e[o]:e[o]=n}return e}};function w(e,t,r,n){let o=p.init(n,e);if(r=r||"",(0,c.isOperator)(r)){let i=v("expression",r,n);if(i)return i(e,t,o);let a=v("accumulator",r,n);if(a)return e instanceof Array||(e=w(e,t,null,o),t=null),(0,c.assert)(e instanceof Array,`'${r}' target must be an array.`),a(e,t,o.update(null,o.local));throw new c.MingoError(`operator '${r}' is not registered`)}if((0,c.isString)(t)&&t.length>0&&"$"===t[0]){if((0,c.has)(O,t))return t;let r=o.root,n=t.split(".");if((0,c.has)(g,n[0]))r=g[n[0]](e,null,o),t=t.slice(n[0].length+1);else if("$$"===n[0].slice(0,2)){r=Object.assign({},o.variables,{this:e},o.local?.variables);let i=n[0].slice(2);(0,c.assert)((0,c.has)(r,i),`Use of undefined variable: ${i}`),t=t.slice(2)}else t=t.slice(1);return""===t?r:(0,c.resolve)(r,t)}if((0,c.isArray)(t))return t.map(t=>w(e,t,null,o));if((0,c.isObject)(t)){let r={};for(let[i,a]of Object.entries(t))if(r[i]=w(e,a,i,o),["expression","accumulator"].some(e=>!!v(e,i,n)))return(0,c.assert)(1===Object.keys(t).length,"Invalid aggregation expression '"+JSON.stringify(t)+"'"),r[i];return r}return t}function x(e,t,r){let n=w(e,t,null,r);return(0,c.has)(O,n)?O[n](e,t,r):n}},44944:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{Cursor:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(46192),l=r(7767),c=r(50981);class f{constructor(e,t,r,n){this.source=e,this.predicate=t,this.projection=r,this.options=n,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result||((0,c.isObject)(this.projection)&&this.operators.push({$project:this.projection}),this.result=(0,l.Lazy)(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new u.Aggregator(this.operators,this.options).stream(this.result))),this.result}fetchAll(){let e=(0,l.Lazy)([...this.buffer]);return this.buffer=[],(0,l.compose)(e,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(e){return this.operators.push({$skip:e}),this}limit(e){return this.operators.push({$limit:e}),this}sort(e){return this.operators.push({$sort:e}),this}collation(e){return this.options={...this.options,collation:e},this}next(){if(this.buffer.length>0)return this.buffer.pop();let e=this.fetch().next();if(!e.done)return e.value}hasNext(){if(this.buffer.length>0)return!0;let e=this.fetch().next();return!e.done&&(this.buffer.push(e.value),!0)}map(e){return this.all().map(e)}forEach(e){this.all().forEach(e)}[Symbol.iterator](){return this.fetchAll()}}},7767:(e,t,r)=>{let n;var o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{Iterator:()=>h,Lazy:()=>c,compose:()=>f}),e.exports=((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of a(t))s.call(e,u)||u===r||o(e,u,{get:()=>t[u],enumerable:!(n=i(t,u))||n.enumerable});return e})(o({},"__esModule",{value:!0}),u);var l=r(50981);function c(e){return e instanceof h?e:new h(e)}function f(...e){let t=0;return c(()=>{for(;t<e.length;){let r=e[t].next();if(!r.done)return r;t++}return{done:!0}})}let p=Error();var d=((n=d||{})[n.MAP=0]="MAP",n[n.FILTER=1]="FILTER",n[n.TAKE=2]="TAKE",n[n.DROP=3]="DROP",n);class h{constructor(e){let t;if(this.iteratees=[],this.yieldedValues=[],this.isDone=!1,e instanceof Function&&(e={next:e}),function(e){return!!e&&"object"==typeof e&&e?.next instanceof Function}(e)){let r=e;t=()=>{let e=r.next();if(e.done)throw p;return e.value}}else if(e instanceof Array){let r=e,n=r.length,o=0;t=()=>{if(o<n)return r[o++];throw p}}else if(!(e instanceof Function))throw new l.MingoError("Lazy must be initialized with an array, generator, or function.");this.getNext=function(e,t,r){let n=!1,o=-1,i=0;return function(a){try{e:for(;!n;){let s=e();o++;let u=-1,l=t.length,c=!1;for(;++u<l;){let e=t[u];switch(e.action){case 0:s=e.func(s,o);break;case 1:if(!e.func(s,o))continue e;break;case 2:--e.count,e.count||(c=!0);break;case 3:--e.count,e.count||function(e,t){let r=e.slice(t+1);e.splice(t),Array.prototype.push.apply(e,r)}(t,u);continue e;default:break e}}if(n=c,!a)return{value:s,done:!1};r[i++]=s}}catch(e){if(e!==p)throw e}return{done:n=!0}}}(t,this.iteratees,this.yieldedValues)}push(e,t){return"function"==typeof t?this.iteratees.push({action:e,func:t}):"number"==typeof t&&this.iteratees.push({action:e,count:t}),this}next(){return this.getNext()}map(e){return this.push(0,e)}filter(e){return this.push(1,e)}take(e){return e>0?this.push(2,e):this}drop(e){return e>0?this.push(3,e):this}transform(e){let t;let r=this;return c(()=>(t||(t=c(e(r.value()))),t.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(e){for(;;){let t=this.next();if(t.done)break;if(!1===e(t.value))return!1}return!0}reduce(e,t){let r=this.next();for(void 0!==t||r.done||(t=r.value,r=this.next());!r.done;)t=e(t,r.value),r=this.next();return t}size(){return this.reduce((e,t)=>++e,0)}[Symbol.iterator](){return this}}},31922:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$all:()=>_,$elemMatch:()=>D,$eq:()=>d,$exists:()=>j,$gt:()=>g,$gte:()=>O,$in:()=>m,$lt:()=>b,$lte:()=>v,$mod:()=>w,$ne:()=>h,$nin:()=>y,$regex:()=>x,$size:()=>P,$type:()=>T,createExpressionOperator:()=>p,createQueryOperator:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(39802),c=r(50981);function f(e){let t=(t,r,n)=>{let o={unwrapArray:!0},i=Math.max(1,t.split(".").length-1);return a=>e((0,c.resolve)(a,t,o),r,{...n,depth:i})};return t.op="query",t}function p(e){return(t,r,n)=>e(...(0,u.computeValue)(t,r,null,n))}function d(e,t,r){if((0,c.isEqual)(e,t)||(0,c.isNil)(e)&&(0,c.isNil)(t))return!0;if(e instanceof Array){let n=c.isEqual.bind(null,t);return e.some(n)||(0,c.flatten)(e,r?.depth).some(n)}return!1}function h(e,t,r){return!d(e,t,r)}function m(e,t,r){return(0,c.isNil)(e)?t.some(e=>null===e):(0,c.intersection)([(0,c.ensureArray)(e),t],r?.hashFunction).length>0}function y(e,t,r){return!m(e,t,r)}function b(e,t,r){return C(e,t,(e,t)=>0>(0,c.compare)(e,t))}function v(e,t,r){return C(e,t,(e,t)=>0>=(0,c.compare)(e,t))}function g(e,t,r){return C(e,t,(e,t)=>(0,c.compare)(e,t)>0)}function O(e,t,r){return C(e,t,(e,t)=>(0,c.compare)(e,t)>=0)}function w(e,t,r){return(0,c.ensureArray)(e).some(e=>2===t.length&&e%t[0]===t[1])}function x(e,t,r){let n=(0,c.ensureArray)(e),o=e=>(0,c.isString)(e)&&(0,c.truthy)(t.exec(e),r?.useStrictMode);return n.some(o)||(0,c.flatten)(n,1).some(o)}function j(e,t,r){return(!1===t||0===t)&&void 0===e||(!0===t||1===t)&&void 0!==e}function _(e,t,r){if(!(0,c.isArray)(e)||!(0,c.isArray)(t)||!e.length||!t.length)return!1;let n=!0;for(let o of t){if(!n)break;n=(0,c.isObject)(o)&&(0,c.inArray)(Object.keys(o),"$elemMatch")?D(e,o.$elemMatch,r):o instanceof RegExp?e.some(e=>"string"==typeof e&&o.test(e)):e.some(e=>(0,c.isEqual)(o,e))}return n}function P(e,t,r){return Array.isArray(e)&&e.length===t}function S(e){return(0,c.isOperator)(e)&&-1===["$and","$or","$nor"].indexOf(e)}function D(e,t,r){if((0,c.isArray)(e)&&!(0,c.isEmpty)(e)){let n=e=>e,o=t;Object.keys(t).every(S)&&(o={temp:t},n=e=>({temp:e}));let i=new l.Query(o,r);for(let t=0,r=e.length;t<r;t++)if(i.test(n(e[t])))return!0}return!1}let k=e=>null===e,M=e=>(0,c.isNumber)(e)&&e>=c.MIN_INT&&e<=c.MAX_INT&&-1===e.toString().indexOf("."),N=e=>(0,c.isNumber)(e)&&e>=c.MIN_LONG&&e<=c.MAX_LONG&&-1===e.toString().indexOf("."),E={array:c.isArray,bool:c.isBoolean,boolean:c.isBoolean,date:c.isDate,decimal:c.isNumber,double:c.isNumber,int:M,long:N,number:c.isNumber,null:k,object:c.isObject,regex:c.isRegExp,regexp:c.isRegExp,string:c.isString,undefined:c.isNil,function:e=>{throw new c.MingoError("unsupported type key `function`.")},1:c.isNumber,2:c.isString,3:c.isObject,4:c.isArray,6:c.isNil,8:c.isBoolean,9:c.isDate,10:k,11:c.isRegExp,16:M,18:N,19:c.isNumber};function A(e,t,r){let n=E[t];return!!n&&n(e)}function T(e,t,r){return Array.isArray(t)?t.findIndex(t=>A(e,t,r))>=0:A(e,t,r)}function C(e,t,r){return(0,c.ensureArray)(e).some(e=>(0,c.getType)(e)===(0,c.getType)(t)&&r(e,t))}},42564:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};function a(e,t=!0){let r=e.reduce((e,t)=>e+t,0),n=e.length||1,o=r/n;return Math.sqrt(e.reduce((e,t)=>e+Math.pow(t-o,2),0)/(n-Number(t)))}function s(e,t=!0){if(!e)return null;if(e.length<2)return t?null:0;let r=0,n=0;for(let[t,o]of e)r+=t,n+=o;r/=e.length,n/=e.length;let o=0;for(let[t,i]of e)o+=(t-r)*(i-n);return o/(e.length-Number(t))}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{covariance:()=>s,stddev:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i)},86454:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$accumulator:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{if((0,l.assert)(!!r&&r.scriptEnabled,"$accumulator operator requires 'scriptEnabled' option to be true"),0==e.length)return t.initArgs;let n=u.ComputeOptions.init(r),o=(0,u.computeValue)({},t.initArgs||[],null,n.update(n?.local?.groupId||{})),i=t.init.call(null,...o);for(let r of e){let e=(0,u.computeValue)(r,t.accumulateArgs,null,n.update(r));i=t.accumulate.call(null,i,...e)}return t.finalize?t.finalize.call(null,i):i}},89023:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$addToSet:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(79124);let c=(e,t,r)=>(0,u.unique)((0,l.$push)(e,t,r),r?.hashFunction)},51240:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$avg:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(79124);let c=(e,t,r)=>{let n=(0,l.$push)(e,t,r).filter(u.isNumber);return n.reduce((e,t)=>e+t,0)/(n.length||1)}},85025:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bottom:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(13840);let l=(e,t,r)=>(0,u.$bottomN)(e,{...t,n:1},r)},13840:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bottomN:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(46192),l=r(93561),c=r(79124);let f=(e,t,r)=>{let n=l.ComputeOptions.init(r),{n:o,sortBy:i}=(0,l.computeValue)(n.local.groupId,t,null,n),a=new u.Aggregator([{$sort:i}],n).run(e),s=a.length;return(0,c.$push)(s<=o?a:a.slice(s-o),t.output,n)}},29672:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{$count:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a=(e,t,r)=>e.length},32399:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$covariancePop:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(42564),l=r(79124);let c=(e,t,r)=>(0,u.covariance)((0,l.$push)(e,t,r),!1)},50003:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$covarianceSamp:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(42564),l=r(79124);let c=(e,t,r)=>(0,u.covariance)((0,l.$push)(e,t,r),!0)},80829:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$first:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>e.length>0?(0,u.computeValue)(e[0],t,null,r):void 0},18268:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$firstN:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(79124);let c=(e,t,r)=>{let n=u.ComputeOptions.init(r),o=e.length,i=(0,u.computeValue)(n?.local?.groupId,t.n,null,n);return(0,l.$push)(o<=i?e:e.slice(0,i),t.input,r)}},28371:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(86454),e.exports),u(l,r(89023),e.exports),u(l,r(51240),e.exports),u(l,r(85025),e.exports),u(l,r(13840),e.exports),u(l,r(29672),e.exports),u(l,r(32399),e.exports),u(l,r(50003),e.exports),u(l,r(80829),e.exports),u(l,r(18268),e.exports),u(l,r(79506),e.exports),u(l,r(22528),e.exports),u(l,r(84691),e.exports),u(l,r(33047),e.exports),u(l,r(4800),e.exports),u(l,r(34795),e.exports),u(l,r(76917),e.exports),u(l,r(99067),e.exports),u(l,r(72967),e.exports),u(l,r(79124),e.exports),u(l,r(86904),e.exports),u(l,r(31271),e.exports),u(l,r(96919),e.exports),u(l,r(2125),e.exports),u(l,r(52228),e.exports)},79506:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$last:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>e.length>0?(0,u.computeValue)(e[e.length-1],t,null,r):void 0},22528:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$lastN:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(79124);let c=(e,t,r)=>{let n=u.ComputeOptions.init(r),o=e.length,i=(0,u.computeValue)(n?.local?.groupId,t.n,null,n);return(0,l.$push)(o<=i?e:e.slice(o-i),t.input,r)}},84691:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$max:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(79124);let c=(e,t,r)=>{let n=(0,l.$push)(e,t,r).filter(u.isNotNaN).reduce((e,t)=>(0,u.compare)(t,e)>=0?t:e,-1/0);return n===-1/0?void 0:n}},33047:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$maxN:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(79124);let f=(e,t,r)=>{let n=u.ComputeOptions.init(r),o=e.length,i=(0,u.computeValue)(n?.local?.groupId,t.n,null,n),a=(0,c.$push)(e,t.input,r).filter(e=>!(0,l.isNil)(e));return a.sort((e,t)=>-1*(0,l.compare)(e,t)),o<=i?a:a.slice(0,i)}},4800:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$median:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(72967);let l=(e,t,r)=>(0,u.$percentile)(e,{...t,p:[.5]},r).pop()},34795:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$mergeObjects:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(81917);let l=(e,t,r)=>(0,u.$mergeObjects)({docs:e},"$docs",r)},76917:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$min:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(79124);let c=(e,t,r)=>{let n=(0,l.$push)(e,t,r).filter(u.isNotNaN).reduce((e,t)=>0>=(0,u.compare)(t,e)?t:e,1/0);return n===1/0?void 0:n}},99067:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$minN:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(79124);let f=(e,t,r)=>{let n=u.ComputeOptions.init(r),o=e.length,i=(0,u.computeValue)(n?.local?.groupId,t.n,null,n),a=(0,c.$push)(e,t.input,r).filter(e=>!(0,l.isNil)(e));return a.sort(l.compare),o<=i?a:a.slice(0,i)}},72967:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$percentile:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(79124);let c=(e,t,r)=>{let n=(0,l.$push)(e,t.input,r).filter(u.isNumber).sort(),o=(0,l.$push)(t.p,"$$CURRENT",r).filter(u.isNumber),i=t.method||"approximate";return o.map(e=>{(0,u.assert)(e>0&&e<=1,`percentile value must be between 0 (exclusive) and 1 (inclusive): invalid '${e}'.`);let t=e*(n.length-1)+1,r=Math.floor(t),o=t===r?n[t-1]:n[r-1]+t%1*(n[r]-n[r-1]||0);switch(i){case"exact":return o;case"approximate":{let t=(0,u.findInsertIndex)(n,o);return t/n.length>=e?n[Math.max(t-1,0)]:n[t]}}})}},79124:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$push:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{if((0,l.isNil)(t))return e;let n=u.ComputeOptions.init(r);return e.map(e=>(0,u.computeValue)(e,t,null,n.update(e)))}},86904:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$stdDevPop:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(42564),c=r(79124);let f=(e,t,r)=>(0,l.stddev)((0,c.$push)(e,t,r).filter(u.isNumber),!1)},31271:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$stdDevSamp:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(42564),c=r(79124);let f=(e,t,r)=>(0,l.stddev)((0,c.$push)(e,t,r).filter(u.isNumber),!0)},96919:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$sum:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(79124);let c=(e,t,r)=>(0,u.isArray)(e)?(0,u.isNumber)(t)?e.length*t:(0,l.$push)(e,t,r).filter(u.isNumber).reduce((e,t)=>e+t,0):0},2125:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$top:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(52228);let l=(e,t,r)=>(0,u.$topN)(e,{...t,n:1},r)},52228:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$topN:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(46192),l=r(93561),c=r(79124);let f=(e,t,r)=>{let n=l.ComputeOptions.init(r),{n:o,sortBy:i}=(0,l.computeValue)(n.local.groupId,t,null,n),a=new u.Aggregator([{$sort:i},{$limit:o}],n).run(e);return(0,c.$push)(a,t.output,n)}},15474:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};function a(e,t=0,r=!1){let n=Math.abs(e)===e?1:-1,o=Math.trunc(e=Math.abs(e)),i=parseFloat((e-o).toFixed(t+1));if(0===t){let e=Math.trunc(10*i);r&&((1&o)==1&&e>=5||e>5)&&o++}else if(t>0){let e=Math.pow(10,t),n=Math.trunc(i*e);r&&Math.trunc(i*e*10)%10>5&&(n+=1),o=(o*e+n)/e}else if(t<0){let e=Math.pow(10,-1*t),i=o%e;if(o=Math.max(0,o-i),r&&-1===n){for(;i>10;)i-=i%10;o>0&&i>=5&&(o+=e)}}return o*n}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{truncate:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i)},68307:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$abs:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:Math.abs(n)}},83356:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$add:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=!1,i=n.reduce((e,t)=>((0,l.isDate)(t)&&((0,l.assert)(!o,"'$add' can only have one date value"),o=!0,t=t.getTime()),e+=t),0);return o?new Date(i):i}},1160:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$ceil:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isNumber)(n)||isNaN(n),"$ceil expression must resolve to a number."),Math.ceil(n))}},51347:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$divide:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return n[0]/n[1]}},15298:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$exp:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isNumber)(n)||isNaN(n),"$exp expression must resolve to a number."),Math.exp(n))}},26138:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$floor:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isNumber)(n)||isNaN(n),"$floor expression must resolve to a number."),Math.floor(n))}},89348:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(68307),e.exports),u(l,r(83356),e.exports),u(l,r(1160),e.exports),u(l,r(51347),e.exports),u(l,r(15298),e.exports),u(l,r(26138),e.exports),u(l,r(87334),e.exports),u(l,r(71121),e.exports),u(l,r(3400),e.exports),u(l,r(73868),e.exports),u(l,r(21966),e.exports),u(l,r(11580),e.exports),u(l,r(38992),e.exports),u(l,r(66598),e.exports),u(l,r(26624),e.exports),u(l,r(10803),e.exports)},87334:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$ln:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isNumber)(n)||isNaN(n),"$ln expression must resolve to a number."),Math.log(n))}},71121:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$log:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o="$log expression must resolve to array(2) of numbers";return((0,l.assert)((0,l.isArray)(n)&&2===n.length,o),n.some(l.isNil))?null:((0,l.assert)(n.some(isNaN)||n.every(l.isNumber),o),Math.log10(n[0])/Math.log10(n[1]))}},3400:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$log10:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isNumber)(n)||isNaN(n),"$log10 expression must resolve to a number."),Math.log10(n))}},73868:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$mod:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return n[0]%n[1]}},21966:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$multiply:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>(0,u.computeValue)(e,t,null,r).reduce((e,t)=>e*t,1)},11580:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$pow:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.assert)((0,l.isArray)(n)&&2===n.length&&n.every(l.isNumber),"$pow expression must resolve to array(2) of numbers"),(0,l.assert)(!(0===n[0]&&n[1]<0),"$pow cannot raise 0 to a negative exponent"),Math.pow(n[0],n[1])}},38992:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$round:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(15474);let f=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=n[0],i=n[1];return(0,l.isNil)(o)||isNaN(o)||Math.abs(o)===1/0?o:((0,l.assert)((0,l.isNumber)(o),"$round expression must resolve to a number."),(0,c.truncate)(o,i,!0))}},66598:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$sqrt:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isNumber)(n)&&n>0||isNaN(n),"$sqrt expression must resolve to non-negative number."),Math.sqrt(n))}},26624:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$subtract:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return n[0]-n[1]}},10803:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$trunc:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(15474);let f=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=n[0],i=n[1];return(0,l.isNil)(o)||isNaN(o)||Math.abs(o)===1/0?o:((0,l.assert)((0,l.isNumber)(o),"$trunc expression must resolve to a number."),(0,l.assert)((0,l.isNil)(i)||(0,l.isNumber)(i)&&i>-20&&i<100,"$trunc expression has invalid place"),(0,c.truncate)(o,i,!1))}},40603:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$arrayElemAt:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);if((0,l.assert)(n instanceof Array&&2===n.length,"$arrayElemAt expression must resolve to array(2)"),n.some(l.isNil))return null;let o=n[1],i=n[0];return o<0&&Math.abs(o)<=i.length?i[(o+i.length)%i.length]:o>=0&&o<i.length?i[o]:void 0}},35118:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$arrayToObject:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.assert)((0,l.isArray)(n),"$arrayToObject expression must resolve to an array"),n.reduce((e,t)=>{for(;(0,l.isArray)(t)&&1===t.length;)t=t[0];if(t instanceof Array&&2==t.length)e[t[0]]=t[1];else{let r=t;(0,l.assert)((0,l.isObject)(r)&&(0,l.has)(r,"k")&&(0,l.has)(r,"v"),"$arrayToObject expression is invalid."),e[r.k]=r.v}return e},{})}},47419:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$concatArrays:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return((0,l.assert)((0,l.isArray)(n),"$concatArrays must resolve to an array"),n.some(l.isNil))?null:n.reduce((e,t)=>(0,l.into)(e,t),[])}},18406:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$filter:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t.input,null,r);(0,l.assert)((0,l.isArray)(n),"$filter 'input' expression must resolve to an array");let o=u.ComputeOptions.init(r,e),i=t.as||"this",a={variables:{[i]:null}};return n.filter(n=>{a.variables[i]=n;let s=(0,u.computeValue)(e,t.cond,null,o.update(o.root,a));return(0,l.truthy)(s,r.useStrictMode)})}},23717:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$first:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(28371);let f=(e,t,r)=>{let n=u.ComputeOptions.init(r);if(e instanceof Array)return(0,c.$first)(e,t,n.update());let o=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(o)?null:((0,l.assert)((0,l.isArray)(o),"Must resolve to an array/null or missing"),(0,c.$first)(o,"$$this",r))}},98447:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$firstN:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(18268);let f=(e,t,r)=>{if(e instanceof Array)return(0,c.$firstN)(e,t,r);let{input:n,n:o}=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isArray)(n),"Must resolve to an array/null or missing"),(0,c.$firstN)(n,{n:o,input:"$$this"},r))}},735:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$in:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let[n,o]=(0,u.computeValue)(e,t,null,r);return(0,l.assert)((0,l.isArray)(o),"$in second argument must be an array"),o.some(l.isEqual.bind(null,n))}},35029:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(40603),e.exports),u(l,r(35118),e.exports),u(l,r(47419),e.exports),u(l,r(18406),e.exports),u(l,r(23717),e.exports),u(l,r(98447),e.exports),u(l,r(735),e.exports),u(l,r(18508),e.exports),u(l,r(84037),e.exports),u(l,r(84675),e.exports),u(l,r(83423),e.exports),u(l,r(90830),e.exports),u(l,r(37640),e.exports),u(l,r(70238),e.exports),u(l,r(6087),e.exports),u(l,r(94365),e.exports),u(l,r(99021),e.exports),u(l,r(59487),e.exports),u(l,r(2717),e.exports),u(l,r(51383),e.exports),u(l,r(7630),e.exports),u(l,r(91039),e.exports)},18508:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$indexOfArray:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);if((0,l.isNil)(n))return null;let o=n[0],i=n[1];if((0,l.isNil)(o))return null;(0,l.assert)((0,l.isArray)(o),"$indexOfArray expression must resolve to an array.");let a=n[2]||0,s=n[3];if((0,l.isNil)(s)&&(s=o.length),a>s)return -1;(0,l.assert)(a>=0&&s>=0,"$indexOfArray expression is invalid"),(a>0||s<o.length)&&(o=o.slice(a,s));let c=-1;return o.some((e,t)=>{let r=(0,l.isEqual)(e,i);return r&&(c=t),r}),c+a}},84037:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$isArray:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>(0,u.computeValue)(e,t[0],null,r) instanceof Array},84675:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$last:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(28371);let f=(e,t,r)=>{let n=u.ComputeOptions.init(r);if(e instanceof Array)return(0,c.$last)(e,t,n.update());let o=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(o)?null:((0,l.assert)((0,l.isArray)(o),"Must resolve to an array/null or missing"),(0,c.$last)(o,"$$this",r))}},83423:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$lastN:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(22528);let f=(e,t,r)=>{if(e instanceof Array)return(0,c.$lastN)(e,t,r);let{input:n,n:o}=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isArray)(n),"Must resolve to an array/null or missing"),(0,c.$lastN)(n,{n:o,input:"$$this"},r))}},90830:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$map:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t.input,null,r);(0,l.assert)((0,l.isArray)(n),"$map 'input' expression must resolve to an array");let o=u.ComputeOptions.init(r),i=t.as||"this";return n.map(r=>(0,u.computeValue)(e,t.in,null,o.update(o.root,{variables:{[i]:r}})))}},37640:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$maxN:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(33047);let f=(e,t,r)=>{if(e instanceof Array)return(0,c.$maxN)(e,t,r);let{input:n,n:o}=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isArray)(n),"Must resolve to an array/null or missing"),(0,c.$maxN)(n,{n:o,input:"$$this"},r))}},70238:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$minN:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(99067);let f=(e,t,r)=>{if(e instanceof Array)return(0,c.$minN)(e,t,r);let{input:n,n:o}=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:((0,l.assert)((0,l.isArray)(n),"Must resolve to an array/null or missing"),(0,c.$minN)(n,{n:o,input:"$$this"},r))}},6087:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$nin:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createExpressionOperator)(u.$nin)},94365:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$range:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=n[0],i=n[1],a=n[2]||1,s=[],l=o;for(;l<i&&a>0||l>i&&a<0;)s.push(l),l+=a;return s}},99021:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$reduce:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=u.ComputeOptions.init(r),o=(0,u.computeValue)(e,t.input,null,n),i=(0,u.computeValue)(e,t.initialValue,null,n),a=t.in;return(0,l.isNil)(o)?null:((0,l.assert)((0,l.isArray)(o),"$reduce 'input' expression must resolve to an array"),o.reduce((e,t)=>(0,u.computeValue)(t,a,null,n.update(n.root,{variables:{value:e}})),i))}},59487:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$reverseArray:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);if((0,l.isNil)(n))return null;(0,l.assert)((0,l.isArray)(n),"$reverseArray expression must resolve to an array");let o=n.slice(0);return o.reverse(),o}},2717:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$size:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isArray)(n)?n.length:void 0}},51383:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$slice:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=n[0],i=n[1],a=n[2];return(0,l.isNil)(a)?i<0?(i=Math.max(0,o.length+i),a=o.length-i+1):(a=i,i=0):(i<0&&(i=Math.max(0,o.length+i)),(0,l.assert)(a>0,"Invalid argument for $slice operator. Limit must be a positive number"),a+=i),o.slice(i,a)}},7630:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$sortArray:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(46192),l=r(93561),c=r(50981);let f=(e,t,r)=>{let{input:n,sortBy:o}=(0,l.computeValue)(e,t,null,r);if((0,c.isNil)(n))return null;if((0,c.assert)((0,c.isArray)(n),"$sortArray expression must resolve to an array"),(0,c.isObject)(o))return new u.Aggregator([{$sort:o}]).run(n);let i=[...n];return i.sort(c.compare),-1===o&&i.reverse(),i}},91039:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$zip:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t.inputs,null,r),o=t.useLongestLength||!1;(0,l.assert)((0,l.isArray)(n),"'inputs' expression must resolve to an array"),(0,l.assert)((0,l.isBoolean)(o),"'useLongestLength' must be a boolean"),(0,l.isArray)(t.defaults)&&(0,l.assert)(o,"'useLongestLength' must be set to true to use 'defaults'");let i=0;for(let e=0,t=n.length;e<t;e++){let t=n[e];if((0,l.isNil)(t))return null;(0,l.assert)((0,l.isArray)(t),"'inputs' expression values must resolve to an array or null"),i=o?Math.max(i,t.length):Math.min(i||t.length,t.length)}let a=[],s=t.defaults||[];for(let e=0;e<i;e++){let t=n.map((t,r)=>(0,l.isNil)(t[e])?s[r]||null:t[e]);a.push(t)}return a}},27562:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{bitwise:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t)=>(r,n,o)=>{(0,l.assert)((0,l.isArray)(n),`${e}: expression must be an array.`);let i=(0,u.computeValue)(r,n,null,o);return i.some(l.isNil)?null:((0,l.assert)(i.every(l.isNumber),`${e}: expression must evalue to array of numbers.`),t(i))}},30290:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bitAnd:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(27562).bitwise)("$bitAnd",e=>e.reduce((e,t)=>e&t,-1))},44216:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bitNot:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);if((0,l.isNil)(n))return null;if((0,l.isNumber)(n))return~n;throw new l.MingoError("$bitNot: expression must evaluate to a number.")}},56213:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bitOr:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(27562).bitwise)("$bitOr",e=>e.reduce((e,t)=>e|t,0))},68871:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bitXor:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(27562).bitwise)("$bitXor",e=>e.reduce((e,t)=>e^t,0))},84478:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(30290),e.exports),u(l,r(44216),e.exports),u(l,r(56213),e.exports),u(l,r(68871),e.exports)},72074:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$and:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.truthy)(n,r.useStrictMode)&&n.every(e=>(0,l.truthy)(e,r.useStrictMode))}},57607:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(72074),e.exports),u(l,r(68531),e.exports),u(l,r(62014),e.exports)},68531:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$not:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,l.ensureArray)(t);if(0==n.length)return!1;if(1==n.length)return!(0,u.computeValue)(e,n[0],null,r);throw"Expression $not takes exactly 1 argument"}},62014:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$or:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=r.useStrictMode;return(0,l.truthy)(n,o)&&n.some(e=>(0,l.truthy)(e,o))}},75924:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$cmp:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return n[0]>n[1]?1:n[0]<n[1]?-1:0}},78670:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$eq:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createExpressionOperator)(u.$eq)},43529:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$gt:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createExpressionOperator)(u.$gt)},10288:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$gte:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createExpressionOperator)(u.$gte)},42790:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(75924),e.exports),u(l,r(78670),e.exports),u(l,r(43529),e.exports),u(l,r(10288),e.exports),u(l,r(4629),e.exports),u(l,r(89274),e.exports),u(l,r(32889),e.exports)},4629:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$lt:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createExpressionOperator)(u.$lt)},89274:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$lte:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createExpressionOperator)(u.$lte)},32889:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$ne:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createExpressionOperator)(u.$ne)},74129:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$cond:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n,o,i;let a="$cond: invalid arguments";t instanceof Array?((0,l.assert)(3===t.length,a),n=t[0],o=t[1],i=t[2]):((0,l.assert)((0,l.isObject)(t),a),n=t.if,o=t.then,i=t.else);let s=(0,l.truthy)((0,u.computeValue)(e,n,null,r),r.useStrictMode);return(0,u.computeValue)(e,s?o:i,null,r)}},18506:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$ifNull:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>(0,u.computeValue)(e,t,null,r).find(e=>!(0,l.isNil)(e))},9977:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(74129),e.exports),u(l,r(18506),e.exports),u(l,r(76067),e.exports)},76067:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$switch:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=null;return t.branches.some(t=>{let o=(0,l.truthy)((0,u.computeValue)(e,t.case,null,r),r.useStrictMode);return o&&(n=t.then),o}),(0,u.computeValue)(e,null!==n?n:t.default,null,r)}},65240:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$function:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{(0,l.assert)(r.scriptEnabled,"$function operator requires 'scriptEnabled' option to be true");let n=(0,u.computeValue)(e,t,null,r);return n.body.apply(null,n.args)}},662:(e,t,r)=>{let n,o;var i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,u=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of s(t))u.call(e,o)||o===r||i(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},c={};e.exports=l(i({},"__esModule",{value:!0}),c),n=r(65240),o=e.exports,l(c,n,"default"),o&&l(o,n,"default")},39923:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{DATE_FORMAT:()=>w,DATE_PART_INTERVAL:()=>x,DATE_SYM_TABLE:()=>j,DURATION_IN_MILLIS:()=>O,MILLIS_PER_DAY:()=>g,MINUTES_PER_HOUR:()=>v,adjustDate:()=>S,computeDate:()=>D,formatTimezone:()=>P,getDayOfYear:()=>m,isLeapYear:()=>h,isoWeek:()=>y,isoWeekYear:()=>b,padDigits:()=>k,parseTimezone:()=>_,regexQuote:()=>M,regexStrip:()=>N}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=[0,31,59,90,120,151,181,212,243,273,304,334],f=[0,31,60,91,121,152,182,213,244,274,305,335],p=e=>(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,d=e=>52+Number(4==p(e)||3==p(e-1)),h=e=>(3&e)==0&&(e%100!=0||e%400==0),m=e=>(h(e.getUTCFullYear())?f:c)[e.getUTCMonth()]+e.getUTCDate();function y(e){let t=Math.floor((10+m(e)-(e.getUTCDay()||7))/7);return t<1?d(e.getUTCFullYear()-1):t>d(e.getUTCFullYear())?1:t}function b(e){return e.getUTCFullYear()-Number(0==e.getUTCMonth()&&1==e.getUTCDate()&&1>e.getUTCDay())}let v=60,g=864e5,O={week:6048e5,day:864e5,hour:36e5,minute:6e4,second:1e3,millisecond:1},w="%Y-%m-%dT%H:%M:%S.%LZ",x=[["year",0,9999],["month",1,12],["day",1,31],["hour",0,23],["minute",0,59],["second",0,59],["millisecond",0,999]],j={"%Y":{name:"year",padding:4,re:/([0-9]{4})/},"%G":{name:"year",padding:4,re:/([0-9]{4})/},"%m":{name:"month",padding:2,re:/(0[1-9]|1[012])/},"%d":{name:"day",padding:2,re:/(0[1-9]|[12][0-9]|3[01])/},"%H":{name:"hour",padding:2,re:/([01][0-9]|2[0-3])/},"%M":{name:"minute",padding:2,re:/([0-5][0-9])/},"%S":{name:"second",padding:2,re:/([0-5][0-9]|60)/},"%L":{name:"millisecond",padding:3,re:/([0-9]{3})/},"%u":{name:"weekday",padding:1,re:/([1-7])/},"%U":{name:"week",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%V":{name:"isoWeek",padding:2,re:/([1-4][0-9]?|5[0-3]?)/},"%z":{name:"timezone",padding:2,re:/(([+-][01][0-9]|2[0-3]):?([0-5][0-9])?)/},"%Z":{name:"minuteOffset",padding:3,re:/([+-][0-9]{3})/}};function _(e){if((0,l.isNil)(e))return 0;let t=j["%z"].re.exec(e);if(!t)throw Error(`invalid or location-based timezone '${e}' not supported`);let r=parseInt(t[2])||0;return(Math.abs(r*v)+(parseInt(t[3])||0))*(r<0?-1:1)}function P(e){return(e<0?"-":"+")+k(Math.abs(Math.floor(e/v)),2)+k(Math.abs(e)%v,2)}function S(e,t){e.setUTCMinutes(e.getUTCMinutes()+t)}function D(e,t,r){let n=(0,u.computeValue)(e,t,null,r);if((0,l.isDate)(n))return new Date(n);if((0,l.isNumber)(n))return new Date(1e3*n);if(n.date){let e=new Date((0,l.isDate)(n.date)?n.date:1e3*n.date);return n.timezone&&S(e,_(n.timezone)),e}throw Error(`cannot convert ${t?.toString()} to date`)}function k(e,t){return Array(Math.max(t-String(e).length+1,0)).join("0")+e.toString()}function M(e){return"^.-*?$".split("").forEach(t=>{e=e.replace(t,`\\${t}`)}),e}function N(e){return e.replace(/^\//,"").replace(/\/$/,"")}},14823:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dateAdd:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(39923);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=(0,l.computeDate)(e,t.startDate,r);switch(n.unit){case"year":o.setUTCFullYear(o.getUTCFullYear()+n.amount);break;case"quarter":f(o,3*n.amount);break;case"month":f(o,n.amount);break;default:o.setTime(o.getTime()+l.DURATION_IN_MILLIS[n.unit]*n.amount)}if(n.timezone){let e=(0,l.parseTimezone)(n.timezone);(0,l.adjustDate)(o,e)}return o};function f(e,t){let r=e.getUTCMonth()+t,n=Math.floor(r/12);r<0?e.setUTCFullYear(e.getUTCFullYear()+n,r%12+12,e.getUTCDate()):e.setUTCFullYear(e.getUTCFullYear()+n,r%12,e.getUTCDate())}},37564:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dateDiff:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(39923);let c=(e,t,r)=>{let n;let o=(0,u.computeValue)(e,t,null,r),i=(0,l.computeDate)(e,t.startDate,r),a=(0,l.computeDate)(e,t.endDate,r);switch(o.unit){case"year":case"quarter":case"month":n=function(e,t,r){let n=(t.getUTCFullYear()-e.getUTCFullYear())*12;return n-=e.getUTCMonth(),Math.trunc((n+=t.getUTCMonth())/f[r])}(i,a,o.unit);break;default:n=(a.getTime()-i.getTime())/l.DURATION_IN_MILLIS[o.unit]}return n},f={year:12,quarter:3,month:1}},98795:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dateFromParts:()=>p}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(39923);let c=[31,28,31,30,31,30,31,31,30,31,30,31],f=e=>2==e.month&&(0,l.isLeapYear)(e.year)?29:c[e.month-1],p=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=(0,l.parseTimezone)(n.timezone);for(let e=l.DATE_PART_INTERVAL.length-1,t=0;e>=0;e--){let r=l.DATE_PART_INTERVAL[e],i=r[0],a=r[1],s=r[2],u=(n[i]||0)+t;t=0;let c=s+1;if("hour"==i&&(u+=-1*Math.floor(o/l.MINUTES_PER_HOUR)),"minute"==i&&(u+=-(o%l.MINUTES_PER_HOUR*1)),u<a){let e=a-u;t=-1*Math.ceil(e/c),u=c-e%c}else u>s&&(u+=a,t=Math.trunc(u/c),u%=c);n[i]=u}return n.day=Math.min(n.day,f(n)),new Date(Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond))}},49760:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dateFromString:()=>d}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(39923);let f=(e,t)=>{let r={};return e.split("").forEach((e,n)=>r[e]=t*(n+1)),r},p={...f("ABCDEFGHIKLM",1),...f("NOPQRSTUVWXY",-1),Z:0},d=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);n.format=n.format||c.DATE_FORMAT,n.onNull=n.onNull||null;let o=n.dateString;if((0,l.isNil)(o))return n.onNull;let i=n.format.split(/%[YGmdHMSLuVzZ]/);i.reverse();let a=n.format.match(/(%%|%Y|%G|%m|%d|%H|%M|%S|%L|%u|%V|%z|%Z)/g),s={},f="";for(let e=0,t=a.length;e<t;e++){let t=a[e],r=c.DATE_SYM_TABLE[t];if((0,l.isObject)(r)){let e=r.re.exec(o),t=i.pop()||"";null!==e?(s[r.name]=/^\d+$/.exec(e[0])?parseInt(e[0]):e[0],o=o.substr(0,e.index)+o.substr(e.index+e[0].length),f+=(0,c.regexQuote)(t)+(0,c.regexStrip)(r.re.toString())):s[r.name]=null}}if((0,l.isNil)(s.year)||(0,l.isNil)(s.month)||(0,l.isNil)(s.day)||!RegExp("^"+f+"[A-Z]?$").exec(n.dateString))return n.onError;let d=n.dateString.match(/([A-Z])$/);(0,l.assert)(!(d&&n.timezone),`$dateFromString: you cannot pass in a date/time string with time zone information ('${d&&d[0]}') together with a timezone argument`);let h=d?p[d[0]]*c.MINUTES_PER_HOUR:(0,c.parseTimezone)(n.timezone),m=new Date(Date.UTC(s.year,s.month-1,s.day,0,0,0));return(0,l.isNil)(s.hour)||m.setUTCHours(s.hour),(0,l.isNil)(s.minute)||m.setUTCMinutes(s.minute),(0,l.isNil)(s.second)||m.setUTCSeconds(s.second),(0,l.isNil)(s.millisecond)||m.setUTCMilliseconds(s.millisecond),(0,c.adjustDate)(m,-h),m}},70276:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dateSubtract:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(14823);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t?.amount,null,r);return(0,l.$dateAdd)(e,{...t,amount:-1*n},r)}},46076:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dateToParts:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(39923);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=new Date(n.date),i=(0,l.parseTimezone)(n.timezone);(0,l.adjustDate)(o,i);let a={hour:o.getUTCHours(),minute:o.getUTCMinutes(),second:o.getUTCSeconds(),millisecond:o.getUTCMilliseconds()};return!0==n.iso8601?Object.assign(a,{isoWeekYear:(0,l.isoWeekYear)(o),isoWeek:(0,l.isoWeek)(o),isoDayOfWeek:o.getUTCDay()||7}):Object.assign(a,{year:o.getUTCFullYear(),month:o.getUTCMonth()+1,day:o.getUTCDate()})}},55557:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dateToString:()=>x}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(39923),f=r(7731),p=r(53045),d=r(2649),h=r(59277),m=r(67636),y=r(50022),b=r(12343),v=r(86638),g=r(15011),O=r(43088);let w={"%Y":O.$year,"%G":O.$year,"%m":b.$month,"%d":f.$dayOfMonth,"%H":p.$hour,"%M":y.$minute,"%S":v.$second,"%L":m.$millisecond,"%u":d.$isoDayOfWeek,"%U":g.$week,"%V":h.$isoWeek},x=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);if((0,l.isNil)(n.onNull)&&(n.onNull=null),(0,l.isNil)(n.date))return n.onNull;let o=(0,c.computeDate)(e,n.date,r),i=n.format||c.DATE_FORMAT,a=(0,c.parseTimezone)(n.timezone),s=i.match(/(%%|%Y|%G|%m|%d|%H|%M|%S|%L|%u|%U|%V|%z|%Z)/g);(0,c.adjustDate)(o,a);for(let t=0,n=s.length;t<n;t++){let n;let u=s[t],f=c.DATE_SYM_TABLE[u],p=w[u];(0,l.isObject)(f)&&("timezone"===f.name?n=(0,c.formatTimezone)(a):"minuteOffset"===f.name?n=a.toString():((0,l.assert)(!!p,`unsupported date format specifier '${u}'`),n=(0,c.padDigits)(p(e,o,r),f.padding))),i=i.replace(u,n)}return i}},7731:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dayOfMonth:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.computeDate)(e,t,r).getUTCDate()},89836:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dayOfWeek:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.computeDate)(e,t,r).getUTCDay()+1},87628:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$dayOfYear:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.getDayOfYear)((0,u.computeDate)(e,t,r))},53045:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$hour:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.computeDate)(e,t,r).getUTCHours()},31660:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(14823),e.exports),u(l,r(37564),e.exports),u(l,r(98795),e.exports),u(l,r(49760),e.exports),u(l,r(70276),e.exports),u(l,r(46076),e.exports),u(l,r(55557),e.exports),u(l,r(7731),e.exports),u(l,r(89836),e.exports),u(l,r(87628),e.exports),u(l,r(53045),e.exports),u(l,r(2649),e.exports),u(l,r(59277),e.exports),u(l,r(67788),e.exports),u(l,r(67636),e.exports),u(l,r(50022),e.exports),u(l,r(12343),e.exports),u(l,r(86638),e.exports),u(l,r(15011),e.exports),u(l,r(43088),e.exports)},2649:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$isoDayOfWeek:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.computeDate)(e,t,r).getUTCDay()||7},59277:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$isoWeek:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.isoWeek)((0,u.computeDate)(e,t,r))},67788:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$isoWeekYear:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>{let n=(0,u.computeDate)(e,t,r);return n.getUTCFullYear()-Number(0==n.getUTCMonth()&&1==n.getUTCDate()&&1>n.getUTCDay())}},67636:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$millisecond:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.computeDate)(e,t,r).getUTCMilliseconds()},50022:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$minute:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.computeDate)(e,t,r).getUTCMinutes()},12343:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$month:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.computeDate)(e,t,r).getUTCMonth()+1},86638:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$second:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.computeDate)(e,t,r).getUTCSeconds()},15011:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$week:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>{let n=(0,u.computeDate)(e,t,r),o=(0,u.isoWeek)(n);return n.getUTCDay()>0&&1==n.getUTCDate()&&0==n.getUTCMonth()?0:0==n.getUTCDay()?o+1:o}},43088:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$year:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39923);let l=(e,t,r)=>(0,u.computeDate)(e,t,r).getUTCFullYear()},45035:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(89348),e.exports),u(l,r(35029),e.exports),u(l,r(84478),e.exports),u(l,r(57607),e.exports),u(l,r(42790),e.exports),u(l,r(9977),e.exports),u(l,r(662),e.exports),u(l,r(31660),e.exports),u(l,r(65704),e.exports),u(l,r(35025),e.exports),u(l,r(81541),e.exports),u(l,r(31515),e.exports),u(l,r(48353),e.exports),u(l,r(31721),e.exports),u(l,r(68030),e.exports),u(l,r(11701),e.exports),u(l,r(44931),e.exports),u(l,r(39014),e.exports)},65704:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{$literal:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a=(e,t,r)=>t},35025:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$median:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(4800);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t.input,null,r);return(0,l.$median)(n,{input:"$$CURRENT"},r)}},98387:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$getField:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),[o,i]=(0,l.isObject)(n)?[n.field,n.input||e]:[n,e];return(0,l.isNil)(i)?null:((0,l.assert)((0,l.isObject)(i),"$getField expression 'input' must evaluate to an object"),(0,l.assert)((0,l.isString)(o),"$getField expression 'field' must evaluate to a string"),i[o])}},81541:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(98387),e.exports),u(l,r(83864),e.exports),u(l,r(34551),e.exports)},83864:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{$rand:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a=(e,t,r)=>Math.random()},34551:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$sampleRate:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>Math.random()<=(0,u.computeValue)(e,t,null,r)},31515:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(81917),e.exports),u(l,r(21298),e.exports),u(l,r(60798),e.exports),u(l,r(44160),e.exports)},81917:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$mergeObjects:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return n instanceof Array?n.reduce((e,t)=>(0,l.into)(e,t),{}):{}}},21298:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$objectToArray:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);(0,l.assert)((0,l.isObject)(n),"$objectToArray expression must resolve to an object");let o=Object.entries(n),i=Array(o.length),a=0;for(let[e,t]of o)i[a++]={k:e,v:t};return i}},60798:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$setField:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n.input)?null:((0,l.assert)((0,l.isObject)(n.input),"$setField expression 'input' must evaluate to an object"),(0,l.assert)((0,l.isString)(n.field),"$setField expression 'field' must evaluate to a string"),"$$REMOVE"==t.value?delete e[n.field]:e[n.field]=n.value,e)}},44160:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$unsetField:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(60798);let l=(e,t,r)=>(0,u.$setField)(e,{...t,value:"$$REMOVE"},r)},48353:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$percentile:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(72967);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t.input,null,r);return(0,l.$percentile)(n,{...t,input:"$$CURRENT"},r)}},6232:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$allElementsTrue:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>(0,u.computeValue)(e,t,null,r)[0].every(e=>(0,l.truthy)(e,r.useStrictMode))},70089:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$anyElementTrue:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>(0,u.computeValue)(e,t,null,r)[0].some(e=>(0,l.truthy)(e,r.useStrictMode))},31721:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(6232),e.exports),u(l,r(70089),e.exports),u(l,r(65800),e.exports),u(l,r(55582),e.exports),u(l,r(62524),e.exports),u(l,r(8149),e.exports),u(l,r(84178),e.exports)},65800:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$setDifference:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return n[0].filter(l.notInArray.bind(null,n[1]))}},55582:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$setEquals:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=(0,l.unique)(n[0],r?.hashFunction),i=(0,l.unique)(n[1],r?.hashFunction);return o.length===i.length&&o.length===(0,l.intersection)([o,i],r?.hashFunction).length}},62524:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$setIntersection:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.assert)((0,l.isArray)(n)&&n.every(l.isArray),"$setIntersection: expresssion must resolve to array of arrays"),(0,l.intersection)(n,r?.hashFunction)}},8149:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$setIsSubset:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.intersection)(n,r?.hashFunction).length===n[0].length}},84178:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$setUnion:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.assert)((0,l.isArray)(n)&&2==n.length&&n.every(l.isArray),"$setUnion: arguments must be arrays"),(0,l.unique)(n[0].concat(n[1]),r?.hashFunction)}},7621:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{regexSearch:()=>p,trimString:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=[0,32,9,10,11,12,13,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202];function f(e,t,r,n){let o=(0,u.computeValue)(e,t,null,r),i=o.input;if((0,l.isNil)(i))return null;let a=(0,l.isNil)(o.chars)?c:o.chars.split("").map(e=>e.codePointAt(0)),s=0,f=i.length-1;for(;n.left&&s<=f&&-1!==a.indexOf(i[s].codePointAt(0));)s++;for(;n.right&&s<=f&&-1!==a.indexOf(i[f].codePointAt(0));)f--;return i.substring(s,f+1)}function p(e,t,r,n){let o;let i=(0,u.computeValue)(e,t,null,r);if(!(0,l.isString)(i.input))return[];let a=i.options;a&&((0,l.assert)(-1===a.indexOf("x"),"extended capability option 'x' not supported"),(0,l.assert)(-1===a.indexOf("g"),"global option 'g' not supported"));let s=i.input,c=new RegExp(i.regex,a),f=[],p=0;for(;o=c.exec(s);){let e={match:o[0],idx:o.index+p,captures:[]};for(let t=1;t<o.length;t++)e.captures.push(o[t]||null);if(f.push(e),!n.global)break;p=o.index+o[0].length,s=s.substring(p)}return f}},49930:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$concat:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return[null,void 0].some(l.inArray.bind(null,n))?null:n.join("")}},68030:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(49930),e.exports),u(l,r(16173),e.exports),u(l,r(35580),e.exports),u(l,r(87254),e.exports),u(l,r(77810),e.exports),u(l,r(16722),e.exports),u(l,r(73586),e.exports),u(l,r(49172),e.exports),u(l,r(90163),e.exports),u(l,r(42922),e.exports),u(l,r(81358),e.exports),u(l,r(27401),e.exports),u(l,r(99831),e.exports),u(l,r(35263),e.exports),u(l,r(79266),e.exports),u(l,r(63744),e.exports),u(l,r(15943),e.exports),u(l,r(67375),e.exports),u(l,r(51993),e.exports)},16173:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$indexOfBytes:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o="$indexOfBytes expression resolves to invalid an argument";if((0,l.isNil)(n[0]))return null;(0,l.assert)((0,l.isString)(n[0])&&(0,l.isString)(n[1]),o);let i=n[0],a=n[1],s=n[2],c=n[3],f=(0,l.isNil)(s)||(0,l.isNumber)(s)&&s>=0&&Math.round(s)===s;if(f=f&&((0,l.isNil)(c)||(0,l.isNumber)(c)&&c>=0&&Math.round(c)===c),(0,l.assert)(f,o),(s=s||0)>(c=c||i.length))return -1;let p=i.substring(s,c).indexOf(a);return p>-1?p+s:p}},35580:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$ltrim:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(7621);let l=(e,t,r)=>(0,u.trimString)(e,t,r,{left:!0,right:!1})},87254:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$regexFind:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(7621);let l=(e,t,r)=>{let n=(0,u.regexSearch)(e,t,r,{global:!1});return n&&n.length>0?n[0]:null}},77810:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$regexFindAll:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(7621);let l=(e,t,r)=>(0,u.regexSearch)(e,t,r,{global:!0})},16722:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$regexMatch:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(7621);let l=(e,t,r)=>0!=(0,u.regexSearch)(e,t,r,{global:!1}).length},73586:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$replaceAll:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=[n.input,n.find,n.replacement];return o.some(l.isNil)?null:((0,l.assert)(o.every(l.isString),"$replaceAll expression fields must evaluate to string"),n.input.replace(RegExp(n.find,"g"),n.replacement))}},49172:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$replaceOne:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=[n.input,n.find,n.replacement];return o.some(l.isNil)?null:((0,l.assert)(o.every(l.isString),"$replaceOne expression fields must evaluate to string"),n.input.replace(n.find,n.replacement))}},90163:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$rtrim:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(7621);let l=(e,t,r)=>(0,u.trimString)(e,t,r,{left:!1,right:!0})},42922:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$split:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n[0])?null:((0,l.assert)(n.every(l.isString),"$split expression must result to array(2) of strings"),n[0].split(n[1]))}},27401:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$strLenBytes:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>~-encodeURI((0,u.computeValue)(e,t,null,r)).split(/%..|./).length},99831:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$strLenCP:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>(0,u.computeValue)(e,t,null,r).length},81358:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$strcasecmp:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=n[0],i=n[1];return(0,l.isEqual)(o,i)||n.every(l.isNil)?0:((0,l.assert)(n.every(l.isString),"$strcasecmp must resolve to array(2) of strings"),(o=o.toUpperCase())>(i=i.toUpperCase())&&1||o<i&&-1||0)}},35263:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$substr:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=n[0],i=n[1],a=n[2];if((0,l.isString)(o)){if(i<0);else if(a<0)return o.substr(i);else return o.substr(i,a)}return""}},79266:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$substrBytes:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=[192,224,240],f=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=n[0],i=n[1],a=n[2];(0,l.assert)((0,l.isString)(o)&&(0,l.isNumber)(i)&&i>=0&&(0,l.isNumber)(a)&&a>=0,"$substrBytes: invalid arguments");let s=function(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(function(e){if(e<128)return[e];let t=e<2048&&1||e<65536&&2||3,r=c[t-1],n=[(e>>6*t)+r];for(;t>0;)n.push(128|e>>6*--t&63);return n}(e.codePointAt(r)));return t}(o),f=[],p=0;for(let e=0;e<s.length;e++)f.push(p),p+=s[e].length;let d=f.indexOf(i),h=f.indexOf(i+a);return(0,l.assert)(d>-1&&h>-1,"$substrBytes: invalid range, start or end index is a UTF-8 continuation byte."),o.substring(d,h)}},63744:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$substrCP:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(35263);let l=(e,t,r)=>(0,u.$substr)(e,t,r)},15943:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$toLower:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isEmpty)(n)?"":n.toLowerCase()}},67375:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$toUpper:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isEmpty)(n)?"":n.toUpperCase()}},51993:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$trim:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(7621);let l=(e,t,r)=>(0,u.trimString)(e,t,r,{left:!0,right:!0})},13882:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{createTrignometryOperator:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c={undefined:null,null:null,NaN:NaN,Infinity:Error(),"-Infinity":Error()};function f(e,t=c){let r=Object.assign({},c,t),n=new Set(Object.keys(r));return(t,o,i)=>{let a=(0,u.computeValue)(t,o,null,i);if(n.has(`${a}`)){let t=r[`${a}`];if(t instanceof Error)throw new l.MingoError(`cannot apply $${e.name} to -inf, value must in (-inf,inf)`);return t}return e(a)}}},74961:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$acos:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.acos,{Infinity:1/0,0:Error()})},8125:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$acosh:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.acosh,{Infinity:1/0,0:Error()})},83953:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$asin:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.asin)},47548:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$asinh:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.asinh,{Infinity:1/0,"-Infinity":-1/0})},60043:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$atan:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.atan)},6161:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$atan2:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let[n,o]=(0,u.computeValue)(e,t,null,r);return isNaN(n)||(0,l.isNil)(n)?n:isNaN(o)||(0,l.isNil)(o)?o:Math.atan2(n,o)}},13848:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$atanh:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.atanh,{1:1/0,"-1":-1/0})},63268:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$cos:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.cos)},99626:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$cosh:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.cosh,{"-Infinity":1/0,Infinity:1/0})},96440:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$degreesToRadians:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(13882);let l=Math.PI/180,c=(0,u.createTrignometryOperator)(e=>e*l,{Infinity:1/0,"-Infinity":1/0})},11701:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(74961),e.exports),u(l,r(8125),e.exports),u(l,r(83953),e.exports),u(l,r(47548),e.exports),u(l,r(60043),e.exports),u(l,r(6161),e.exports),u(l,r(13848),e.exports),u(l,r(63268),e.exports),u(l,r(99626),e.exports),u(l,r(96440),e.exports),u(l,r(80398),e.exports),u(l,r(60864),e.exports),u(l,r(32155),e.exports),u(l,r(50829),e.exports)},80398:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$radiansToDegrees:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(13882);let l=180/Math.PI,c=(0,u.createTrignometryOperator)(e=>e*l,{Infinity:1/0,"-Infinity":-1/0})},60864:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$sin:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.sin)},32155:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$sinh:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.sinh,{"-Infinity":-1/0,Infinity:1/0})},50829:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$tan:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(13882).createTrignometryOperator)(Math.tan)},37915:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{TypeConvertError:()=>c,toInteger:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);class c extends Error{constructor(e){super(e)}}function f(e,t,r,n,o,i){let a=(0,u.computeValue)(e,t,null,r);if((0,l.isNil)(a))return null;if(a instanceof Date)return a.getTime();if(!0===a)return 1;if(!1===a)return 0;let s=Number(a);if((0,l.isNumber)(s)&&s>=o&&s<=n&&(!(0,l.isString)(a)||-1===s.toString().indexOf(".")))return Math.trunc(s);throw new c(`cannot convert '${a}' to ${i}`)}},22506:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$convert:()=>b}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(37915),f=r(87239),p=r(3603),d=r(18366),h=r(51630),m=r(40745),y=r(39897);let b=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);if(n.onNull=void 0===n.onNull?null:n.onNull,(0,l.isNil)(n.input))return n.onNull;try{switch(n.to){case 2:case"string":return(0,y.$toString)(e,n.input,r);case 8:case"boolean":case"bool":return(0,f.$toBool)(e,n.input,r);case 9:case"date":return(0,p.$toDate)(e,n.input,r);case 1:case 19:case"double":case"decimal":case"number":return(0,d.$toDouble)(e,n.input,r);case 16:case"int":return(0,h.$toInt)(e,n.input,r);case 18:case"long":return(0,m.$toLong)(e,n.input,r)}}catch(e){}if(void 0!==n.onError)return n.onError;throw new c.TypeConvertError(`could not convert to type ${n.to}.`)}},44931:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(22506),e.exports),u(l,r(18949),e.exports),u(l,r(87239),e.exports),u(l,r(3603),e.exports),u(l,r(67241),e.exports),u(l,r(18366),e.exports),u(l,r(51630),e.exports),u(l,r(40745),e.exports),u(l,r(39897),e.exports),u(l,r(47913),e.exports)},18949:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$isNumber:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNumber)(n)}},87239:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$toBool:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:!!(0,l.isString)(n)||!!n}},3603:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$toDate:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(37915);let f=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);if(n instanceof Date)return n;if((0,l.isNil)(n))return null;let o=new Date(n);if(!isNaN(o.getTime()))return o;throw new c.TypeConvertError(`cannot convert '${n}' to date`)}},67241:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$toDecimal:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=r(18366).$toDouble},18366:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$toDouble:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(37915);let f=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);if((0,l.isNil)(n))return null;if(n instanceof Date)return n.getTime();if(!0===n)return 1;if(!1===n)return 0;let o=Number(n);if((0,l.isNumber)(o))return o;throw new c.TypeConvertError(`cannot convert '${n}' to double/decimal`)}},51630:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$toInt:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(37915);let c=(e,t,r)=>(0,l.toInteger)(e,t,r,u.MAX_INT,u.MIN_INT,"int")},40745:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$toLong:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(37915);let c=(e,t,r)=>(0,l.toInteger)(e,t,r,u.MAX_LONG,u.MIN_LONG,"long")},39897:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$toString:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(55557);let f=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r);return(0,l.isNil)(n)?null:n instanceof Date?(0,c.$dateToString)(e,{date:t,format:"%Y-%m-%dT%H:%M:%S.%LZ"},r):n.toString()}},47913:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$type:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=(0,u.computeValue)(e,t,null,r),o=(0,l.getType)(n).toLowerCase();switch(o){case"boolean":return"bool";case"number":if(n.toString().indexOf(".")>=0)return"double";return n>=l.MIN_INT&&n<=l.MAX_INT?"int":"long";case"regexp":return"regex";default:return o}}},39014:(e,t,r)=>{let n,o;var i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,u=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of s(t))u.call(e,o)||o===r||i(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},c={};e.exports=l(i({},"__esModule",{value:!0}),c),n=r(52115),o=e.exports,l(c,n,"default"),o&&l(o,n,"default")},52115:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$let:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>{let n={};for(let[o,i]of Object.entries(t.vars))n[o]=(0,u.computeValue)(e,i,null,r);return(0,u.computeValue)(e,t.in,null,u.ComputeOptions.init(r,e,{variables:n}))}},98203:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{isUnbounded:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a=e=>{let t=e?.documents||e?.range;return!t||"unbounded"===t[0]&&"unbounded"===t[1]}},75919:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$addFields:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=Object.keys(t);return 0===n.length?e:e.map(e=>{let o={...e};for(let i of n){let n=(0,u.computeValue)(e,t[i],null,r);void 0!==n?(0,l.setValue)(o,i,n):(0,l.removeValue)(o,i)}return o})}},69409:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bucket:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(7767),c=r(50981);let f=(e,t,r)=>{let n;let o=[...t.boundaries],i=t.default,a=o[0],s=o[o.length-1],f=t.output||{count:{$sum:1}};(0,c.assert)(t.boundaries.length>2,"$bucket 'boundaries' expression must have at least 3 elements");let p=(0,c.getType)(a);for(let e=0,t=o.length-1;e<t;e++)(0,c.assert)(p===(0,c.getType)(o[e+1]),"$bucket 'boundaries' must all be of the same type"),(0,c.assert)(0>(0,c.compare)(o[e],o[e+1]),"$bucket 'boundaries' must be sorted in ascending order");(0,c.isNil)(i)||(0,c.getType)(t.default)!==(0,c.getType)(a)||(0,c.assert)((0,c.compare)(t.default,s)>=0||0>(0,c.compare)(t.default,a),"$bucket 'default' expression must be out of boundaries range");let d={};for(let e of o)d[e]=[];return(0,c.isNil)(i)||(d[i]=[]),(0,l.Lazy)(()=>(n||(e.each(e=>{let n=(0,u.computeValue)(e,t.groupBy,null,r);if((0,c.isNil)(n)||0>(0,c.compare)(n,a)||(0,c.compare)(n,s)>=0)(0,c.assert)(!(0,c.isNil)(i),"$bucket require a default for out of range values"),d[i].push(e);else{(0,c.assert)((0,c.compare)(n,a)>=0&&0>(0,c.compare)(n,s),"$bucket 'groupBy' expression must resolve to a value in range of boundaries");let t=(0,c.findInsertIndex)(o,n);d[o[Math.max(0,t-1)]].push(e)}}),o.pop(),(0,c.isNil)(i)||o.push(i),n=(0,l.Lazy)(o).map(e=>{let t=(0,u.computeValue)(d[e],f,null,r);return(0,c.into)(t,{_id:e})})),n.next()))}},41172:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bucketAuto:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{let n=t.output||{count:{$sum:1}},o=t.groupBy,i=t.buckets;return(0,l.assert)(i>0,`The $bucketAuto 'buckets' field must be greater than 0, but found: ${i}`),e.transform(e=>{let t=Math.max(1,Math.round(e.length/i)),a=(0,l.memoize)(u.computeValue,r?.hashFunction),s=new Map,c=[],f=(0,l.sortBy)(e,e=>{let t=a(e,o,null,r);return(0,l.isNil)(t)?c.push(e):(s.has(t)||s.set(t,[]),s.get(t).push(e)),t}),p=[],d=0;for(let e=0,h=f.length;e<i&&d<h;e++){let m={},y=[];for(let e=0;e<t&&d<h;e++){let e=a(f[d],o,null,r);(0,l.isNil)(e)&&(e=null),(0,l.into)(y,(0,l.isNil)(e)?c:s.get(e)),d+=(0,l.isNil)(e)?c.length:s.get(e).length,(0,l.has)(m,"min")||(m.min=e),p.length>0&&(p[p.length-1]._id.max=m.min)}e==i-1&&(0,l.into)(y,f.slice(d));let b=(0,u.computeValue)(y,n,null,r);p.push((0,l.into)(b,{_id:m}))}return p.length>0&&(p[p.length-1]._id.max=a(f[f.length-1],o,null,r)),p})}},49776:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$count:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(7767),l=r(50981);let c=(e,t,r)=>((0,l.assert)((0,l.isString)(t)&&""!==t.trim()&&-1===t.indexOf(".")&&"$"!==t.trim()[0],"Invalid expression value for $count"),(0,u.Lazy)([{[t]:e.size()}]))},22682:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$facet:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(46192),l=r(93561);let c=(e,t,r)=>e.transform(e=>{let n={};for(let[o,i]of Object.entries(t))n[o]=new u.Aggregator(i,{...r,processingMode:l.ProcessingMode.CLONE_INPUT}).run(e);return[n]})},4491:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$fill:()=>y}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981),c=r(18506),f=r(2007),p=r(77638),d=r(75919),h=r(64694);let m={locf:"$locf",linear:"$linearFill"},y=(e,t,r)=>{(0,l.assert)(!t.sortBy||(0,l.isObject)(t.sortBy),"sortBy must be an object."),(0,l.assert)(!!t.sortBy||Object.values(t.output).every(e=>(0,l.has)(e,"value")),"sortBy required if any output field specifies a 'method'."),(0,l.assert)(!(t.partitionBy&&t.partitionByFields),"specify either partitionBy or partitionByFields."),(0,l.assert)(!t.partitionByFields||t?.partitionByFields?.every(e=>"$"!==e[0]),"fields in partitionByFields cannot begin with '$'."),(r=(0,u.initOptions)(r)).context.addExpressionOps({$ifNull:c.$ifNull}),r.context.addWindowOps({$locf:p.$locf,$linearFill:f.$linearFill});let n=t.partitionBy||t?.partitionByFields?.map(e=>`$${e}`),o={},i={};for(let[e,r]of Object.entries(t.output))if((0,l.has)(r,"value"))o[e]={$ifNull:[`$$CURRENT.${e}`,r.value]};else{let t=m[r.method];(0,l.assert)(!!t,`invalid fill method '${r.method}'.`),i[e]={[t]:"$"+e}}return Object.keys(i).length>0&&(e=(0,h.$setWindowFields)(e,{sortBy:t.sortBy||{},partitionBy:n,output:i},r)),Object.keys(o).length>0&&(e=(0,d.$addFields)(e,o,r)),e}},90195:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$group:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{(0,l.assert)((0,l.has)(t,"_id"),"a group specification must include an _id");let n=t._id,o=u.ComputeOptions.init(r);return e.transform(e=>{let i=(0,l.groupBy)(e,e=>(0,u.computeValue)(e,n,null,r),r.hashFunction);t={...t},delete t._id;let a=-1,s=Array.from(i.keys()),c=i.size;return()=>{if(++a===c)return{done:!0};let e=s[a],r={};for(let[n,a]of(void 0!==e&&(r._id=e),Object.entries(t)))r[n]=(0,u.computeValue)(i.get(e),a,n,o.update(null,{groupId:e}));return{value:r,done:!1}}})}},15114:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(75919),e.exports),u(l,r(69409),e.exports),u(l,r(41172),e.exports),u(l,r(49776),e.exports),u(l,r(22682),e.exports),u(l,r(4491),e.exports),u(l,r(90195),e.exports),u(l,r(29768),e.exports),u(l,r(15110),e.exports),u(l,r(55753),e.exports),u(l,r(9755),e.exports),u(l,r(63235),e.exports),u(l,r(73576),e.exports),u(l,r(77795),e.exports),u(l,r(76939),e.exports),u(l,r(77154),e.exports),u(l,r(68387),e.exports),u(l,r(56162),e.exports),u(l,r(64694),e.exports),u(l,r(38108),e.exports),u(l,r(19058),e.exports),u(l,r(19230),e.exports),u(l,r(55084),e.exports),u(l,r(45859),e.exports),u(l,r(23755),e.exports)},29768:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{$limit:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a=(e,t,r)=>e.take(t)},15110:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$lookup:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981);let l=(e,t,r)=>{let n=(0,u.isString)(t.from)?r?.collectionResolver(t.from):t.from;(0,u.assert)(n instanceof Array,"'from' field must resolve to an array");let o={};for(let e of n){let n=(0,u.hashCode)((0,u.resolve)(e,t.foreignField),r?.hashFunction);o[n]=o[n]||[],o[n].push(e)}return e.map(e=>{let n=(0,u.hashCode)((0,u.resolve)(e,t.localField),r?.hashFunction),i=(0,u.into)({},e);return i[t.as]=o[n]||[],i})}},55753:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$match:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39802);let l=(e,t,r)=>{let n=new u.Query(t,r);return e.filter(e=>n.test(e))}},9755:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$merge:()=>p}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(46192),l=r(93561),c=r(50981),f=r(45035);let p=(e,t,r)=>{let n=(0,c.isString)(t.into)?r?.collectionResolver(t.into):t.into;(0,c.assert)(n instanceof Array,"$merge: option 'into' must resolve to an array");let o=t.on||r.idKey,i=e=>{let t=(0,c.isString)(o)?(0,c.resolve)(e,o):o.map(t=>(0,c.resolve)(e,t));return(0,c.hashCode)(t,r.hashFunction)},a={};for(let e=0;e<n.length;e++){let t=n[e],r=i(t);(0,c.assert)(!a[r],"$merge: 'into' collection must have unique entries for the 'on' field."),a[r]=[t,e]}let s=l.ComputeOptions.init(r);return e.map(e=>{let o=i(e);if(a[o]){let[i,p]=a[o],d=(0,l.computeValue)(i,t.let||{new:"$$ROOT"},null,s.update(e));if((0,c.isArray)(t.whenMatched)){let e=new u.Aggregator(t.whenMatched,{...r,variables:d});n[p]=e.run([i])[0]}else switch(t.whenMatched){case"replace":n[p]=e;break;case"fail":throw new c.MingoError("$merge: failed due to matching as specified by 'whenMatched' option.");case"keepExisting":break;default:n[p]=(0,f.$mergeObjects)(i,[i,e],s.update(e,{variables:d}))}}else switch(t.whenNotMatched){case"discard":break;case"fail":throw new c.MingoError("$merge: failed due to matching as specified by 'whenMatched' option.");default:n.push(e)}return e})}},63235:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$out:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981);let l=(e,t,r)=>{let n=(0,u.isString)(t)?r?.collectionResolver(t):t;return(0,u.assert)(n instanceof Array,"expression must resolve to an array"),e.map(e=>(n.push((0,u.cloneDeep)(e)),e))}},73576:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$project:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>{if((0,l.isEmpty)(t))return e;let n=Object.keys(t),o=!1;f(t,r);let i=r.idKey;if((0,l.inArray)(n,i)){let e=t[i];(0===e||!1===e)&&(o=0==(n=n.filter(l.notInArray.bind(null,[i]))).length)}else n.push(i);let a=u.ComputeOptions.init(r);return e.map(e=>(function e(t,r,n,o,i){let a={},s=!1,c=!1,p=[];for(let d of(i&&p.push(n.idKey),o)){let o;let i=r[d];if(d!==n.idKey&&(0,l.inArray)([0,!1],i)&&(c=!0),d===n.idKey&&(0,l.isEmpty)(i))o=t[d];else if((0,l.isString)(i))o=(0,u.computeValue)(t,i,d,n);else if((0,l.inArray)([1,!0],i));else if(i instanceof Array)o=i.map(e=>{let r=(0,u.computeValue)(t,e,null,n);return(0,l.isNil)(r)?null:r});else if((0,l.isObject)(i)){let r=Object.keys(i),a=1==r.length?r[0]:"",c=(0,u.getOperator)(u.OperatorType.PROJECTION,a,n);if(c)"$slice"===a?(0,l.ensureArray)(i[a]).every(l.isNumber)?(o=c(t,i[a],d,n),s=!0):o=(0,u.computeValue)(t,i,d,n):o=c(t,i[a],d,n);else if((0,l.isOperator)(a))o=(0,u.computeValue)(t,i[a],a,n);else if((0,l.has)(t,d)){f(i,n);let a=t[d];o=a instanceof Array?a.map(t=>e(t,i,n,r,!1)):e(a=(0,l.isObject)(a)?a:t,i,n,r,!1)}else o=(0,u.computeValue)(t,i,null,n)}else{p.push(d);continue}let h=(0,l.resolveGraph)(t,d,{preserveMissing:!0});void 0!==h&&(0,l.merge)(a,h,{flatten:!0}),(0,l.notInArray)([0,1,!1,!0],i)&&(void 0===o?(0,l.removeValue)(a,d,{descendArray:!0}):(0,l.setValue)(a,d,o))}if((0,l.filterMissing)(a),(s||c||i)&&(a=(0,l.into)({},t,a),p.length>0))for(let e of p)(0,l.removeValue)(a,e,{descendArray:!0});return a})(e,t,a.update(e),n,o))};function f(e,t){let r=[!1,!1];for(let[n,o]of Object.entries(e)){if(n===t?.idKey)return;0===o||!1===o?r[0]=!0:(1===o||!0===o)&&(r[1]=!0),(0,l.assert)(!(r[0]&&r[1]),"Projection cannot have a mix of inclusion and exclusion.")}}},77795:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$redact:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);let l=(e,t,r)=>{let n=u.ComputeOptions.init(r);return e.map(e=>(0,u.redact)(e,t,n.update(e)))}},76939:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$replaceRoot:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(50981);let c=(e,t,r)=>e.map(e=>(e=(0,u.computeValue)(e,t.newRoot,null,r),(0,l.assert)((0,l.isObject)(e),"$replaceRoot expression must return an object"),e))},77154:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$replaceWith:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=r(76939).$replaceRoot},68387:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{$sample:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a=(e,t,r)=>e.transform(e=>{let r=e.length,n=-1;return()=>++n===t.size?{done:!0}:{value:e[Math.floor(Math.random()*r)],done:!1}})},56162:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$set:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=r(75919).$addFields},64694:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$setWindowFields:()=>g}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(7767),c=r(50981),f=r(65240),p=r(14823),d=r(98203),h=r(75919),m=r(90195),y=r(19058);let b=new Set(["$denseRank","$documentNumber","$first","$last","$linearFill","$rank","$shift"]),v=new Set(["$denseRank","$expMovingAvg","$linearFill","$locf","$rank","$shift"]),g=(e,t,r)=>{for(let e of((r=(0,u.initOptions)(r)).context.addExpressionOps({$function:f.$function}),Object.values(t.output))){let t=Object.keys(e),n=t.find(c.isOperator);if((0,c.assert)(!!(0,u.getOperator)(u.OperatorType.WINDOW,n,r)||!!(0,u.getOperator)(u.OperatorType.ACCUMULATOR,n,r),`'${n}' is not a valid window operator`),(0,c.assert)(t.length>0&&t.length<=2&&(1==t.length||t.includes("window")),"'output' option should have a single window operator."),e?.window){let{documents:t,range:r}=e.window;(0,c.assert)(!!t&&!r||!t&&!!r||!t&&!r,"'window' option supports only one of 'documents' or 'range'.")}}return t.sortBy&&(e=(0,y.$sort)(e,t.sortBy,r)),(e=(0,m.$group)(e,{_id:t.partitionBy,items:{$push:"$$CURRENT"}},r)).transform(e=>{let n=[],o=[];for(let[e,n]of Object.entries(t.output)){let i=Object.keys(n).find(c.isOperator),a={operatorName:i,func:{left:(0,u.getOperator)(u.OperatorType.ACCUMULATOR,i,r),right:(0,u.getOperator)(u.OperatorType.WINDOW,i,r)},args:n[i],field:e,window:n.window};(0,c.assert)(!!t.sortBy||!(b.has(i)||!a.window),`${b.has(i)?`'${i}'`:"bounded window operation"} requires a sortBy.`),(0,c.assert)(!a.window||!v.has(i),`${i} does not accept a 'window' field.`),o.push(a)}return e.forEach(e=>{let i=e.items,a=(0,l.Lazy)(i),s={};for(let e of o){let{func:n,args:o,field:u,window:l}=e,f=e=>{let i=-1;return a=>(++i,n.left)?n.left(e(a,i),o,r):n.right?n.right(a,e(a,i),{parentExpr:t,inputExpr:o,documentNumber:i+1,field:u},r):void 0};if(l){let{documents:e,range:n,unit:o}=l,a=e||n;if(!(0,d.isUnbounded)(l)){let[n,l]=a,d=e=>"current"==n?e:"unbounded"==n?0:Math.max(n+e,0),h=e=>"current"==l?e+1:"unbounded"==l?i.length:l+e+1,m=(s,u)=>{let f,m;if(e||a.every(c.isString))return i.slice(d(u),h(u));let y=Object.keys(t.sortBy)[0];if(o){let e=e=>(0,p.$dateAdd)(s,{startDate:new Date(s[y]),unit:o,amount:e},r).getTime();f=(0,c.isNumber)(n)?e(n):-1/0,m=(0,c.isNumber)(l)?e(l):1/0}else{let e=s[y];f=(0,c.isNumber)(n)?e+n:-1/0,m=(0,c.isNumber)(l)?e+l:1/0}let b=i;return"current"==n&&(b=i.slice(u)),"current"==l&&(b=i.slice(0,u+1)),b.filter(e=>{let t=+e[y];return t>=f&&t<=m})};s[u]=f(m)}}s[u]||(s[u]=f(e=>i)),a=(0,h.$addFields)(a,{[u]:{$function:{body:e=>s[u](e),args:["$$CURRENT"]}}},r)}n.push(a)}),(0,l.compose)(...n)})}},38108:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{$skip:()=>a}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);let a=(e,t,r)=>e.drop(t)},19058:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$sort:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981);let l=(e,t,r)=>{if((0,u.isEmpty)(t)||!(0,u.isObject)(t))return e;let n=u.compare,o=r.collation;return(0,u.isObject)(o)&&(0,u.isString)(o.locale)&&(n=function(e){let t={sensitivity:c[e.strength||3],caseFirst:"off"===e.caseFirst?"false":e.caseFirst||"false",numeric:e.numericOrdering||!1,ignorePunctuation:"shifted"===e.alternate};!0===(e.caseLevel||!1)&&("base"===t.sensitivity&&(t.sensitivity="case"),"accent"===t.sensitivity&&(t.sensitivity="variant"));let r=new Intl.Collator(e.locale,t);return(e,t)=>{if(!(0,u.isString)(e)||!(0,u.isString)(t))return(0,u.compare)(e,t);let n=r.compare(e,t);return n<0?-1:n>0?1:0}}(o)),e.transform(e=>{for(let o of Object.keys(t).reverse()){let i=(0,u.groupBy)(e,e=>(0,u.resolve)(e,o),r.hashFunction),a=Array.from(i.keys()).sort(n);-1===t[o]&&a.reverse(),e=[],a.reduce((e,t)=>(0,u.into)(e,i.get(t)),e)}return e})},c={1:"base",2:"accent",3:"variant"}},19230:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$sortByCount:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(90195),l=r(19058);let c=(e,t,r)=>{let n={count:{$sum:1}};return n._id=t,(0,l.$sort)((0,u.$group)(e,n,r),{count:-1},r)}},55084:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$unionWith:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(46192),l=r(7767),c=r(50981);let f=(e,t,r)=>{let n=(0,c.isString)(t.coll)?r.collectionResolver(t.coll):t.coll,o=[e];return o.push(t.pipeline?new u.Aggregator(t.pipeline,r).stream(n):(0,l.Lazy)(n)),(0,l.compose)(...o)}},45859:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$unset:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(73576);let c=(e,t,r)=>{t=(0,u.ensureArray)(t);let n={};for(let e of t)n[e]=0;return(0,l.$project)(e,n,r)}},23755:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$unwind:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(7767),l=r(50981);let c=(e,t,r)=>{let n;(0,l.isString)(t)&&(t={path:t});let o=t.path.substring(1),i=t?.includeArrayIndex||!1,a=t.preserveNullAndEmptyArrays||!1,s=(e,t)=>(!1!==i&&(e[i]=t),e);return(0,u.Lazy)(()=>{for(;;){if(n instanceof u.Iterator){let e=n.next();if(!e.done)return e}let t=e.next();if(t.done)return t;let r=t.value;if((n=(0,l.resolve)(r,o))instanceof Array){if(0===n.length&&!0===a)return n=null,(0,l.removeValue)(r,o),{value:s(r,null),done:!1};n=(0,u.Lazy)(n).map((e,t)=>{let n=(0,l.resolveGraph)(r,o,{preserveKeys:!0});return(0,l.setValue)(n,o,e),s(n,t)})}else if(!(0,l.isEmpty)(n)||!0===a)return{value:s(r,null),done:!1}}})}},9276:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$all:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$all)},85465:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$elemMatch:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$elemMatch)},28407:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(9276),e.exports),u(l,r(85465),e.exports),u(l,r(97318),e.exports)},97318:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$size:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$size)},31538:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{createBitwiseOperator:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=e=>(0,u.createQueryOperator)((t,r,n)=>{let o=0;if(r instanceof Array)for(let e of r)o|=1<<e;else o=r;return e(t&o,o)})},83734:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bitsAllClear:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(31538).createBitwiseOperator)((e,t)=>0==e)},97663:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bitsAllSet:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(31538).createBitwiseOperator)((e,t)=>e==t)},22519:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bitsAnyClear:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(31538).createBitwiseOperator)((e,t)=>e<t)},37839:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bitsAnySet:()=>u}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);let u=(0,r(31538).createBitwiseOperator)((e,t)=>e>0)},45494:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bitsAllClear:()=>u.$bitsAllClear,$bitsAllSet:()=>l.$bitsAllSet,$bitsAnyClear:()=>c.$bitsAnyClear,$bitsAnySet:()=>f.$bitsAnySet}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(83734),l=r(97663),c=r(22519),f=r(37839)},12263:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$eq:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$eq)},5474:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$gt:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$gt)},99647:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$gte:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$gte)},29996:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$in:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$in)},17666:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$eq:()=>u.$eq,$gt:()=>l.$gt,$gte:()=>c.$gte,$in:()=>f.$in,$lt:()=>p.$lt,$lte:()=>d.$lte,$ne:()=>h.$ne,$nin:()=>m.$nin}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(12263),l=r(5474),c=r(99647),f=r(29996),p=r(41670),d=r(49273),h=r(33574),m=r(77773)},41670:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$lt:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$lt)},49273:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$lte:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$lte)},33574:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$ne:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$ne)},77773:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$nin:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$nin)},66047:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$exists:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$exists)},33605:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(66047),e.exports),u(l,r(9563),e.exports)},9563:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$type:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$type)},28231:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$expr:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561);function l(e,t,r){return e=>(0,u.computeValue)(e,t,null,r)}},2139:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(28231),e.exports),u(l,r(99505),e.exports),u(l,r(68588),e.exports),u(l,r(90103),e.exports),u(l,r(74052),e.exports)},99505:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$jsonSchema:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981);function l(e,t,r){if(!r?.jsonSchemaValidator)throw new u.MingoError("Missing option 'jsonSchemaValidator'. Configure to use '$jsonSchema' operator.");let n=r?.jsonSchemaValidator(t);return e=>n(e)}},68588:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$mod:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$mod)},90103:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$regex:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(31922);let l=(0,u.createQueryOperator)(u.$regex)},74052:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$where:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981);function l(e,t,r){return(0,u.assert)(r.scriptEnabled,"$where operator requires 'scriptEnabled' option to be true"),(0,u.assert)((0,u.isFunction)(t),"$where only accepts a Function object"),e=>(0,u.truthy)(t.call(e),r?.useStrictMode)}},72886:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(28407),e.exports),u(l,r(45494),e.exports),u(l,r(17666),e.exports),u(l,r(33605),e.exports),u(l,r(2139),e.exports),u(l,r(33244),e.exports)},10745:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$and:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39802),l=r(50981);let c=(e,t,r)=>{(0,l.assert)((0,l.isArray)(t),"Invalid expression: $and expects value to be an Array.");let n=t.map(e=>new u.Query(e,r));return e=>n.every(t=>t.test(e))}},33244:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(10745),e.exports),u(l,r(89959),e.exports),u(l,r(71402),e.exports),u(l,r(32475),e.exports)},89959:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$nor:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(32475);let c=(e,t,r)=>{(0,u.assert)((0,u.isArray)(t),"Invalid expression. $nor expects value to be an array.");let n=(0,l.$or)("$or",t,r);return e=>!n(e)}},71402:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$not:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39802),l=r(50981);let c=(e,t,r)=>{let n={};n[e]=(0,l.normalize)(t);let o=new u.Query(n,r);return e=>!o.test(e)}},32475:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$or:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39802),l=r(50981);let c=(e,t,r)=>{(0,l.assert)((0,l.isArray)(t),"Invalid expression. $or expects value to be an Array");let n=t.map(e=>new u.Query(e,r));return e=>n.some(t=>t.test(e))}},85873:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{applyUpdate:()=>d,clone:()=>c,tokenizePath:()=>p,walkExpression:()=>h}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39802),l=r(50981);let c=(e,t)=>{switch(e){case"deep":return(0,l.cloneDeep)(t);case"copy":if((0,l.isDate)(t))return new Date(t);if((0,l.isArray)(t))return[...t];if((0,l.isObject)(t))return{...t};return t;default:return t}},f=/^[a-z]+[a-zA-Z0-9]*$/;function p(e){if(!e.includes(".$"))return[{parent:e,selector:e},[]];let t=e.indexOf(".$"),r=e.indexOf("]"),n=e.substring(0,t),o=e.substring(t+3,r);(0,l.assert)(""===o||f.test(o),"The filter <identifier> must begin with a lowercase letter and contain only alphanumeric characters.");let i=e.substring(r+2),[a,s]=i?p(i):[];return[{selector:e,parent:n,child:o||"$",next:a},[o,...s||[]].filter(Boolean)]}let d=(e,t,r,n,o)=>{let{parent:i,child:a,next:s}=t;if(!a){let t=!1;return(0,l.walk)(e,i,(e,r)=>t=!!n(e,r)||t,o),t}let u=(0,l.resolve)(e,i);return!!(0,l.isArray)(u)&&u.map((e,t)=>(!r[a]||!!r[a].test({[a]:e}))&&(s?d(e,s,r,n,o):n(u,t))).some(Boolean)};function h(e,t,r,n){let o=[];for(let[i,a]of Object.entries(e)){let[e,s]=p(i);if(s.length){let i={};t.forEach(e=>{Object.keys(e).forEach(t=>{s.forEach(r=>{(t===r||t.startsWith(r+"."))&&(i[r]=i[r]||{},Object.assign(i[r],{[t]:e[t]}))})})});let l={};for(let[e,t]of Object.entries(i))l[e]=new u.Query(t,r.queryOptions);n(a,e,l)&&o.push(e.parent)}else n(a,e,{})&&o.push(e.parent)}return o}},78872:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$addToSet:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873);let c=(e,t,r=[],n={})=>(0,l.walkExpression)(t,r,n,(t,r,o)=>{let i={$each:[t]};return(0,u.isObject)(t)&&(0,u.has)(t,"$each")&&Object.assign(i,t),(0,l.applyUpdate)(e,r,o,(e,t)=>{let r=e[t]||=[];return(0,u.intersection)([r,i.$each]).length!==i.$each.length&&(e[t]=(0,l.clone)(n.cloneMode,(0,u.unique)(r.concat(i.$each))),!0)},{buildGraph:!0})})},94560:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$bit:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873);let c=new Set(["and","or","xor"]),f=(e,t,r=[],n={})=>(0,l.walkExpression)(t,r,n,(t,r,n)=>{let o=Object.keys(t);return(0,u.assert)(1===o.length&&c.has(o[0]),`Invalid bit operator '${o[0]}'. Must be one of 'and', 'or', or 'xor'.`),(0,l.applyUpdate)(e,r,n,(e,r)=>{let n=e[r],i=t[o[0]];if(void 0!==n&&!((0,u.isNumber)(n)&&(0,u.isNumber)(i)))return!1;switch(n=n||0,o[0]){case"and":e[r]=n&i;break;case"or":e[r]=n|i;break;case"xor":e[r]=n^i}return e[r]!==n},{buildGraph:!0})})},16197:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$currentDate:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(85873);let l=(e,t,r=[],n={})=>{let o=Date.now();return(0,u.walkExpression)(t,r,n,(t,r,n)=>(0,u.applyUpdate)(e,r,n,(e,t)=>(e[t]=o,!0),{buildGraph:!0}))}},58:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$inc:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873);let c=(e,t,r=[],n={})=>(0,l.walkExpression)(t,r,n,(t,r,n)=>{if(!r.child){let t=(0,u.resolve)(e,r.parent);(0,u.assert)(void 0===t||(0,u.isNumber)(t),"cannot apply $inc to a value of non-numeric type")}return(0,l.applyUpdate)(e,r,n,(e,r)=>(e[r]=(e[r]||=0)+t,!0),{buildGraph:!0})})},5531:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e},u=(e,t,r)=>(s(e,t,"default"),r&&s(r,t,"default")),l={};e.exports=s(n({},"__esModule",{value:!0}),l),u(l,r(78872),e.exports),u(l,r(94560),e.exports),u(l,r(16197),e.exports),u(l,r(58),e.exports),u(l,r(351),e.exports),u(l,r(75716),e.exports),u(l,r(93176),e.exports),u(l,r(77759),e.exports),u(l,r(27467),e.exports),u(l,r(44628),e.exports),u(l,r(60478),e.exports),u(l,r(28531),e.exports),u(l,r(55377),e.exports),u(l,r(25149),e.exports)},351:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$max:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873);let c=(e,t,r=[],n={})=>(0,l.walkExpression)(t,r,n,(t,r,n)=>(0,l.applyUpdate)(e,r,n,(e,r)=>!(void 0!==e[r]&&(0,u.compare)(e[r],t)>-1)&&(e[r]=t,!0),{buildGraph:!0}))},75716:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$min:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873);let c=(e,t,r=[],n={})=>(0,l.walkExpression)(t,r,n,(t,r,n)=>(0,l.applyUpdate)(e,r,n,(e,r)=>!(void 0!==e[r]&&1>(0,u.compare)(e[r],t))&&(e[r]=t,!0),{buildGraph:!0}))},93176:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$mul:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(85873);let l=(e,t,r=[],n={})=>(0,u.walkExpression)(t,r,n,(t,r,n)=>(0,u.applyUpdate)(e,r,n,(e,r)=>{let n=e[r];return e[r]=void 0===e[r]?0:e[r]*t,e[r]!==n},{buildGraph:!0}))},77759:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$pop:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873);let c=(e,t,r=[],n={})=>(0,l.walkExpression)(t,r,n,(t,r,n)=>(0,l.applyUpdate)(e,r,n,(e,n)=>{let o=e[n];return(0,u.assert)((0,u.isArray)(o),`path '${r.selector}' contains an element of non-array type.`),!!o.length&&(-1===t?o.splice(0,1):o.pop(),!0)}))},27467:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$pull:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(39802),l=r(50981),c=r(85873);let f=(e,t,r=[],n={})=>(0,c.walkExpression)(t,r,n,(t,r,o)=>{let i=!(0,l.isObject)(t)||Object.keys(t).some(l.isOperator),a=new u.Query(i?{k:t}:t,n.queryOptions),s=i?e=>a.test({k:e}):e=>a.test(e);return(0,c.applyUpdate)(e,r,o,(e,t)=>{let r=e[t],n=[];return!!r.map(e=>{let t=s(e);return t||n.push(e),t}).some(Boolean)&&(e[t]=n,!0)})})},44628:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$pullAll:()=>l}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(27467);let l=(e,t,r=[],n={})=>{let o={};return Object.entries(t).forEach(([e,t])=>{o[e]={$in:t}}),(0,u.$pull)(e,o,r,n)}},60478:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$push:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873);let c=Object.freeze(["$each","$slice","$sort","$position"]),f=(e,t,r=[],n={})=>(0,l.walkExpression)(t,r,n,(t,r,o)=>{let i={$each:[t]};return(0,u.isObject)(t)&&c.some(e=>(0,u.has)(t,e))&&Object.assign(i,t),(0,l.applyUpdate)(e,r,o,(e,t)=>{let r=e[t]||=[],o=r.slice(0,i.$slice||r.length),a=r.length,s=(0,u.isNumber)(i.$position)?i.$position:r.length;if(r.splice(s,0,...(0,l.clone)(n.cloneMode,i.$each)),i.$sort){let e=(0,u.isObject)(i.$sort)?Object.keys(i.$sort||{}).pop():"",t=e?i.$sort[e]:i.$sort,n=e?t=>(0,u.resolve)(t,e):e=>e;r.sort((e,r)=>t*(0,u.compare)(n(e),n(r)))}return(0,u.isNumber)(i.$slice)&&(i.$slice<0?r.splice(0,r.length+i.$slice):r.splice(i.$slice)),a!=r.length||!(0,u.isEqual)(o,r)},{descendArray:!0,buildGraph:!0})})},28531:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$rename:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873),c=r(55377);let f=(e,t,r=[],n={})=>{let o=[];return Array.from(new Set((0,l.walkExpression)(t,r,n,(t,i,a)=>(0,l.applyUpdate)(e,i,a,(i,a)=>!!(0,u.has)(i,a)&&(o.push(...(0,c.$set)(e,{[t]:i[a]},r,n)),delete i[a],!0))).concat(o)))}},55377:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$set:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873);let c=(e,t,r=[],n={})=>(0,l.walkExpression)(t,r,n,(t,r,o)=>(0,l.applyUpdate)(e,r,o,(e,r)=>!(0,u.isEqual)(e[r],t)&&(e[r]=(0,l.clone)(n.cloneMode,t),!0),{buildGraph:!0}))},25149:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$unset:()=>c}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(85873);let c=(e,t,r=[],n={})=>(0,l.walkExpression)(t,r,n,(t,r,n)=>(0,l.applyUpdate)(e,r,n,(e,t)=>!!(0,u.has)(e,t)&&((0,u.isArray)(e)?e[t]=null:delete e[t],!0)))},90279:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{MILLIS_PER_UNIT:()=>p,rank:()=>m,withMemo:()=>h}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(28371),c=r(39923),f=r(98203);let p={week:7*c.MILLIS_PER_DAY,day:c.MILLIS_PER_DAY,hour:c.MILLIS_PER_DAY/24,minute:6e4,second:1e3,millisecond:1},d=new WeakMap;function h(e,t,r,n){if(!(0,f.isUnbounded)(t.parentExpr.output[t.field].window))return n(r());d.has(e)||d.set(e,{[t.field]:r()});let o=d.get(e);void 0===o[t.field]&&(o[t.field]=r());let i=!1;try{return n(o[t.field])}catch(e){i=!0}finally{(i||t.documentNumber===e.length)&&(delete o[t.field],0===Object.keys(o).length&&d.delete(e))}}function m(e,t,r,n,o){return h(t,r,()=>{let e="$"+Object.keys(r.parentExpr.sortBy)[0],o=(0,l.$push)(t,e,n),i=(0,u.groupBy)(o,(e,t)=>o[t],n.hashFunction);return{values:o,groups:i}},e=>{let{values:n,groups:i}=e;if(i.size==t.length)return r.documentNumber;let a=n[r.documentNumber-1],s=0,l=0;for(let e of i.keys()){if((0,u.isEqual)(a,e))return o?s+1:l+1;s++,l+=i.get(e).length}throw new u.MingoError("rank: invalid return value. please submit a bug report.")})}},2007:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$linearFill:()=>p}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(28371),c=r(90279);let f=(e,t,r,n,o)=>t+(n-t)/(r-e)*(o-e);function p(e,t,r,n){return(0,c.withMemo)(t,r,()=>{let e="$"+Object.keys(r.parentExpr.sortBy)[0],o=(0,l.$push)(t,[e,r.inputExpr],n).filter(([e,t])=>(0,u.isNumber)(+e));if(o.length!==t.length)return null;let i=-1,a=0;for(;a<o.length;){for(;i+1<o.length&&(0,u.isNumber)(o[i+1][1]);)a=++i;for(;a+1<o.length&&!(0,u.isNumber)(o[a+1][1]);)a++;if(a+1>=o.length)break;for(a++;i+1<a;)o[i+1][1]=f(o[i][0],o[i][1],o[a][0],o[a][1],o[i+1][0]),i++;i=a}return o.map(([e,t])=>t)},e=>e[r.documentNumber-1])}},77638:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{$locf:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(50981),l=r(79124),c=r(90279);function f(e,t,r,n){return(0,c.withMemo)(t,r,()=>{let e=(0,l.$push)(t,r.inputExpr,n);for(let t=1;t<e.length;t++)(0,u.isNil)(e[t])&&(e[t]=e[t-1]);return e},e=>e[r.documentNumber-1])}},39802:(e,t,r)=>{var n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(s,{Query:()=>f}),e.exports=((e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))a.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(s=o(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),s);var u=r(93561),l=r(44944),c=r(50981);class f{constructor(e,t){this.condition=e,this.options=(0,u.initOptions)(t),this.compiled=[],this.compile()}compile(){(0,c.assert)((0,c.isObject)(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);let e={};for(let[t,r]of Object.entries(this.condition)){if("$where"===t)Object.assign(e,{field:t,expr:r});else if((0,c.inArray)(["$and","$or","$nor","$expr","$jsonSchema"],t))this.processOperator(t,t,r);else for(let[e,n]of((0,c.assert)(!(0,c.isOperator)(t),`unknown top level operator: ${t}`),Object.entries((0,c.normalize)(r))))this.processOperator(t,e,n);e.field&&this.processOperator(e.field,e.field,e.expr)}}processOperator(e,t,r){let n=(0,u.getOperator)(u.OperatorType.QUERY,t,this.options);if(!n)throw new c.MingoError(`unknown query operator ${t}`);let o=n(e,r,this.options);this.compiled.push(o)}test(e){for(let t=0,r=this.compiled.length;t<r;t++)if(!this.compiled[t](e))return!1;return!0}find(e,t){return new l.Cursor(e,e=>this.test(e),t||{},this.options)}remove(e){return e.reduce((e,t)=>(this.test(t)||e.push(t),e),[])}}},30092:(e,t,r)=>{var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))u.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},c=(e,t,r)=>(r=null!=e?n(s(e)):{},l(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),f={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(f,{createUpdater:()=>g,updateObject:()=>O}),e.exports=l(o({},"__esModule",{value:!0}),f);var p=r(93561),d=c(r(57607)),h=c(r(42790)),m=c(r(72886)),y=c(r(5531)),b=r(39802),v=r(50981);function g(e){return(e={...e,queryOptions:(0,p.initOptions)(e.queryOptions)}).queryOptions.context.addQueryOps(m).addExpressionOps(d).addExpressionOps(h),(t,r,n=[],o={},i={})=>{let a=Object.assign({cloneMode:"copy"},e,i);Object.assign(a,{queryOptions:(0,p.initOptions)(Object.assign({useStrictMode:!1},a?.queryOptions))}),n=n||[],o=o||{};let s=Object.entries(r);(0,v.assert)(1===s.length,"Update expression must contain only one operator.");let[u,l]=s[0];(0,v.assert)((0,v.has)(y,u),`Update operator '${u}' is not supported.`);let c=y[u];return Object.keys(o).length&&!(o instanceof b.Query?o:new b.Query(o,a.queryOptions)).test(t)?[]:c(t,l,n,a)}}let O=g({})},50981:e=>{var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(i,{MAX_INT:()=>s,MAX_LONG:()=>l,MIN_INT:()=>u,MIN_LONG:()=>c,MingoError:()=>a,assert:()=>v,cloneDeep:()=>U,compare:()=>b,ensureArray:()=>F,filterMissing:()=>function e(t){if(t instanceof Array)for(let r=t.length-1;r>=0;r--)t[r]===f?t.splice(r,1):e(t[r]);else if(D(t))for(let r in t)B(t,r)&&e(t[r])},findInsertIndex:()=>ed,flatten:()=>H,getType:()=>g,groupBy:()=>et,has:()=>B,hashCode:()=>J,inArray:()=>T,intersection:()=>W,into:()=>er,isArray:()=>S,isBigInt:()=>_,isBoolean:()=>O,isDate:()=>M,isEmpty:()=>I,isEqual:()=>Q,isFunction:()=>E,isMissing:()=>R,isNil:()=>A,isNotNaN:()=>P,isNumber:()=>j,isObject:()=>D,isObjectLike:()=>k,isOperator:()=>ef,isRegExp:()=>N,isString:()=>w,isSymbol:()=>x,memoize:()=>en,merge:()=>function e(t,r,n){if(n=n||{flatten:!1},R(t)||A(t))return r;if(R(r)||A(r))return t;if(!z(t,r)){if(n.skipValidation)return r||t;throw Error("mismatched types. must both be array or object")}if(n.skipValidation=!0,S(t)){if(n.flatten){let o=0,i=0;for(;o<t.length&&i<r.length;)t[o]=e(t[o++],r[i++],n);for(;i<r.length;)t.push(r[i++])}else er(t,r)}else for(let o in r)t[o]=e(t[o],r[o],n);return t},normalize:()=>ep,notInArray:()=>C,removeValue:()=>el,resolve:()=>ei,resolveGraph:()=>function e(t,r,n){let o,i;let a=r.split("."),s=a[0],u=a.slice(1).join("."),l=null!==/^\d+$/.exec(s),c=a.length>1;if(t instanceof Array){if(l)o=eo(t,Number(s)),c&&(o=e(o,u,n)),o=[o];else for(let a of(o=[],t))i=e(a,r,n),n?.preserveMissing?(void 0===i&&(i=f),o.push(i)):void 0!==i&&o.push(i)}else{if(i=eo(t,s),c&&(i=e(i,u,n)),void 0===i)return;(o=n?.preserveKeys?{...t}:{})[s]=i}return o},setValue:()=>eu,sortBy:()=>ee,stringify:()=>Z,truthy:()=>$,unique:()=>G,walk:()=>es}),e.exports=((e,i,a,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let u of n(i))o.call(e,u)||u===a||t(e,u,{get:()=>i[u],enumerable:!(s=r(i,u))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);class a extends Error{}let s=2147483647,u=-2147483648,l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,f=Symbol("missing"),p=Object.freeze(Error("mingo: cycle detected while processing object/array")),d=/^\[object ([a-zA-Z0-9]+)\]$/,h=e=>{let t=Z(e),r=0,n=t.length;for(;n;)r=(r<<5)-r^t.charCodeAt(--n);return r>>>0},m=new Set(["null","undefined","boolean","number","string","date","regexp"]),y={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},b=(e,t)=>{e===f&&(e=void 0),t===f&&(t=void 0);let[r,n]=[e,t].map(e=>y[g(e).toLowerCase()]);return r!==n?r-n:1===r||2===r||6===r?e<t?-1:e>t?1:0:Q(e,t)?0:e<t?-1:e>t?1:0};function v(e,t){if(!e)throw new a(t)}let g=e=>d.exec(Object.prototype.toString.call(e))[1],O=e=>"boolean"==typeof e,w=e=>"string"==typeof e,x=e=>"symbol"==typeof e,j=e=>!isNaN(e)&&"number"==typeof e,_=e=>!isNaN(e)&&"bigint"==typeof e,P=e=>!(isNaN(e)&&"number"==typeof e),S=Array.isArray,D=e=>{if(!e)return!1;let t=Object.getPrototypeOf(e);return(t===Object.prototype||null===t)&&"[object Object]"===Object.prototype.toString.call(e)},k=e=>e===Object(e),M=e=>e instanceof Date,N=e=>e instanceof RegExp,E=e=>"function"==typeof e,A=e=>null==e,T=(e,t)=>e.includes(t),C=(e,t)=>!T(e,t),$=(e,t=!0)=>!!e||t&&""===e,I=e=>A(e)||w(e)&&!e||e instanceof Array&&0===e.length||D(e)&&0===Object.keys(e).length,R=e=>e===f,F=e=>e instanceof Array?e:[e],B=(e,t)=>!!e&&Object.prototype.hasOwnProperty.call(e,t),L=e=>"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(e),q=[M,N,L],V=(e,t)=>{if(A(e))return e;if(t.has(e))throw p;let r=e.constructor;if(q.some(t=>t(e)))return new r(e);try{if(t.add(e),S(e))return e.map(e=>V(e,t));if(D(e)){let r={};for(let n in e)r[n]=V(e[n],t);return r}}finally{t.delete(e)}return e},U=e=>V(e,new Set),z=(e,t)=>D(e)&&D(t)||S(e)&&S(t);function K(e,t=h){let r=new Map;return e.forEach((n,o)=>{let i=J(n,t);r.has(i)?r.get(i).some(t=>Q(e[t],n))||r.get(i).push(o):r.set(i,[o])}),r}function W(e,t=h){if(e.some(e=>0==e.length))return[];if(1===e.length)return Array.from(e);let r=ee(e.map((e,t)=>[t,e.length]),e=>e[1]),n=e[r[0][0]],o=K(n,t),i=new Map,a=[];return o.forEach((t,o)=>{let s=t.map(e=>n[e]),u=s.map(e=>0),l=s.map(e=>[r[0][0],0]),c=!1;for(let t=1;t<e.length;t++){let[n,a]=r[t],f=e[n];if(i.has(t)||i.set(t,K(f)),i.get(t).has(o)){let e=i.get(t).get(o).map(e=>f[e]);c=s.map((r,a)=>e.some((e,s)=>{let c=u[a];return Q(r,e)&&(u[a]++,n<l[a][0]&&(l[a]=[n,i.get(t).get(o)[s]])),c<u[a]})).some(Boolean)}if(!c)return}c&&er(a,u.map((t,r)=>t===e.length-1?[s[r],l[r]]:f).filter(e=>e!==f))}),a.sort((e,t)=>{let[r,[n,o]]=e,[i,[a,s]]=t,u=b(n,a);return 0!==u?u:b(o,s)}).map(e=>e[0])}function H(e,t=0){let r=[];return function e(t,n){for(let o=0,i=t.length;o<i;o++)S(t[o])&&(n>0||n<0)?e(t[o],Math.max(-1,n-1)):r.push(t[o])}(e,t),r}let Y=e=>{let[t,r]=[Object.getPrototypeOf(e),Object.getOwnPropertyNames(e)],n=t;for(;!r.length&&t!==Object.prototype&&t!==Array.prototype;)n=t,r=Object.getOwnPropertyNames(t),t=Object.getPrototypeOf(t);let o={};return r.forEach(t=>o[t]=e[t]),[o,n]};function Q(e,t){if(e===t||Object.is(e,t))return!0;let r=!!e&&e.constructor||e;if(null===e||null===t||void 0===e||void 0===t||r!==t.constructor||r===Function)return!1;if(r===Array||r===Object){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length||new Set([...r,...n]).size!=r.length)return!1;for(let n of r)if(!Q(e[n],t[n]))return!1;return!0}let n=Object.getPrototypeOf(e);return(L(e)||n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))&&e.toString()===t.toString()}function G(e,t=h){let r=e.map(e=>f);return K(e,t).forEach((t,n)=>{t.forEach(t=>r[t]=e[t])}),r.filter(e=>e!==f)}let X=(e,t)=>{if(null===e)return"null";if(void 0===e)return"undefined";let r=e.constructor;switch(r){case RegExp:case Number:case Boolean:case Function:case Symbol:return e.toString();case String:return JSON.stringify(e);case Date:return e.toISOString()}if(L(e))return r.name+"["+e.toString()+"]";if(t.has(e))throw p;try{if(t.add(e),S(e))return"["+e.map(e=>X(e,t)).join(",")+"]";if(r===Object)return"{"+Object.keys(e).sort().map(r=>r+":"+X(e[r],t)).join(",")+"}";let n=Object.getPrototypeOf(e);if(n!==Object.prototype&&n!==Array.prototype&&Object.prototype.hasOwnProperty.call(n,"toString"))return r.name+"("+JSON.stringify(e.toString())+")";let[o,i]=Y(e);return r.name+X(o,t)}finally{t.delete(e)}},Z=e=>X(e,new Set);function J(e,t){return(t=t||h,A(e))?null:t(e).toString()}function ee(e,t,r=b){if(I(e))return e;let n=[],o=[];for(let r=0;r<e.length;r++){let i=e[r],a=t(i,r);A(a)?o.push(i):n.push([a,i])}return n.sort((e,t)=>r(e[0],t[0])),er(o,n.map(e=>e[1]))}function et(e,t,r=h){if(e.length<1)return new Map;let n=new Map,o=new Map;for(let i=0;i<e.length;i++){let a=e[i],s=t(a,i),u=J(s,r);if(null===u)o.has(null)?o.get(null).push(a):o.set(null,[a]);else{let e=n.has(u)?n.get(u).find(e=>Q(e,s)):null;A(e)?(o.set(s,[a]),n.has(u)?n.get(u).push(s):n.set(u,[s])):o.get(e).push(a)}}return o}function er(e,...t){return e instanceof Array?t.reduce((e,t)=>{let r=Math.ceil(t.length/5e4),n=0;for(;r-- >0;)Array.prototype.push.apply(e,t.slice(n,n+5e4)),n+=5e4;return e},e):t.filter(k).reduce((e,t)=>(Object.assign(e,t),e),e)}function en(e,t=h){let r;return r={},(...n)=>{let o=J(n,t)||"";return B(r,o)||(r[o]=e.apply(this,n)),r[o]}}function eo(e,t){return k(e)?e[t]:void 0}function ei(e,t,r){let n=0,o=m.has(g(e).toLowerCase())?e:function e(t,r){let o=t;for(let t=0;t<r.length;t++){let i=r[t];if(null===/^\d+$/.exec(i)&&o instanceof Array){if(0===t&&n>0)break;n+=1;let i=r.slice(t);o=o.reduce((t,r)=>{let n=e(r,i);return void 0!==n&&t.push(n),t},[]);break}if(void 0===(o=eo(o,i)))break}return o}(e,t.split("."));return o instanceof Array&&r?.unwrapArray?function(e,t){if(t<1)return e;for(;t--&&1===e.length;)e=e[0];return e}(o,n):o}let ea=/^\d+$/;function es(e,t,r,n){let o=t.split("."),i=o[0],a=o.slice(1).join(".");if(1===o.length)(D(e)||S(e)&&ea.test(i))&&r(e,i);else{n?.buildGraph&&A(e[i])&&(e[i]={});let t=e[i];if(!t)return;let s=!!(o.length>1&&ea.test(o[1]));t instanceof Array&&n?.descendArray&&!s?t.forEach(e=>es(e,a,r,n)):es(t,a,r,n)}}function eu(e,t,r){es(e,t,(e,t)=>{e[t]=E(r)?r(e[t]):r},{buildGraph:!0})}function el(e,t,r){es(e,t,(e,t)=>{if(e instanceof Array){if(/^\d+$/.test(t))e.splice(parseInt(t),1);else if(r&&r.descendArray)for(let r of e)D(r)&&delete r[t]}else D(e)&&delete e[t]},r)}let ec=/^\$[a-zA-Z0-9_]+$/;function ef(e){return ec.test(e)}function ep(e){if(m.has(g(e).toLowerCase()))return N(e)?{$regex:e}:{$eq:e};if(k(e)){if(!Object.keys(e).some(ef))return{$eq:e};if(B(e,"$regex")){let t={...e};return t.$regex=new RegExp(e.$regex,e.$options),delete t.$options,t}}return e}function ed(e,t){let r=0,n=e.length-1;for(;r<=n;){let o=Math.round(r+(n-r)/2);if(0>b(t,e[o]))n=o-1;else{if(!(b(t,e[o])>0))return o;r=o+1}}return r}},24806:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},5423:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(37520),o=r(12625),i=r(22012),a=()=>{},s=new o.TimeoutError;class u extends n{constructor(e){var t,r,n,o;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=a,this._resolveIdle=a,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:i.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(o=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==o?o:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=a,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=a,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((r,n)=>{let i=async()=>{this._pendingCount++,this._intervalCount++;try{let i=void 0===this._timeout&&void 0===t.timeout?e():o.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(s)});r(await i)}catch(e){n(e)}this._next()};this._queue.enqueue(i,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}t.default=u},1156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,o=e.length;for(;o>0;){let i=o/2|0,a=n+i;0>=r(e[a],t)?(n=++a,o-=i+1):o=i}return n}},22012:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(1156);class o{constructor(){this._queue=[]}enqueue(e,t){let r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(r);return}let o=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(o,0,r)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}t.default=o},37520:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var s=new o(n,i||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=Array(i);o<i;o++)a[o]=n[o].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,o,i,a){var s=r?r+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,o),!0;case 5:return c.fn.call(c.context,t,n,o,i),!0;case 6:return c.fn.call(c.context,t,n,o,i,a),!0}for(l=1,u=Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var p,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,o);break;default:if(!u)for(p=1,u=Array(f-1);p<f;p++)u[p-1]=arguments[p];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||n&&s.context!==n||a(this,i);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||o&&!s[u].once||n&&s[u].context!==n)&&l.push(s[u]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},12625:(e,t,r)=>{"use strict";let n=r(24806);class o extends Error{constructor(e){super(e),this.name="TimeoutError"}}let i=(e,t,r)=>new Promise((i,a)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0){i(e);return}let s=setTimeout(()=>{if("function"==typeof r){try{i(r())}catch(e){a(e)}return}let n="string"==typeof r?r:`Promise timed out after ${t} milliseconds`,s=r instanceof Error?r:new o(n);"function"==typeof e.cancel&&e.cancel(),a(s)},t);n(e.then(i,a),()=>{clearTimeout(s)})});e.exports=i,e.exports.default=i,e.exports.TimeoutError=o},8046:function(e){var t;t=function(){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function r(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,o=Object.keys,i=Array.isArray;function a(e,t){return"object"!=typeof t||o(t).forEach(function(r){e[r]=t[r]}),e}"undefined"==typeof Promise||n.Promise||(n.Promise=Promise);var s=Object.getPrototypeOf,u={}.hasOwnProperty;function l(e,t){return u.call(e,t)}function c(e,t){"function"==typeof t&&(t=t(s(e))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(t).forEach(function(r){p(e,r,t[r])})}var f=Object.defineProperty;function p(e,t,r,n){f(e,t,a(r&&l(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function d(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:c.bind(null,e.prototype)}}}}var h=Object.getOwnPropertyDescriptor,m=[].slice;function y(e,t,r){return m.call(e,t,r)}function b(e,t){return t(e)}function v(e){if(!e)throw Error("Assertion Failed")}function g(e){n.setImmediate?setImmediate(e):setTimeout(e,0)}function O(e,t){if("string"==typeof t&&l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,o=t.length;n<o;++n){var i=O(e,t[n]);r.push(i)}return r}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return null==s?void 0:O(s,t.substr(a+1))}}function w(e,t,r){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e))){if("string"!=typeof t&&"length"in t){v("string"!=typeof r&&"length"in r);for(var n=0,o=t.length;n<o;++n)w(e,t[n],r[n])}else{var a,s,u=t.indexOf(".");-1!==u?(a=t.substr(0,u),""===(s=t.substr(u+1))?void 0===r?i(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=r:w(u=(u=e[a])&&l(e,a)?u:e[a]={},s,r)):void 0===r?i(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}}function x(e){var t,r={};for(t in e)l(e,t)&&(r[t]=e[t]);return r}var j=[].concat;function _(e){return j.apply([],e)}var P="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(_([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return n[e]}),S=new Set(P.map(function(e){return n[e]})),D=null;function k(e){return D=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var r=D.get(t);if(r)return r;if(i(t)){r=[],D.set(t,r);for(var n=0,o=t.length;n<o;++n)r.push(e(t[n]))}else if(S.has(t.constructor))r=t;else{var a,u=s(t);for(a in r=u===Object.prototype?{}:Object.create(u),D.set(t,r),t)l(t,a)&&(r[a]=e(t[a]))}return r}(e),D=null,e}var M={}.toString;function N(e){return M.call(e).slice(8,-1)}var E="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",A="symbol"==typeof E?function(e){var t;return null!=e&&(t=e[E])&&t.apply(e)}:function(){return null};function T(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var C={};function $(e){var t,r,n,o;if(1==arguments.length){if(i(e))return e.slice();if(this===C&&"string"==typeof e)return[e];if(o=A(e)){for(r=[];!(n=o.next()).done;)r.push(n.value);return r}if(null==e||"number"!=typeof(t=e.length))return[e];for(r=Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=Array(t);t--;)r[t]=arguments[t];return r}var I="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},R=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],F=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(R),B={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function L(e,t){this.name=e,this.message=t}function q(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function V(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=q(e,t)}function U(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=q(e,this.failures)}d(L).from(Error).extend({toString:function(){return this.name+": "+this.message}}),d(V).from(L),d(U).from(L);var z=F.reduce(function(e,t){return e[t]=t+"Error",e},{}),K=F.reduce(function(e,t){var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=B[t]||r,this.inner=null)}return d(n).from(L),e[t]=n,e},{});K.Syntax=SyntaxError,K.Type=TypeError,K.Range=RangeError;var W=R.reduce(function(e,t){return e[t+"Error"]=K[t],e},{}),H=F.reduce(function(e,t){return -1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=K[t]),e},{});function Y(){}function Q(e){return e}function G(e,t){return null==e||e===Q?t:function(r){return t(e(r))}}function X(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?X(n,this.onsuccess):n),o&&(this.onerror=this.onerror?X(o,this.onerror):o),void 0!==i?i:r}}function J(e,t){return e===Y?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?X(r,this.onsuccess):r),n&&(this.onerror=this.onerror?X(n,this.onerror):n)}}function ee(e,t){return e===Y?t:function(r){var n=e.apply(this,arguments);a(r,n);var o=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?X(o,this.onsuccess):o),i&&(this.onerror=this.onerror?X(i,this.onerror):i),void 0===n?void 0===r?void 0:r:a(n,r)}}function et(e,t){return e===Y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function er(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,o=arguments.length,i=Array(o);o--;)i[o]=arguments[o];return r.then(function(){return t.apply(n,i)})}return t.apply(this,arguments)}}H.ModifyError=V,H.DexieError=L,H.BulkError=U;var en="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),eo={},P="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,s(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,s(t),e]}(),R=P[0],F=P[1],P=P[2],F=F&&F.then,ei=R&&R.constructor,ea=!!P,es=function(e,t){em.push([e,t]),el&&(queueMicrotask(eP),el=!1)},eu=!0,el=!0,ec=[],ef=[],ep=Q,ed={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},eh=ed,em=[],ey=0,eb=[];function ev(e){if("object"!=typeof this)throw TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=eh;if("function"!=typeof e){if(e!==eo)throw TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&ew(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw TypeError("A promise cannot be resolved with itself.");var n=t._lib&&eS();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof ev?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,ex(t)),n&&eD()}},ew.bind(null,t))}catch(e){ew(t,e)}}(this,e)}var eg={get:function(){var e=eh,t=e$;function r(r,n){var o=this,i=!e.global&&(e!==eh||t!==e$),a=i&&!eB(),s=new ev(function(t,s){ej(o,new eO(eK(r,e,i,a),eK(n,e,i,a),t,s,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return r.prototype=eo,r},set:function(e){p(this,"then",e&&e.prototype===eo?eg:{get:function(){return e},set:eg.set})}};function eO(e,t,r,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=o}function ew(e,t){var r;ef.push(t),null===e._state&&(r=e._lib&&eS(),t=ep(t),e._state=!1,e._value=t,ec.some(function(t){return t._value===e._value})||ec.push(e),ex(e),r&&eD())}function ex(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)ej(e,t[r]);var o=e._PSD;--o.ref||o.finalize(),0===ey&&(++ey,es(function(){0==--ey&&ek()},[]))}function ej(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ey,es(e_,[r,e,t])}else e._listeners.push(t)}function e_(e,t,r){try{var n,o=t._value;!t._state&&ef.length&&(ef=[]),n=en&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),t._state||-1!==ef.indexOf(o)||function(e){for(var t=ec.length;t;)if(ec[--t]._value===e._value)return ec.splice(t,1)}(t),r.resolve(n)}catch(e){r.reject(e)}finally{0==--ey&&ek(),--r.psd.ref||r.psd.finalize()}}function eP(){ez(ed,function(){eS()&&eD()})}function eS(){var e=eu;return el=eu=!1,e}function eD(){var e,t,r;do for(;0<em.length;)for(e=em,em=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}while(0<em.length);el=eu=!0}function ek(){var e=ec;ec=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=eb.slice(0),r=t.length;r;)t[--r]()}function eM(e){return new ev(eo,!1,e)}function eN(e,t){var r=eh;return function(){var n=eS(),o=eh;try{return eV(r,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{eV(o,!1),n&&eD()}}}c(ev.prototype,{then:eg,_then:function(e,t){ej(this,new eO(null,null,e,t,eh))},catch:function(e){if(1==arguments.length)return this.then(null,e);var t=arguments[1];return"function"==typeof e?this.then(null,function(r){return(r instanceof e?t:eM)(r)}):this.then(null,function(r){return(r&&r.name===e?t:eM)(r)})},finally:function(e){return this.then(function(t){return ev.resolve(e()).then(function(){return t})},function(t){return ev.resolve(e()).then(function(){return eM(t)})})},timeout:function(e,t){var r=this;return e<1/0?new ev(function(n,o){var i=setTimeout(function(){return o(new K.Timeout(t))},e);r.then(n,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(ev.prototype,Symbol.toStringTag,"Dexie.Promise"),ed.env=eU(),c(ev,{all:function(){var e=$.apply(null,arguments).map(eL);return new ev(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(o,i){return ev.resolve(o).then(function(r){e[i]=r,--n||t(e)},r)})})},resolve:function(e){return e instanceof ev?e:e&&"function"==typeof e.then?new ev(function(t,r){e.then(t,r)}):new ev(eo,!0,e)},reject:eM,race:function(){var e=$.apply(null,arguments).map(eL);return new ev(function(t,r){e.map(function(e){return ev.resolve(e).then(t,r)})})},PSD:{get:function(){return eh},set:function(e){return eh=e}},totalEchoes:{get:function(){return e$}},newPSD:eR,usePSD:ez,scheduler:{get:function(){return es},set:function(e){es=e}},rejectionMapper:{get:function(){return ep},set:function(e){ep=e}},follow:function(e,t){return new ev(function(r,n){return eR(function(t,r){var n=eh;n.unhandleds=[],n.onunhandled=r,n.finalize=X(function(){var e,n=this;e=function(){0===n.unhandleds.length?t():r(n.unhandleds[0])},eb.push(function t(){e(),eb.splice(eb.indexOf(t),1)}),++ey,es(function(){0==--ey&&ek()},[])},n.finalize),e()},t,r,n)})}}),ei&&(ei.allSettled&&p(ev,"allSettled",function(){var e=$.apply(null,arguments).map(eL);return new ev(function(t){0===e.length&&t([]);var r=e.length,n=Array(r);e.forEach(function(e,o){return ev.resolve(e).then(function(e){return n[o]={status:"fulfilled",value:e}},function(e){return n[o]={status:"rejected",reason:e}}).then(function(){return--r||t(n)})})})}),ei.any&&"undefined"!=typeof AggregateError&&p(ev,"any",function(){var e=$.apply(null,arguments).map(eL);return new ev(function(t,r){0===e.length&&r(AggregateError([]));var n=e.length,o=Array(n);e.forEach(function(e,i){return ev.resolve(e).then(function(e){return t(e)},function(e){o[i]=e,--n||r(AggregateError(o))})})})}),ei.withResolvers&&(ev.withResolvers=ei.withResolvers));var eE={awaits:0,echoes:0,id:0},eA=0,eT=[],eC=0,e$=0,eI=0;function eR(e,t,r,n){var o=eh,i=Object.create(o);return i.parent=o,i.ref=0,i.global=!1,i.id=++eI,ed.env,i.env=ea?{Promise:ev,PromiseProp:{value:ev,configurable:!0,writable:!0},all:ev.all,race:ev.race,allSettled:ev.allSettled,any:ev.any,resolve:ev.resolve,reject:ev.reject}:{},t&&a(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},n=ez(i,e,r,n),0===i.ref&&i.finalize(),n}function eF(){return eE.id||(eE.id=++eA),++eE.awaits,eE.echoes+=100,eE.id}function eB(){return!!eE.awaits&&(0==--eE.awaits&&(eE.id=0),eE.echoes=100*eE.awaits,!0)}function eL(e){return eE.echoes&&e&&e.constructor===ei?(eF(),e.then(function(e){return eB(),e},function(e){return eB(),eH(e)})):e}function eq(){var e=eT[eT.length-1];eT.pop(),eV(e,!1)}function eV(e,t){var r,o=eh;(t?!eE.echoes||eC++&&e===eh:!eC||--eC&&e===eh)||queueMicrotask(t?(function(e){++e$,eE.echoes&&0!=--eE.echoes||(eE.echoes=eE.awaits=eE.id=0),eT.push(eh),eV(e,!0)}).bind(null,e):eq),e!==eh&&(eh=e,o===ed&&(ed.env=eU()),ea&&(r=ed.env.Promise,t=e.env,(o.global||e.global)&&(Object.defineProperty(n,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function eU(){var e=n.Promise;return ea?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function ez(e,t,r,n,o){var i=eh;try{return eV(e,!0),t(r,n,o)}finally{eV(i,!1)}}function eK(e,t,r,n){return"function"!=typeof e?e:function(){var o=eh;r&&eF(),eV(t,!0);try{return e.apply(this,arguments)}finally{eV(o,!1),n&&queueMicrotask(eB)}}}function eW(e){Promise===ei&&0===eE.echoes?0===eC?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+F).indexOf("[native code]")&&(eF=eB=Y);var eH=ev.reject,eY=String.fromCharCode(65535),eQ="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",eG="String expected.",eX=[],eZ="__dbnames",eJ="readonly",e0="readwrite";function e1(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var e2={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function e3(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=k(t))[e],t}}function e5(){throw K.Type()}function e9(e,t){try{var r=e6(e),n=e6(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var r=e.length,n=t.length,o=r<n?r:n,i=0;i<o;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return r===n?0:r<n?-1:1}(e4(e),e4(t));case"Array":return function(e,t){for(var r=e.length,n=t.length,o=r<n?r:n,i=0;i<o;++i){var a=e9(e[i],t[i]);if(0!==a)return a}return r===n?0:r<n?-1:1}(e,t)}}catch(e){}return NaN}function e6(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)?"binary":"ArrayBuffer"===(e=N(e))?"binary":e}function e4(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var e8=(e7.prototype._trans=function(e,t,r){var n=this._tx||eh.trans,o=this.name,i=en&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function a(e,r,n){if(!n.schema[o])throw new K.NotFound("Table "+o+" not part of transaction");return t(n.idbtrans,n)}var s=eS();try{var u=n&&n.db._novip===this.db._novip?n===eh.trans?n._promise(e,a,r):eR(function(){return n._promise(e,a,r)},{trans:n,transless:eh.transless||eh}):function e(t,r,n,o){if(t.idbdb&&(t._state.openComplete||eh.letThrough||t._vip)){var i=t._createTransaction(r,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===z.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,o)})):eH(i)}return i._promise(r,function(e,t){return eR(function(){return eh.trans=i,o(e,t,i)})}).then(function(e){if("readwrite"===r)try{i.idbtrans.commit()}catch(e){}return"readonly"===r?e:i._completion.then(function(){return e})})}if(t._state.openComplete)return eH(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return eH(new K.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then(function(){return e(t,r,n,o)})}(this.db,e,[this.name],a);return i&&(u._consoleTask=i,u=u.catch(function(e){return console.trace(e),eH(e)})),u}finally{s&&eD()}},e7.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?eH(new K.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},e7.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(i(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=o(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==eY){var n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(function(t){return e[t]}))}!r&&en&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var a=this.schema.idxByName,s=t.reduce(function(t,r){var n=t[0],o=t[1],t=a[r],s=e[r];return[n||t,n||!t?e1(o,t&&t.multi?function(e){return i(e=O(e,r))&&e.some(function(e){return 0===e9(s,e)})}:function(e){return 0===e9(s,O(e,r))}):o]},[null,null]),n=s[0],s=s[1];return n?this.where(n.name).equals(e[n.keyPath]).filter(s):r?this.filter(s):this.where(t).equals("")},e7.prototype.filter=function(e){return this.toCollection().and(e)},e7.prototype.count=function(e){return this.toCollection().count(e)},e7.prototype.offset=function(e){return this.toCollection().offset(e)},e7.prototype.limit=function(e){return this.toCollection().limit(e)},e7.prototype.each=function(e){return this.toCollection().each(e)},e7.prototype.toArray=function(e){return this.toCollection().toArray(e)},e7.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e7.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,i(e)?"[".concat(e.join("+"),"]"):e))},e7.prototype.reverse=function(){return this.toCollection().reverse()},e7.prototype.mapToClass=function(t){var r,n=this.db,o=this.name;function i(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof e5&&(function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(i,r=t),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return o},t=i);for(var a=new Set,u=t.prototype;u;u=s(u))Object.getOwnPropertyNames(u).forEach(function(e){return a.add(e)});function l(e){if(!e)return e;var r,n=Object.create(t.prototype);for(r in e)if(!a.has(r))try{n[r]=e[r]}catch(e){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),t},e7.prototype.defineClass=function(){return this.mapToClass(function(e){a(this,e)})},e7.prototype.add=function(e,t){var r=this,n=this.schema.primKey,o=n.auto,i=n.keyPath,a=e;return i&&o&&(a=e3(i)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})}).then(function(e){return e.numFailures?ev.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{w(e,i,t)}catch(e){}return t})},e7.prototype.update=function(e,t){return"object"!=typeof e||i(e)?this.where(":id").equals(e).modify(t):void 0===(e=O(e,this.schema.primKey.keyPath))?eH(new K.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},e7.prototype.put=function(e,t){var r=this,n=this.schema.primKey,o=n.auto,i=n.keyPath,a=e;return i&&o&&(a=e3(i)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?ev.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{w(e,i,t)}catch(e){}return t})},e7.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(e){return e.numFailures?ev.reject(e.failures[0]):void 0})},e7.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:e2})}).then(function(e){return e.numFailures?ev.reject(e.failures[0]):void 0})},e7.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},e7.prototype.bulkAdd=function(e,t,r){var n=this,o=Array.isArray(t)?t:void 0,i=(r=r||(o?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=n.schema.primKey,a=r.auto,r=r.keyPath;if(r&&o)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,r=r&&a?e.map(e3(r)):e;return n.core.mutate({trans:t,type:"add",keys:o,values:r,wantResults:i}).then(function(e){var t=e.numFailures,r=e.results,o=e.lastResult,e=e.failures;if(0===t)return i?r:o;throw new U("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),e)})})},e7.prototype.bulkPut=function(e,t,r){var n=this,o=Array.isArray(t)?t:void 0,i=(r=r||(o?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=n.schema.primKey,a=r.auto,r=r.keyPath;if(r&&o)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,r=r&&a?e.map(e3(r)):e;return n.core.mutate({trans:t,type:"put",keys:o,values:r,wantResults:i}).then(function(e){var t=e.numFailures,r=e.results,o=e.lastResult,e=e.failures;if(0===t)return i?r:o;throw new U("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),e)})})},e7.prototype.bulkUpdate=function(e){var t=this,r=this.core,n=e.map(function(e){return e.key}),o=e.map(function(e){return e.changes}),i=[];return this._trans("readwrite",function(a){return r.getMany({trans:a,keys:n,cache:"clone"}).then(function(s){var u=[],l=[];e.forEach(function(e,r){var n=e.key,o=e.changes,a=s[r];if(a){for(var c=0,f=Object.keys(o);c<f.length;c++){var p=f[c],d=o[p];if(p===t.schema.primKey.keyPath){if(0!==e9(d,n))throw new K.Constraint("Cannot update primary key in bulkUpdate()")}else w(a,p,d)}i.push(r),u.push(n),l.push(a)}});var c=u.length;return r.mutate({trans:a,type:"put",keys:u,values:l,updates:{keys:n,changeSpecs:o}}).then(function(e){var r=e.numFailures,n=e.failures;if(0===r)return c;for(var o=0,a=Object.keys(n);o<a.length;o++){var s,u=a[o],l=i[Number(u)];null!=l&&(s=n[u],delete n[u],n[l]=s)}throw new U("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(c," operations failed"),n)})})})},e7.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(e){var n=e.numFailures,o=e.lastResult,e=e.failures;if(0===n)return o;throw new U("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),e)})},e7);function e7(){}function te(e){function t(t,n){if(n){for(var o=arguments.length,i=Array(o-1);--o;)i[o-1]=arguments[o];return r[t].subscribe.apply(null,i),e}if("string"==typeof t)return r[t]}var r={};t.addEventType=s;for(var n=1,a=arguments.length;n<a;++n)s(arguments[n]);return t;function s(e,n,a){if("object"!=typeof e){n=n||et;var u={subscribers:[],fire:a=a||Y,subscribe:function(e){-1===u.subscribers.indexOf(e)&&(u.subscribers.push(e),u.fire=n(u.fire,e))},unsubscribe:function(e){u.subscribers=u.subscribers.filter(function(t){return t!==e}),u.fire=u.subscribers.reduce(n,a)}};return r[e]=t[e]=u}o(e).forEach(function(t){var r=e[t];if(i(r))s(t,e[t][0],e[t][1]);else{if("asap"!==r)throw new K.InvalidArgument("Invalid event config");var n=s(t,Q,function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){g(function(){e.apply(null,t)})})})}})}}function tt(e,t){return d(t).from({prototype:e}),t}function tr(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function tn(e,t){e.filter=e1(e.filter,t)}function to(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return e1(n(),t())}:t,e.justLimit=r&&!n}function ti(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function ta(e,t,r){var n=ti(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function ts(e,t,r,n){var o=e.replayFilter?e1(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},a=function(e,r,n){var a,s;o&&!o(r,n,function(e){return r.stop(e)},function(e){return r.fail(e)})||("[object ArrayBuffer]"==(s=""+(a=r.primaryKey))&&(s=""+new Uint8Array(a)),l(i,s)||(i[s]=!0,t(e,r,n)))};return Promise.all([e.or._iterate(a,r),tu(ta(e,n,r),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return tu(ta(e,n,r),e1(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function tu(e,t,r,n){var o=eN(n?function(e,t,o){return r(n(e),t,o)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=Y},function(t){e.fail(t),r=Y})||o(e.value,e,function(e){return r=e}),r()})})}var P=Symbol(),tl=(tc.prototype.execute=function(e){if(void 0!==this.add){var t=this.add;if(i(t))return r(r([],i(e)?e:[],!0),t,!0).sort();if("number"==typeof t)return(Number(e)||0)+t;if("bigint"==typeof t)try{return BigInt(e)+t}catch(e){return BigInt(0)+t}throw TypeError("Invalid term ".concat(t))}if(void 0!==this.remove){var n=this.remove;if(i(n))return i(e)?e.filter(function(e){return!n.includes(e)}).sort():[];if("number"==typeof n)return Number(e)-n;if("bigint"==typeof n)try{return BigInt(e)-n}catch(e){return BigInt(0)-n}throw TypeError("Invalid subtrahend ".concat(n))}return(t=null===(t=this.replacePrefix)||void 0===t?void 0:t[0])&&"string"==typeof e&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},tc);function tc(e){Object.assign(this,e)}var tf=(tp.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,eH.bind(null,r.error)):r.table._trans("readonly",e).then(t)},tp.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,eH.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},tp.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=e1(t.algorithm,e)},tp.prototype._iterate=function(e,t){return ts(this._ctx,e,t,this._ctx.table.core)},tp.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&a(r,e),t._ctx=r,t},tp.prototype.raw=function(){return this._ctx.valueMapper=null,this},tp.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return ts(t,e,r,t.table.core)})},tp.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,n=r.table.core;if(tr(r,!0))return n.count({trans:e,query:{index:ti(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var o=0;return ts(r,function(){return++o,!1},e,n).then(function(){return o})}).then(e)},tp.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],o=r.length-1;function i(e,t){return t?i(e[r[t]],t-1):e[n]}var a="next"===this._ctx.dir?1:-1;function s(e,t){return e9(i(e,o),i(t,o))*a}return this.toArray(function(e){return e.sort(s)}).then(t)},tp.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&tr(r,!0)&&0<r.limit){var n=r.valueMapper,o=ti(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(function(e){return e=e.result,n?e.map(n):e})}var i=[];return ts(r,function(e){return i.push(e)},e,r.table.core).then(function(){return i})},e)},tp.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,tr(t)?to(t,function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r(function(){e.advance(t),t=0}),!1)}}):to(t,function(){var t=e;return function(){return--t<0}})),this},tp.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),to(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}},!0),this},tp.prototype.until=function(e,t){return tn(this._ctx,function(r,n,o){return!e(r.value)||(n(o),t)}),this},tp.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},tp.prototype.last=function(e){return this.reverse().first(e)},tp.prototype.filter=function(e){var t;return tn(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=e1(t.isMatch,e),this},tp.prototype.and=function(e){return this.filter(e)},tp.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},tp.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},tp.prototype.desc=function(){return this.reverse()},tp.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},tp.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},tp.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},tp.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},tp.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&tr(t,!0)&&0<t.limit)return this._read(function(e){var r=ti(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},tp.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},tp.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},tp.prototype.lastKey=function(e){return this.reverse().firstKey(e)},tp.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return tn(this._ctx,function(e){var r=e.primaryKey.toString(),e=l(t,r);return t[r]=!0,!e}),this},tp.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(n){s="function"==typeof e?e:(a=(i=o(e)).length,function(t){for(var r=!1,n=0;n<a;++n){var o=i[n],s=e[o],u=O(t,o);s instanceof tl?(w(t,o,s.execute(u)),r=!0):u!==s&&(w(t,o,s),r=!0)}return r});var i,a,s,u=r.table.core,l=u.schema.primaryKey,c=l.outbound,f=l.extractKey,p=200,l=t.db._options.modifyChunkSize;function d(e,t){var r=t.failures,t=t.numFailures;m+=e-t;for(var n=0,i=o(r);n<i.length;n++){var a=i[n];h.push(r[a])}}l&&(p="object"==typeof l?l[u.name]||l["*"]||200:l);var h=[],m=0,y=[];return t.clone().primaryKeys().then(function(t){var o=tr(r)&&r.limit===1/0&&("function"!=typeof e||e===td)&&{index:r.index,range:r.range};return(function r(i){var a=Math.min(p,t.length-i);return u.getMany({trans:n,keys:t.slice(i,i+a),cache:"immutable"}).then(function(l){for(var h=[],m=[],y=c?[]:null,b=[],v=0;v<a;++v){var g=l[v],O={value:k(g),primKey:t[i+v]};!1!==s.call(O,O.value,O)&&(null==O.value?b.push(t[i+v]):c||0===e9(f(g),f(O.value))?(m.push(O.value),c&&y.push(t[i+v])):(b.push(t[i+v]),h.push(O.value)))}return Promise.resolve(0<h.length&&u.mutate({trans:n,type:"add",values:h}).then(function(e){for(var t in e.failures)b.splice(parseInt(t),1);d(h.length,e)})).then(function(){return(0<m.length||o&&"object"==typeof e)&&u.mutate({trans:n,type:"put",keys:y,values:m,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<i}).then(function(e){return d(m.length,e)})}).then(function(){return(0<b.length||o&&e===td)&&u.mutate({trans:n,type:"delete",keys:b,criteria:o,isAdditionalChunk:0<i}).then(function(e){return d(b.length,e)})}).then(function(){return t.length>i+a&&r(i+p)})})})(0).then(function(){if(0<h.length)throw new V("Error modifying one or more objects",h,m,y);return t.length})})})},tp.prototype.delete=function(){var e=this._ctx,t=e.range;return tr(e)&&(e.isPrimKey||3===t.type)?this._write(function(r){var n=e.table.core.schema.primaryKey;return e.table.core.count({trans:r,query:{index:n,range:t}}).then(function(n){return e.table.core.mutate({trans:r,type:"deleteRange",range:t}).then(function(e){var t=e.failures;if(e.lastResult,e.results,e=e.numFailures)throw new V("Could not delete some values",Object.keys(t).map(function(e){return t[e]}),n-e);return n-e})})}):this.modify(td)},tp);function tp(){}var td=function(e,t){return t.value=null};function th(e,t){return e<t?-1:e===t?0:1}function tm(e,t){return t<e?-1:e===t?0:1}function ty(e,t,r){return(e=e instanceof tw?new e.Collection(e):e)._ctx.error=new(r||TypeError)(t),e}function tb(e){return new e.Collection(e,function(){return tO("")}).limit(0)}function tv(e,t,r,n){var o,i,a,s,u,l,c,f=r.length;if(!r.every(function(e){return"string"==typeof e}))return ty(e,eG);function p(e){o="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},i="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},a="next"===e?th:tm;var t=r.map(function(e){return{lower:i(e),upper:o(e)}}).sort(function(e,t){return a(e.lower,t.lower)});s=t.map(function(e){return e.upper}),u=t.map(function(e){return e.lower}),c="next"===(l=e)?"":n}p("next"),(e=new e.Collection(e,function(){return tg(s[0],u[f-1]+n)}))._ondirectionchange=function(e){p(e)};var d=0;return e._addAlgorithm(function(e,r,n){var o=e.key;if("string"!=typeof o)return!1;var p=i(o);if(t(p,u,d))return!0;for(var h=null,m=d;m<f;++m){var y=function(e,t,r,n,o,i){for(var a=Math.min(e.length,n.length),s=-1,u=0;u<a;++u){var l=t[u];if(l!==n[u])return 0>o(e[u],r[u])?e.substr(0,u)+r[u]+r.substr(u+1):0>o(e[u],n[u])?e.substr(0,u)+n[u]+r.substr(u+1):0<=s?e.substr(0,s)+t[s]+r.substr(s+1):null;0>o(e[u],l)&&(s=u)}return a<n.length&&"next"===i?e+r.substr(e.length):a<e.length&&"prev"===i?e.substr(0,r.length):s<0?null:e.substr(0,s)+n[s]+r.substr(s+1)}(o,p,s[m],u[m],a,l);null===y&&null===h?d=m+1:(null===h||0<a(h,y))&&(h=y)}return r(null!==h?function(){e.continue(h+c)}:n),!1}),e}function tg(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function tO(e){return{type:1,lower:e,upper:e}}var tw=(Object.defineProperty(tx.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),tx.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?tb(this):new this.Collection(this,function(){return tg(e,t,!r,!n)})}catch(e){return ty(this,eQ)}},tx.prototype.equals=function(e){return null==e?ty(this,eQ):new this.Collection(this,function(){return tO(e)})},tx.prototype.above=function(e){return null==e?ty(this,eQ):new this.Collection(this,function(){return tg(e,void 0,!0)})},tx.prototype.aboveOrEqual=function(e){return null==e?ty(this,eQ):new this.Collection(this,function(){return tg(e,void 0,!1)})},tx.prototype.below=function(e){return null==e?ty(this,eQ):new this.Collection(this,function(){return tg(void 0,e,!1,!0)})},tx.prototype.belowOrEqual=function(e){return null==e?ty(this,eQ):new this.Collection(this,function(){return tg(void 0,e)})},tx.prototype.startsWith=function(e){return"string"!=typeof e?ty(this,eG):this.between(e,e+eY,!0,!0)},tx.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):tv(this,function(e,t){return 0===e.indexOf(t[0])},[e],eY)},tx.prototype.equalsIgnoreCase=function(e){return tv(this,function(e,t){return e===t[0]},[e],"")},tx.prototype.anyOfIgnoreCase=function(){var e=$.apply(C,arguments);return 0===e.length?tb(this):tv(this,function(e,t){return -1!==t.indexOf(e)},e,"")},tx.prototype.startsWithAnyOfIgnoreCase=function(){var e=$.apply(C,arguments);return 0===e.length?tb(this):tv(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,eY)},tx.prototype.anyOf=function(){var e=this,t=$.apply(C,arguments),r=this._cmp;try{t.sort(r)}catch(e){return ty(this,eQ)}if(0===t.length)return tb(this);var n=new this.Collection(this,function(){return tg(t[0],t[t.length-1])});n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var o=0;return n._addAlgorithm(function(e,n,i){for(var a=e.key;0<r(a,t[o]);)if(++o===t.length)return n(i),!1;return 0===r(a,t[o])||(n(function(){e.continue(t[o])}),!1)}),n},tx.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},tx.prototype.noneOf=function(){var e=$.apply(C,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return ty(this,eQ)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},tx.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,o=this._ascending,i=this._descending,a=this._min,s=this._max;if(0===e.length)return tb(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&0>=o(e[0],e[1])}))return ty(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var u,l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,f=o;function p(e,t){return f(e[0],t[0])}try{(u=e.reduce(function(e,t){for(var r=0,o=e.length;r<o;++r){var i=e[r];if(0>n(t[0],i[1])&&0<n(t[1],i[0])){i[0]=a(i[0],t[0]),i[1]=s(i[1],t[1]);break}}return r===o&&e.push(t),e},[])).sort(p)}catch(e){return ty(this,eQ)}var d=0,h=c?function(e){return 0<o(e,u[d][1])}:function(e){return 0<=o(e,u[d][1])},m=l?function(e){return 0<i(e,u[d][0])}:function(e){return 0<=i(e,u[d][0])},y=h,e=new this.Collection(this,function(){return tg(u[0][0],u[u.length-1][1],!l,!c)});return e._ondirectionchange=function(e){f="next"===e?(y=h,o):(y=m,i),u.sort(p)},e._addAlgorithm(function(e,t,n){for(var i=e.key;y(i);)if(++d===u.length)return t(n),!1;return!h(i)&&!m(i)||(0===r._cmp(i,u[d][1])||0===r._cmp(i,u[d][0])||t(function(){f===o?e.continue(u[d][0]):e.continue(u[d][1])}),!1)}),e},tx.prototype.startsWithAnyOf=function(){var e=$.apply(C,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?tb(this):this.inAnyRange(e.map(function(e){return[e,e+eY]})):ty(this,"startsWithAnyOf() only works with strings")},tx);function tx(){}function tj(e){return eN(function(t){return t_(t),e(t.target.error),!1})}function t_(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var tP="storagemutated",tS="x-storagemutated-1",tD=te(null,tP),tk=(tM.prototype._lock=function(){return v(!eh.global),++this._reculock,1!==this._reculock||eh.global||(eh.lockOwnerFor=this),this},tM.prototype._unlock=function(){if(v(!eh.global),0==--this._reculock)for(eh.global||(eh.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{ez(e[1],e[0])}catch(e){}}return this},tM.prototype._locked=function(){return this._reculock&&eh.lockOwnerFor!==this},tM.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new K.DatabaseClosed(n);case"MissingAPIError":throw new K.MissingAPI(n.message,n);default:throw new K.OpenFailed(n)}if(!this.active)throw new K.TransactionInactive;return v(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=eN(function(r){t_(r),t._reject(e.error)}),e.onabort=eN(function(r){t_(r),t.active&&t._reject(new K.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=eN(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&tD.storagemutated.fire(e.mutatedParts)}),this},tM.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return eH(new K.ReadOnly("Transaction is readonly"));if(!this.active)return eH(new K.TransactionInactive);if(this._locked())return new ev(function(o,i){n._blockedFuncs.push([function(){n._promise(e,t,r).then(o,i)},eh])});if(r)return eR(function(){var e=new ev(function(e,r){n._lock();var o=t(e,r,n);o&&o.then&&o.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var o=new ev(function(e,r){var o=t(e,r,n);o&&o.then&&o.then(e,r)});return o._lib=!0,o},tM.prototype._root=function(){return this.parent?this.parent._root():this},tM.prototype.waitFor=function(e){var t,r=this._root(),n=ev.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return n}):(r._waitingFor=n,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}());var o=r._waitingFor;return new ev(function(e,t){n.then(function(t){return r._waitingQueue.push(eN(e.bind(null,t)))},function(e){return r._waitingQueue.push(eN(t.bind(null,e)))}).finally(function(){r._waitingFor===o&&(r._waitingFor=null)})})},tM.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))},tM.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];var r=this.schema[e];if(!r)throw new K.NotFound("Table "+e+" not part of transaction");return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r},tM);function tM(){}function tN(e,t,r,n,o,i,a){return{name:e,keyPath:t,unique:r,multi:n,auto:o,compound:i,src:(r&&!a?"&":"")+(n?"*":"")+(o?"++":"")+tE(t)}}function tE(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function tA(e,t,r){var n;return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},r.reduce(function(e,t,r){return(r=n(t,r))&&(e[r[0]]=r[1]),e},{}))}}var tT=function(e){try{return e.only([[]]),tT=function(){return[[]]},[[]]}catch(e){return tT=function(){return eY},eY}};function tC(e){return null==e?function(){}:"string"==typeof e?1===e.split(".").length?function(t){return t[e]}:function(t){return O(t,e)}:function(t){return O(t,e)}}function t$(e){return[].slice.call(e)}var tI=0;function tR(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function tF(e,r){var n,o,a,s,u=r.db,r=(n=e._middlewares,o=e._deps,a=r,s=o.IDBKeyRange,o.indexedDB,{dbcore:(a=function(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,o=e.lowerOpen,e=e.upperOpen;return void 0===r?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(r,!!o):t.bound(r,n,!!o,!!e)}var o,a,s=(o=r,a=t$(e.objectStoreNames),{schema:{name:e.name,tables:a.map(function(e){return o.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,n=i(t),o={},r={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:tC(t)},indexes:t$(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry,e=e.keyPath,n={name:t,compound:i(e),keyPath:e,unique:r,multiEntry:n,extractKey:tC(e)};return o[tR(e)]=n}),getIndexByKeyPath:function(e){return o[tR(e)]}};return o[":id"]=r.primaryKey,null!=t&&(o[tR(t)]=r.primaryKey),r})},hasGetAll:0<a.length&&"getAll"in o.objectStore(a[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),r=s.schema,u=s.hasGetAll,s=r.tables.map(function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var r=e.trans,o=e.type,i=e.keys,a=e.values,s=e.range;return new Promise(function(e,u){e=eN(e);var l=r.objectStore(t),c=null==l.keyPath,f="put"===o||"add"===o;if(!f&&"delete"!==o&&"deleteRange"!==o)throw Error("Invalid operation type: "+o);var p,d=(i||a||{length:1}).length;if(i&&a&&i.length!==a.length)throw Error("Given keys array must have same length as given values array.");if(0===d)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function h(e){++b,t_(e)}var m=[],y=[],b=0;if("deleteRange"===o){if(4===s.type)return e({numFailures:b,failures:y,results:[],lastResult:void 0});3===s.type?m.push(p=l.clear()):m.push(p=l.delete(n(s)))}else{var c=f?c?[a,i]:[a,null]:[i,null],v=c[0],g=c[1];if(f)for(var O=0;O<d;++O)m.push(p=g&&void 0!==g[O]?l[o](v[O],g[O]):l[o](v[O])),p.onerror=h;else for(O=0;O<d;++O)m.push(p=l[o](v[O])),p.onerror=h}function w(t){t=t.target.result,m.forEach(function(e,t){return null!=e.error&&(y[t]=e.error)}),e({numFailures:b,failures:y,results:"delete"===o?i:m.map(function(e){return e.result}),lastResult:t})}p.onerror=function(e){h(e),w(e)},p.onsuccess=w})},getMany:function(e){var r=e.trans,n=e.keys;return new Promise(function(e,o){e=eN(e);for(var i,a=r.objectStore(t),s=n.length,u=Array(s),l=0,c=0,f=function(t){u[(t=t.target)._pos]=t.result,++c===l&&e(u)},p=tj(o),d=0;d<s;++d)null!=n[d]&&((i=a.get(n[d]))._pos=d,i.onsuccess=f,i.onerror=p,++l);0===l&&e(u)})},get:function(e){var r=e.trans,n=e.key;return new Promise(function(e,o){e=eN(e);var i=r.objectStore(t).get(n);i.onsuccess=function(t){return e(t.target.result)},i.onerror=tj(o)})},query:function(e){return new Promise(function(r,o){r=eN(r);var i,a,s,l=e.trans,c=e.values,f=e.limit,p=e.query,d=f===1/0?void 0:f,h=p.index,p=p.range,l=l.objectStore(t),h=h.isPrimaryKey?l:l.index(h.name),p=n(p);if(0===f)return r({result:[]});u?((d=c?h.getAll(p,d):h.getAllKeys(p,d)).onsuccess=function(e){return r({result:e.target.result})},d.onerror=tj(o)):(i=0,a=!c&&"openKeyCursor"in h?h.openKeyCursor(p):h.openCursor(p),s=[],a.onsuccess=function(e){var t=a.result;return t?(s.push(c?t.value:t.primaryKey),++i===f?r({result:s}):void t.continue()):r({result:s})},a.onerror=tj(o))})},openCursor:function(e){var r=e.trans,o=e.values,i=e.query,a=e.reverse,s=e.unique;return new Promise(function(e,u){e=eN(e);var l=i.index,c=i.range,f=r.objectStore(t),f=l.isPrimaryKey?f:f.index(l.name),l=a?s?"prevunique":"prev":s?"nextunique":"next",p=!o&&"openKeyCursor"in f?f.openKeyCursor(n(c),l):f.openCursor(n(c),l);p.onerror=tj(u),p.onsuccess=eN(function(t){var n,o,i,a,s=p.result;s?(s.___id=++tI,s.done=!1,n=s.continue.bind(s),o=(o=s.continuePrimaryKey)&&o.bind(s),i=s.advance.bind(s),a=function(){throw Error("Cursor not stopped")},s.trans=r,s.stop=s.continue=s.continuePrimaryKey=s.advance=function(){throw Error("Cursor not started")},s.fail=eN(u),s.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},s.start=function(e){function t(){if(p.result)try{e()}catch(e){s.fail(e)}else s.done=!0,s.start=function(){throw Error("Cursor behind last entry")},s.stop()}var r=new Promise(function(e,t){e=eN(e),p.onerror=tj(t),s.fail=t,s.stop=function(t){s.stop=s.continue=s.continuePrimaryKey=s.advance=a,e(t)}});return p.onsuccess=eN(function(e){p.onsuccess=t,t()}),s.continue=n,s.continuePrimaryKey=o,s.advance=i,t(),r},e(s)):e(null)},u)})},count:function(e){var r=e.query,o=e.trans,i=r.index,a=r.range;return new Promise(function(e,r){var s=o.objectStore(t),u=i.isPrimaryKey?s:s.index(i.name),s=n(a),u=s?u.count(s):u.count();u.onsuccess=eN(function(t){return e(t.target.result)}),u.onerror=tj(r)})}}}),l={};return s.forEach(function(e){return l[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw Error("Table '".concat(e,"' not found"));return l[e]},MIN_KEY:-1/0,MAX_KEY:tT(t),schema:r}}(u,s,a),n.dbcore.reduce(function(e,r){return r=r.create,t(t({},e),r(e))},a))});e.core=r.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function tB(e,t,r,n){r.forEach(function(r){var o=n[r];t.forEach(function(t){var n=function e(t,r){return h(t,r)||(t=s(t))&&e(t,r)}(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?p(t,r,{get:function(){return this.table(r)},set:function(e){f(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,o))})})}function tL(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function tq(e,t){return e._cfg.version-t._cfg.version}function tV(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],i=t[r];if(o){var a={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto)a.recreate=!0,n.change.push(a);else{var s=o.idxByName,u=i.idxByName,l=void 0;for(l in s)u[l]||a.del.push(l);for(l in u){var c=s[l],f=u[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(0<a.del.length||0<a.add.length||0<a.change.length)&&n.change.push(a)}}else n.add.push([r,i])}return n}function tU(e,t,r,n){var o=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){return tK(o,e)}),o}function tz(e,t){o(e).forEach(function(r){t.db.objectStoreNames.contains(r)||(en&&console.debug("Dexie: Creating missing table",r),tU(t,r,e[r].primKey,e[r].indexes))})}function tK(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function tW(e,t,r){var n={};return y(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),o=tN(tE(u=t.keyPath),u||"",!0,!1,!!t.autoIncrement,u&&"string"!=typeof u,!0),i=[],a=0;a<t.indexNames.length;++a){var s=t.index(t.indexNames[a]),u=s.keyPath,s=tN(s.name,u,!!s.unique,!!s.multiEntry,!1,u&&"string"!=typeof u,!1);i.push(s)}n[e]=tA(e,o,i)}),n}function tH(e,t,r){for(var o=r.db.objectStoreNames,i=0;i<o.length;++i){var a=o[i],s=r.objectStore(a);e._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var l=s.indexNames[u],c=s.index(l).keyPath,f="string"==typeof c?c:"["+y(c).join("+")+"]";!t[a]||(c=t[a].idxByName[f])&&(c.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=c)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function tY(e){return e.split(",").map(function(e,t){var r=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return tN(r,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),i(n),0===t)})}var tQ=(tG.prototype._parseStoresSpec=function(e,t){o(e).forEach(function(r){if(null!==e[r]){var n=tY(e[r]),o=n.shift();if(o.unique=!0,o.multi)throw new K.Schema("Primary key cannot be multi-valued");n.forEach(function(e){if(e.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")}),t[r]=tA(r,o,n)}})},tG.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;var e=t._versions,r={},n={};return e.forEach(function(e){a(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,tL(t,[t._allTables,t,t.Transaction.prototype]),tB(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],o(n),n),t._storeNames=o(n),this},tG.prototype.upgrade=function(e){return this._cfg.contentUpgrade=er(this._cfg.contentUpgrade||Y,e),this},tG);function tG(){}function tX(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new rj(eZ,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function tZ(e){return e&&"function"==typeof e.databases}function tJ(e){return eR(function(){return eh.letThrough=!0,e()})}function t0(e){return!("from"in e)}var t1=function(e,t){if(!this){var r=new t1;return e&&"d"in e&&a(r,e),r}a(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function t2(e,t,r){var n=e9(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(t0(e))return a(e,{from:t,to:r,d:1});var o=e.l,n=e.r;if(0>e9(r,e.from))return o?t2(o,t,r):e.l={from:t,to:r,d:1,l:null,r:null},t6(e);if(0<e9(t,e.to))return n?t2(n,t,r):e.r={from:t,to:r,d:1,l:null,r:null},t6(e);0>e9(t,e.from)&&(e.from=t,e.l=null,e.d=n?n.d+1:1),0<e9(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,o&&!e.l&&t3(e,o),n&&r&&t3(e,n)}}function t3(e,t){t0(t)||function e(t,r){var n=r.from,o=r.to,i=r.l,r=r.r;t2(t,n,o),i&&e(t,i),r&&e(t,r)}(e,t)}function t5(e,t){var r=t9(t),n=r.next();if(n.done)return!1;for(var o=n.value,i=t9(e),a=i.next(o.from),s=a.value;!n.done&&!a.done;){if(0>=e9(s.from,o.to)&&0<=e9(s.to,o.from))return!0;0>e9(o.from,s.from)?o=(n=r.next(s.from)).value:s=(a=i.next(o.from)).value}return!1}function t9(e){var t=t0(e)?null:{s:0,n:e};return{next:function(e){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&0>e9(e,t.n.from);)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||0>=e9(e,t.n.to))return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function t6(e){var r,n,o=((null===(r=e.r)||void 0===r?void 0:r.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=1<o?"r":o<-1?"l":"";i&&(r="r"==i?"l":"r",n=t({},e),o=e[i],e.from=o.from,e.to=o.to,e[i]=o[i],n[i]=o[r],(e[r]=n).d=t4(n)),e.d=t4(e)}function t4(e){var t=e.r,e=e.l;return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function t8(e,t){return o(t).forEach(function(r){e[r]?t3(e[r],t[r]):e[r]=function e(t){var r,n,o={};for(r in t)l(t,r)&&(n=t[r],o[r]=!n||"object"!=typeof n||S.has(n.constructor)?n:e(n));return o}(t[r])}),e}function t7(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&t5(t[r],e[r])})}c(t1.prototype,((F={add:function(e){return t3(this,e),this},addKey:function(e){return t2(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return t2(t,e,e)}),this},hasKey:function(e){var t=t9(this).next(e).value;return t&&0>=e9(t.from,e)&&0<=e9(t.to,e)}})[E]=function(){return t9(this)},F));var re={},rt={},rr=!1;function rn(e){t8(rt,e),rr||(rr=!0,setTimeout(function(){rr=!1,ro(rt,(rt={},!1))},0))}function ro(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var n=0,o=Object.values(re);n<o.length;n++)ri(a=o[n],e,r,t);else for(var i in e){var a,s=/^idb\:\/\/(.*)\/(.*)\//.exec(i);s&&(i=s[1],s=s[2],(a=re["idb://".concat(i,"/").concat(s)])&&ri(a,e,r,t))}r.forEach(function(e){return e()})}function ri(e,t,r,n){for(var o=[],i=0,a=Object.entries(e.queries.query);i<a.length;i++){for(var s=a[i],u=s[0],l=[],c=0,f=s[1];c<f.length;c++){var p=f[c];t7(t,p.obsSet)?p.subscribers.forEach(function(e){return r.add(e)}):n&&l.push(p)}n&&o.push([u,l])}if(n)for(var d=0;d<o.length;d++){var h=o[d],u=h[0],l=h[1];e.queries.query[u]=l}}function ra(e){function t(t){return e.next(t)}var r=o(t),n=o(function(t){return e.throw(t)});function o(e){return function(t){var o=e(t),t=o.value;return o.done?t:t&&"function"==typeof t.then?t.then(r,n):i(t)?Promise.all(t).then(r,n):r(t)}}return o(t)()}function rs(e,t,r){for(var n=i(e)?e.slice():[e],o=0;o<r;++o)n.push(t);return n}var ru={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(r){var n=e.table(r),o=n.schema,i={},a=[];function s(e,r,n){var o=tR(e),u=i[o]=i[o]||[],l=null==e?0:"string"==typeof e?1:e.length,c=0<r,c=t(t({},n),{name:c?"".concat(o,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:c,keyTail:r,keyLength:l,extractKey:tC(e),unique:!c&&n.unique});return u.push(c),c.isPrimaryKey||a.push(c),1<l&&s(2===l?e[0]:e.slice(0,l-1),r+1,n),u.sort(function(e,t){return e.keyTail-t.keyTail}),c}r=s(o.primaryKey.keyPath,0,o.primaryKey),i[":id"]=[r];for(var u=0,l=o.indexes;u<l.length;u++){var c=l[u];s(c.keyPath,0,c)}function f(r){var n,o=r.query.index;return o.isVirtual?t(t({},r),{query:{index:o.lowLevelIndex,range:(n=r.query.range,o=o.keyTail,{type:1===n.type?2:n.type,lower:rs(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,o),lowerOpen:!0,upper:rs(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,o),upperOpen:!0})}}):r}return t(t({},n),{schema:t(t({},o),{primaryKey:r,indexes:a,getIndexByKeyPath:function(e){return(e=i[tR(e)])&&e[0]}}),count:function(e){return n.count(f(e))},query:function(e){return n.query(f(e))},openCursor:function(t){var r=t.query.index,o=r.keyTail,i=r.isVirtual,a=r.keyLength;return i?n.openCursor(f(t)).then(function(r){return r&&Object.create(r,{continue:{value:function(n){null!=n?r.continue(rs(n,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?r.continue(r.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):r.continue()}},continuePrimaryKey:{value:function(t,n){r.continuePrimaryKey(rs(t,e.MAX_KEY,o),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return r.value}}})}):n.openCursor(t)}})}})}};function rl(e,t,r,n){return r=r||{},n=n||"",o(e).forEach(function(o){var i,a,s;l(t,o)?(i=e[o],a=t[o],"object"==typeof i&&"object"==typeof a&&i&&a?(s=N(i))!==N(a)?r[n+o]=t[o]:"Object"===s?rl(i,a,r,n+o+"."):i!==a&&(r[n+o]=t[o]):i!==a&&(r[n+o]=t[o])):r[n+o]=void 0}),o(t).forEach(function(o){l(e,o)||(r[n+o]=t[o])}),r}function rc(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var rf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var o=e.table(n),i=o.schema.primaryKey;return t(t({},o),{mutate:function(e){var a=eh.trans,s=a.table(n).hook,u=s.deleting,c=s.creating,f=s.updating;switch(e.type){case"add":if(c.fire===Y)break;return a._promise("readwrite",function(){return p(e)},!0);case"put":if(c.fire===Y&&f.fire===Y)break;return a._promise("readwrite",function(){return p(e)},!0);case"delete":if(u.fire===Y)break;return a._promise("readwrite",function(){return p(e)},!0);case"deleteRange":if(u.fire===Y)break;return a._promise("readwrite",function(){return function e(r,n,a){return o.query({trans:r,values:!1,query:{index:i,range:n},limit:a}).then(function(o){var i=o.result;return p({type:"delete",keys:i,trans:r}).then(function(o){return 0<o.numFailures?Promise.reject(o.failures[0]):i.length<a?{failures:[],numFailures:0,lastResult:void 0}:e(r,t(t({},n),{lower:i[i.length-1],lowerOpen:!0}),a)})})}(e.trans,e.range,1e4)},!0)}return o.mutate(e);function p(e){var n,a=eh.trans,s=e.keys||rc(i,e);if(!s)throw Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:s}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),("add"===(n=e).type?Promise.resolve([]):o.getMany({trans:n.trans,keys:s,cache:"immutable"})).then(function(t){var r=s.map(function(r,n){var o,s,p,d=t[n],h={onerror:null,onsuccess:null};return"delete"===e.type?u.fire.call(h,r,d,a):"add"===e.type||void 0===d?(o=c.fire.call(h,r,e.values[n],a),null==r&&null!=o&&(e.keys[n]=r=o,i.outbound||w(e.values[n],i.keyPath,r))):(o=rl(d,e.values[n]),(s=f.fire.call(h,o,r,d,a))&&(p=e.values[n],Object.keys(s).forEach(function(e){l(p,e)?p[e]=s[e]:w(p,e,s[e])}))),h});return o.mutate(e).then(function(n){for(var o=n.failures,i=n.results,a=n.numFailures,n=n.lastResult,u=0;u<s.length;++u){var l=(i||s)[u],c=r[u];null==l?c.onerror&&c.onerror(o[u]):c.onsuccess&&c.onsuccess("put"===e.type&&t[u]?e.values[u]:l)}return{failures:o,results:i,numFailures:a,lastResult:n}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function rp(e,t,r){try{if(!t||t.keys.length<e.length)return null;for(var n=[],o=0,i=0;o<t.keys.length&&i<e.length;++o)0===e9(t.keys[o],e[i])&&(n.push(r?k(t.values[o]):t.values[o]),++i);return n.length===e.length?n:null}catch(e){return null}}var rd={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var n=e.table(r);return t(t({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=rp(e.keys,e.trans._cache,"clone"===e.cache);return t?ev.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?k(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function rh(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function rm(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ry={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,n=new t1(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,r,n){if(eh.subscr&&"readonly"!==r)throw new K.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(eh.querier));return e.transaction(t,r,n)},table:function(a){var s=e.table(a),u=s.schema,l=u.primaryKey,c=u.indexes,f=l.extractKey,p=l.outbound,d=l.autoIncrement&&c.filter(function(e){return e.compound&&e.keyPath.includes(l.keyPath)}),h=t(t({},s),{mutate:function(t){function o(e){return h[e="idb://".concat(r,"/").concat(a,"/").concat(e)]||(h[e]=new t1)}var c,f,p=t.trans,h=t.mutatedParts||(t.mutatedParts={}),m=o(""),y=o(":dels"),b=t.type,v="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[rc(l,t).filter(function(e){return e}),t.values]:[],g=v[0],O=v[1],v=t.trans._cache;return i(g)?(m.addKeys(g),(v="delete"===b||g.length===O.length?rp(g,v):null)||y.addKeys(g),(v||O)&&(c=v,f=O,u.indexes.forEach(function(e){var t=o(e.name||"");function r(t){return null!=t?e.extractKey(t):null}function n(r){return e.multiEntry&&i(r)?r.forEach(function(e){return t.addKey(e)}):t.addKey(r)}(c||f).forEach(function(e,t){var o=c&&r(c[t]),t=f&&r(f[t]);0!==e9(o,t)&&(null!=o&&n(o),null!=t&&n(t))})}))):g?(O={from:null!==(O=g.lower)&&void 0!==O?O:e.MIN_KEY,to:null!==(O=g.upper)&&void 0!==O?O:e.MAX_KEY},y.add(O),m.add(O)):(m.add(n),y.add(n),u.indexes.forEach(function(e){return o(e.name).add(n)})),s.mutate(t).then(function(e){return!g||"add"!==t.type&&"put"!==t.type||(m.addKeys(e.results),d&&d.forEach(function(r){for(var n=t.values.map(function(e){return r.extractKey(e)}),i=r.keyPath.findIndex(function(e){return e===l.keyPath}),a=0,s=e.results.length;a<s;++a)n[a][i]=e.results[a];o(r.name).addKeys(n)})),p.mutatedParts=t8(p.mutatedParts||{},h),e})}}),c=function(t){var r=t.query,t=r.index,r=r.range;return[t,new t1(null!==(t=r.lower)&&void 0!==t?t:e.MIN_KEY,null!==(r=r.upper)&&void 0!==r?r:e.MAX_KEY)]},m={get:function(e){return[l,new t1(e.key)]},getMany:function(e){return[l,(new t1).addKeys(e.keys)]},count:c,query:c,openCursor:c};return o(m).forEach(function(e){h[e]=function(o){var i=eh.subscr,u=!!i,l=rh(eh,s)&&rm(e,o)?o.obsSet={}:i;if(u){var c=function(e){return l[e="idb://".concat(r,"/").concat(a,"/").concat(e)]||(l[e]=new t1)},d=c(""),h=c(":dels"),i=m[e](o),u=i[0],i=i[1];if(("query"===e&&u.isPrimaryKey&&!o.values?h:c(u.name||"")).add(i),!u.isPrimaryKey){if("count"!==e){var y="query"===e&&p&&o.values&&s.query(t(t({},o),{values:!1}));return s[e].apply(this,arguments).then(function(t){if("query"===e){if(p&&o.values)return y.then(function(e){return e=e.result,d.addKeys(e),t});var r=o.values?t.result.map(f):t.result;(o.values?d:h).addKeys(r)}else if("openCursor"===e){var n=o.values;return t&&Object.create(t,{key:{get:function(){return h.addKey(t.primaryKey),t.key}},primaryKey:{get:function(){var e=t.primaryKey;return h.addKey(e),e}},value:{get:function(){return n&&d.addKey(t.primaryKey),t.value}}})}return t})}h.add(n)}}return s[e].apply(this,arguments)}}),h}})}};function rb(e,r,n){if(0===n.numFailures)return r;if("deleteRange"===r.type)return null;var o=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return n.numFailures===o?null:(i((r=t({},r)).keys)&&(r.keys=r.keys.filter(function(e,t){return!(t in n.failures)})),"values"in r&&i(r.values)&&(r.values=r.values.filter(function(e,t){return!(t in n.failures)})),r)}function rv(e,t){return(void 0===t.lower||(t.lowerOpen?0<e9(e,t.lower):0<=e9(e,t.lower)))&&(void 0===t.upper||(t.upperOpen?0>e9(e,t.upper):0>=e9(e,t.upper)))}function rg(e,t,r,n,o,a){if(!r||0===r.length)return e;var s=t.query.index,u=s.multiEntry,l=t.query.range,c=n.schema.primaryKey.extractKey,f=s.extractKey,p=(s.lowLevelIndex||s).extractKey,r=r.reduce(function(e,r){var n=e,o=[];if("add"===r.type||"put"===r.type)for(var a=new t1,s=r.values.length-1;0<=s;--s){var p,d=r.values[s],h=c(d);a.hasKey(h)||(p=f(d),(u&&i(p)?p.some(function(e){return rv(e,l)}):rv(p,l))&&(a.addKey(h),o.push(d)))}switch(r.type){case"add":var m=(new t1).addKeys(t.values?e.map(function(e){return c(e)}):e),n=e.concat(t.values?o.filter(function(e){return e=c(e),!m.hasKey(e)&&(m.addKey(e),!0)}):o.map(function(e){return c(e)}).filter(function(e){return!m.hasKey(e)&&(m.addKey(e),!0)}));break;case"put":var y=(new t1).addKeys(r.values.map(function(e){return c(e)}));n=e.filter(function(e){return!y.hasKey(t.values?c(e):e)}).concat(t.values?o:o.map(function(e){return c(e)}));break;case"delete":var b=(new t1).addKeys(r.keys);n=e.filter(function(e){return!b.hasKey(t.values?c(e):e)});break;case"deleteRange":var v=r.range;n=e.filter(function(e){return!rv(c(e),v)})}return n},e);return r===e?e:(r.sort(function(e,t){return e9(p(e),p(t))||e9(c(e),c(t))}),t.limit&&t.limit<1/0&&(r.length>t.limit?r.length=t.limit:e.length===t.limit&&r.length<t.limit&&(o.dirty=!0)),a?Object.freeze(r):r)}function rO(e,t){return 0===e9(e.lower,t.lower)&&0===e9(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var rw={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return t(t({},e),{transaction:function(t,n,o){var i,a,s=e.transaction(t,n,o);return"readwrite"===n&&(a=(i=new AbortController).signal,o=function(o){return function(){if(i.abort(),"readwrite"===n){for(var a=new Set,u=0;u<t.length;u++){var l=t[u],c=re["idb://".concat(r,"/").concat(l)];if(c){var f=e.table(l),p=c.optimisticOps.filter(function(e){return e.trans===s});if(s._explicit&&o&&s.mutatedParts)for(var d=0,h=Object.values(c.queries.query);d<h.length;d++)for(var m=0,y=(g=h[d]).slice();m<y.length;m++)t7((O=y[m]).obsSet,s.mutatedParts)&&(T(g,O),O.subscribers.forEach(function(e){return a.add(e)}));else if(0<p.length){c.optimisticOps=c.optimisticOps.filter(function(e){return e.trans!==s});for(var b=0,v=Object.values(c.queries.query);b<v.length;b++)for(var g,O,w,x=0,j=(g=v[b]).slice();x<j.length;x++)null!=(O=j[x]).res&&s.mutatedParts&&(o&&!O.dirty?(w=Object.isFrozen(O.res),w=rg(O.res,O.req,p,f,O,w),O.dirty?(T(g,O),O.subscribers.forEach(function(e){return a.add(e)})):w!==O.res&&(O.res=w,O.promise=ev.resolve({result:w}))):(O.dirty&&T(g,O),O.subscribers.forEach(function(e){return a.add(e)})))}}}a.forEach(function(e){return e()})}}},s.addEventListener("abort",o(!1),{signal:a}),s.addEventListener("error",o(!1),{signal:a}),s.addEventListener("complete",o(!0),{signal:a})),s},table:function(n){var o=e.table(n),i=o.schema.primaryKey;return t(t({},o),{mutate:function(e){var a=eh.trans;if(i.outbound||"disabled"===a.db._options.cache||a.explicit||"readwrite"!==a.idbtrans.mode)return o.mutate(e);var s=re["idb://".concat(r,"/").concat(n)];return s?(a=o.mutate(e),("add"===e.type||"put"===e.type)&&(50<=e.values.length||rc(i,e).some(function(e){return null==e}))?a.then(function(r){var n=rb(0,t(t({},e),{values:e.values.map(function(e,n){var o;return r.failures[n]||w(e=null!==(o=i.keyPath)&&void 0!==o&&o.includes(".")?k(e):t({},e),i.keyPath,r.results[n]),e})}),r);s.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&rn(e.mutatedParts)})}):(s.optimisticOps.push(e),e.mutatedParts&&rn(e.mutatedParts),a.then(function(t){0<t.numFailures&&(T(s.optimisticOps,e),(t=rb(0,e,t))&&s.optimisticOps.push(t),e.mutatedParts&&rn(e.mutatedParts))}),a.catch(function(){T(s.optimisticOps,e),e.mutatedParts&&rn(e.mutatedParts)})),a):o.mutate(e)},query:function(e){if(!rh(eh,o)||!rm("query",e))return o.query(e);var t,i,a="immutable"===(null===(c=eh.trans)||void 0===c?void 0:c.db._options.cache),s=eh,u=s.requery,l=s.signal,c=function(e,t,r,n){var o=re["idb://".concat(e,"/").concat(t)];if(!o)return[];if(!(t=o.queries[r]))return[null,!1,o,null];var i=t[(n.query?n.query.index.name:null)||""];if(!i)return[null,!1,o,null];switch(r){case"query":var a=i.find(function(e){return e.req.limit===n.limit&&e.req.values===n.values&&rO(e.req.query.range,n.query.range)});return a?[a,!0,o,i]:[i.find(function(e){var t,r;return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&(t=e.req.query.range,r=n.query.range,0>=function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=e9(e,t))){if(r&&n)return 0;if(r)return 1;if(n)return -1}return t}(t.lower,r.lower,t.lowerOpen,r.lowerOpen)&&0<=function(e,t,r,n){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return -1;if(0===(t=e9(e,t))){if(r&&n)return 0;if(r)return -1;if(n)return 1}return t}(t.upper,r.upper,t.upperOpen,r.upperOpen))}),!1,o,i];case"count":return[a=i.find(function(e){return rO(e.req.query.range,n.query.range)}),!!a,o,i]}}(r,n,"query",e),f=c[0],s=c[1],p=c[2],d=c[3];return f&&s?f.obsSet=e.obsSet:(s=o.query(e).then(function(e){var t=e.result;if(f&&(f.res=t),a){for(var r=0,n=t.length;r<n;++r)Object.freeze(t[r]);Object.freeze(t)}else e.result=k(t);return e}).catch(function(e){return d&&f&&T(d,f),Promise.reject(e)}),f={obsSet:e.obsSet,promise:s,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(f):(d=[f],(p=p||(re["idb://".concat(r,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),t=f,i=d,t.subscribers.add(u),l.addEventListener("abort",function(){t.subscribers.delete(u),0===t.subscribers.size&&setTimeout(function(){0===t.subscribers.size&&T(i,t)},3e3)}),f.promise.then(function(t){return{result:rg(t.result,e,null==p?void 0:p.optimisticOps,o,f,a)}})}})}})}};function rx(e,t){return new Proxy(e,{get:function(e,r,n){return"db"===r?t:Reflect.get(e,r,n)}})}var rj=(r_.prototype.version=function(e){if(isNaN(e)||e<.1)throw new K.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(tq),r.stores({}),this._state.autoSchema=!1,r)},r_.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||eh.letThrough||this._vip)?e():new ev(function(e,r){if(t._state.openComplete)return r(new K.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new K.DatabaseClosed);t.open().catch(Y)}t._state.dbReadyPromise.then(e,r)}).then(e)},r_.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,o=e.name;return o&&this.unuse({stack:t,name:o}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:r,level:null==n?10:n,name:o}),e.sort(function(e,t){return e.level-t.level}),this},r_.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},r_.prototype.open=function(){var e=this;return ez(ed,function(){return function(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?eH(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,i=Math.round(10*e.verno),a=!1;function s(){if(t.openCanceller!==n)throw new K.DatabaseClosed("db.open() was cancelled")}var u,l=t.dbReadyResolve,c=null,f=!1;return ev.race([n,("undefined"==typeof navigator?ev.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}u=setInterval(t,100),t()}).finally(function(){return clearInterval(u)}):Promise.resolve()).then(function n(){return new ev(function(u,l){if(s(),!r)throw new K.MissingAPI;var p=e.name,d=t.autoSchema||!i?r.open(p):r.open(p,i);if(!d)throw new K.MissingAPI;d.onerror=tj(l),d.onblocked=eN(e._fireOnBlocked),d.onupgradeneeded=eN(function(n){var i,s,u,h,m,y,b;c=d.transaction,t.autoSchema&&!e._options.allowEmptyDB?(d.onerror=t_,c.abort(),d.result.close(),(i=r.deleteDatabase(p)).onsuccess=i.onerror=eN(function(){l(new K.NoSuchDatabase("Database ".concat(p," doesnt exist")))})):(c.onerror=tj(l),f=(n=n.oldVersion>0x4000000000000000?0:n.oldVersion)<1,e.idbdb=d.result,a&&function(e,t){tz(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=tW(0,e.idbdb,t);tH(e,e._dbSchema,t);for(var n=0,o=tV(r,e._dbSchema).change;n<o.length;n++){var i=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(t){en&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),tK(r,t)})}(o[n]);if("object"==typeof i)return i.value}}(e,c),s=n/10,u=c,h=e._dbSchema,u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=tA("$meta",tY("")[0],[]),e._storeNames.push("$meta")),(m=e._createTransaction("readwrite",e._storeNames,h)).create(u),m._completion.catch(l),y=m._reject.bind(m),b=eh.transless||eh,eR(function(){return eh.trans=m,eh.transless=b,0!==s?(tF(e,u),(m.storeNames.includes("$meta")?m.table("$meta").get("version").then(function(e){return null!=e?e:s}):ev.resolve(s)).then(function(t){var r,n,i;return r=t,n=[],t=e._versions,i=e._dbSchema=tW(0,e.idbdb,u),0!==(t=t.filter(function(e){return e._cfg.version>=r})).length?(t.forEach(function(t){n.push(function(){var n=i,a=t._cfg.dbschema;tH(e,n,u),tH(e,a,u),i=e._dbSchema=a;var s=tV(n,a);s.add.forEach(function(e){tU(u,e[0],e[1].primKey,e[1].indexes)}),s.change.forEach(function(e){if(e.recreate)throw new K.Upgrade("Not yet support for changing primary key");var t=u.objectStore(e.name);e.add.forEach(function(e){return tK(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),tK(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var l=t._cfg.contentUpgrade;if(l&&t._cfg.version>r){tF(e,u),m._memoizedTables={};var c=x(a);s.del.forEach(function(e){c[e]=n[e]}),tL(e,[e.Transaction.prototype]),tB(e,[e.Transaction.prototype],o(c),c),m.schema=c;var f,p=I(l);return p&&eF(),s=ev.follow(function(){var e;(f=l(m))&&p&&(e=eB.bind(null,null),f.then(e,e))}),f&&"function"==typeof f.then?ev.resolve(f):s.then(function(){return f})}}),n.push(function(r){var n=t._cfg.dbschema;[].slice.call(r.db.objectStoreNames).forEach(function(e){return null==n[e]&&r.db.deleteObjectStore(e)}),tL(e,[e.Transaction.prototype]),tB(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),m.schema=e._dbSchema}),n.push(function(r){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===t._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return"$meta"!==e})):r.objectStore("$meta").put(t._cfg.version,"version"))})}),(function e(){return n.length?ev.resolve(n.shift()(m.idbtrans)).then(e):ev.resolve()})().then(function(){tz(i,u)})):ev.resolve()}).catch(y)):(o(h).forEach(function(e){tU(u,e,h[e].primKey,h[e].indexes)}),tF(e,u),void ev.follow(function(){return e.on.populate.fire(m)}).catch(y))}))},l),d.onsuccess=eN(function(){c=null;var r,s,l,h=e.idbdb=d.result,m=y(h.objectStoreNames);if(0<m.length)try{var b=h.transaction(1===m.length?m[0]:m,"readonly");if(t.autoSchema)r=h,s=b,e.verno=r.version/10,s=e._dbSchema=tW(0,r,s),e._storeNames=y(r.objectStoreNames,0),tB(e,[e._allTables],o(s),s);else if(tH(e,e._dbSchema,b),((l=tV(tW(0,(l=e).idbdb,b),l._dbSchema)).add.length||l.change.some(function(e){return e.add.length||e.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),h.close(),i=h.version+1,a=!0,u(n());tF(e,b)}catch(e){}eX.push(e),h.onversionchange=eN(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),h.onclose=eN(function(t){e.on("close").fire(t)}),f&&(l=e._deps,b=p,h=l.indexedDB,l=l.IDBKeyRange,tZ(h)||b===eZ||tX(h,l).put({name:b}).catch(Y)),u()},l)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),n();break;case"VersionError":if(0<i)return i=0,n()}return ev.reject(e)})})]).then(function(){return s(),t.onReadyBeingFired=[],ev.resolve(tJ(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(0<t.onReadyBeingFired.length){var n=t.onReadyBeingFired.reduce(er,Y);return t.onReadyBeingFired=[],ev.resolve(tJ(function(){return n(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{c&&c.abort()}catch(e){}return n===t.openCanceller&&e._close(),eH(r)}).finally(function(){t.openComplete=!0,l()}).then(function(){var t;return f&&(t={},e.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(n.name)]=new t1(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new t1(-1/0,[[[]]])}),tD(tP).fire(t),ro(t,!0)),e})}(e)})},r_.prototype._close=function(){var e=this._state,t=eX.indexOf(this);if(0<=t&&eX.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ev(function(t){e.dbReadyResolve=t}),e.openCanceller=new ev(function(t,r){e.cancelOpen=r}))},r_.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen,e=this._state;t?(e.isBeingOpened&&e.cancelOpen(new K.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new K.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},r_.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new ev(function(o,i){function a(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=eN(function(){var e,r,n;e=t._deps,r=t.name,n=e.indexedDB,e=e.IDBKeyRange,tZ(n)||r===eZ||tX(n,e).delete(r).catch(Y),o()}),r.onerror=tj(i),r.onblocked=t._fireOnBlocked}if(r)throw new K.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(a):a()})},r_.prototype.backendDB=function(){return this.idbdb},r_.prototype.isOpen=function(){return null!==this.idbdb},r_.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},r_.prototype.hasFailed=function(){return null!==this._state.dbOpenError},r_.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(r_.prototype,"tables",{get:function(){var e=this;return o(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),r_.prototype.transaction=function(){var e=(function(e,t,r){var n=arguments.length;if(n<2)throw new K.InvalidArgument("Too few arguments");for(var o=Array(n-1);--n;)o[n-1]=arguments[n];return r=o.pop(),[e,_(o),r]}).apply(this,arguments);return this._transaction.apply(this,e)},r_.prototype._transaction=function(e,t,r){var n=this,o=eh.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var i,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map(function(e){if(e=e instanceof n.Table?e.name:e,"string"!=typeof e)throw TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===eJ)i=eJ;else{if("rw"!=e&&e!=e0)throw new K.InvalidArgument("Invalid transaction mode: "+e);i=e0}if(o){if(o.mode===eJ&&i===e0){if(!s)throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&a.forEach(function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!s)throw new K.SubTransaction("Table "+e+" not included in parent transaction.");o=null}}),s&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,function(t,r){r(e)}):eH(e)}var u=(function e(t,r,n,o,i){return ev.resolve().then(function(){var a=eh.transless||eh,s=t._createTransaction(r,n,t._dbSchema,o);if(s.explicit=!0,a={trans:s,transless:a},o)s.idbtrans=o.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(o){return o.name===z.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,null,i)})):eH(o)}var u,l=I(i);return l&&eF(),a=ev.follow(function(){var e;(u=i.call(s,s))&&(l?(e=eB.bind(null,null),u.then(e,e)):"function"==typeof u.next&&"function"==typeof u.throw&&(u=ra(u)))},a),(u&&"function"==typeof u.then?ev.resolve(u).then(function(e){return s.active?e:eH(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):a.then(function(){return u})).then(function(e){return o&&s._resolve(),s._completion.then(function(){return e})}).catch(function(e){return s._reject(e),eH(e)})})}).bind(null,this,i,a,o,r);return o?o._promise(i,u,"lock"):eh.trans?ez(eh.transless,function(){return n._whenReady(u)}):this._whenReady(u)},r_.prototype.table=function(e){if(!l(this._allTables,e))throw new K.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},r_);function r_(e,r){var n=this;this._middlewares={},this.verno=0;var o=r_.dependencies;this._options=r=t({addons:r_.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},o=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,a,s,u,l,c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};c.dbReadyPromise=new ev(function(e){c.dbReadyResolve=e}),c.openCanceller=new ev(function(e,t){c.cancelOpen=t}),this._state=c,this.name=e,this.on=te(this,"populate","blocked","versionchange","close",{ready:[er,Y]}),this.on.ready.subscribe=b(this.on.ready.subscribe,function(e){return function(t,r){r_.vip(function(){var o=n._state;o.openComplete?(o.dbOpenError||ev.resolve().then(t),r&&e(t)):o.onReadyBeingFired?(o.onReadyBeingFired.push(t),r&&e(t)):(e(t),r||e(function e(){n.on.ready.unsubscribe(t),n.on.ready.unsubscribe(e)}))})}}),this.Collection=(i=this,tt(tf.prototype,function(e,t){this.db=i;var r=e2,n=null;if(t)try{r=t()}catch(e){n=e}var o=e._ctx,t=o.table,e=t.hook.reading.fire;this._ctx={table:t,index:o.index,isPrimKey:!o.index||t.schema.primKey.keyPath&&o.index===t.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:o.or,valueMapper:e!==Q?e:null}})),this.Table=(a=this,tt(e8.prototype,function(e,t,r){this.db=a,this._tx=r,this.name=e,this.schema=t,this.hook=a._allTables[e]?a._allTables[e].hook:te(null,{creating:[Z,Y],reading:[G,Q],updating:[ee,Y],deleting:[J,Y]})})),this.Transaction=(s=this,tt(tk.prototype,function(e,t,r,n,o){var i=this;this.db=s,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=te(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ev(function(e,t){i._resolve=e,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),eH(e)})})),this.Version=(u=this,tt(tQ.prototype,function(e){this.db=u,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(l=this,tt(tw.prototype,function(e,t,r){if(this.db=l,this._ctx={table:e,index:":id"===t?null:t,or:r},this._cmp=this._ascending=e9,this._descending=function(e,t){return e9(t,e)},this._max=function(e,t){return 0<e9(e,t)?e:t},this._min=function(e,t){return 0>e9(e,t)?e:t},this._IDBKeyRange=l._deps.IDBKeyRange,!this._IDBKeyRange)throw new K.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=tT(r.IDBKeyRange),this._createTransaction=function(e,t,r,o){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,o)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),eX.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(rd),this.use(rw),this.use(ry),this.use(ru),this.use(rf);var f=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return rx(n.table(e),f)};var o=Reflect.get(e,t,r);return o instanceof e8?rx(o,f):"tables"===t?o.map(function(e){return rx(e,f)}):"_createTransaction"===t?function(){return rx(o.apply(this,arguments),f)}:o}});this.vip=f,o.forEach(function(e){return e(n)})}var rP,F="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",rS=(rD.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},rD.prototype[F]=function(){return this},rD);function rD(e){this._subscribe=e}try{rP={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch(e){rP={indexedDB:null,IDBKeyRange:null}}function rk(e){var t,r=!1,n=new rS(function(n){var o,i=I(e),a=!1,s={},u={},c={get closed(){return a},unsubscribe:function(){a||(a=!0,o&&o.abort(),f&&tD.storagemutated.unsubscribe(d))}};n.start&&n.start(c);var f=!1,p=function(){return eW(h)},d=function(e){t8(s,e),t7(u,s)&&p()},h=function(){var c,h;!a&&rP.indexedDB&&(s={},c={},o&&o.abort(),Promise.resolve(function(t){var r=eS();try{i&&eF();var n=eR(e,t);return n=i?n.finally(eB):n}finally{r&&eD()}}(h={subscr:c,signal:(o=new AbortController).signal,requery:p,querier:e,trans:null})).then(function(e){r=!0,t=e,a||h.signal.aborted||(s={},function(e){for(var t in e)if(l(e,t))return;return 1}(u=c)||f||(tD(tP,d),f=!0),eW(function(){return!a&&n.next&&n.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||a||eW(function(){a||n.error&&n.error(e)})}))};return setTimeout(p,0),c});return n.hasValue=function(){return r},n.getValue=function(){return t},n}function rM(e){var t=rE;try{rE=!0,tD.storagemutated.fire(e),ro(e,!0)}finally{rE=t}}c(rj,t(t({},H),{delete:function(e){return new rj(e,{addons:[]}).delete()},exists:function(e){return new rj(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){var t,r;try{return r=(t=rj.dependencies).indexedDB,t=t.IDBKeyRange,(tZ(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==eZ})}):tX(r,t).toCollection().primaryKeys()).then(e)}catch(e){return eH(new K.MissingAPI)}},defineClass:function(){return function(e){a(this,e)}},ignoreTransaction:function(e){return eh.trans?ez(eh.transless,e):e()},vip:tJ,async:function(e){return function(){try{var t=ra(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ev.resolve(t)}catch(e){return eH(e)}}},spawn:function(e,t,r){try{var n=ra(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:ev.resolve(n)}catch(e){return eH(e)}},currentTransaction:{get:function(){return eh.trans||null}},waitFor:function(e,t){return t=ev.resolve("function"==typeof e?rj.ignoreTransaction(e):e).timeout(t||6e4),eh.trans?eh.trans.waitFor(t):t},Promise:ev,debug:{get:function(){return en},set:function(e){en=e}},derive:d,extend:a,props:c,override:b,Events:te,on:tD,liveQuery:rk,extendObservabilitySet:t8,getByKeyPath:O,setByKeyPath:w,delByKeyPath:function(e,t){"string"==typeof t?w(e,t,void 0):"length"in t&&[].map.call(t,function(t){w(e,t,void 0)})},shallowClone:x,deepClone:k,getObjectDiff:rl,cmp:e9,asap:g,minKey:-1/0,addons:[],connections:eX,errnames:z,dependencies:rP,cache:re,semVer:"4.0.10",version:"4.0.10".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),rj.maxKey=tT(rj.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(tD(tP,function(e){rE||(e=new CustomEvent(tS,{detail:e}),rE=!0,dispatchEvent(e),rE=!1)}),addEventListener(tS,function(e){e=e.detail,rE||rM(e)}));var rN,rE=!1,rA=function(){};return"undefined"!=typeof BroadcastChannel&&((rA=function(){(rN=new BroadcastChannel(tS)).onmessage=function(e){return e.data&&rM(e.data)}})(),"function"==typeof rN.unref&&rN.unref(),tD(tP,function(e){rE||rN.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!rj.disableBfCache&&e.persisted){en&&console.debug("Dexie: handling persisted pagehide"),null!=rN&&rN.close();for(var t=0;t<eX.length;t++)eX[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!rj.disableBfCache&&e.persisted&&(en&&console.debug("Dexie: handling persisted pageshow"),rA(),rM({all:new t1(-1/0,[[]])}))})),ev.rejectionMapper=function(e,t){return!e||e instanceof L||e instanceof TypeError||e instanceof SyntaxError||!e.name||!W[e.name]?e:(t=new W[e.name](t||e.message,e),"stack"in e&&p(t,"stack",{get:function(){return this.inner.stack}}),t)},t(rj,Object.freeze({__proto__:null,Dexie:rj,liveQuery:rk,Entity:e5,cmp:e9,PropModSymbol:P,PropModification:tl,replacePrefix:function(e,t){return new tl({replacePrefix:[e,t]})},add:function(e){return new tl({add:e})},remove:function(e){return new tl({remove:e})},default:rj,RangeSet:t1,mergeRanges:t3,rangesOverlap:t5}),{default:rj}),rj},e.exports=t()},8008:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncSubject=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return n(t,e),t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this._hasValue,n=this._value,o=this.thrownError,i=this.isStopped,a=this._isComplete;t?e.error(o):(i||a)&&(r&&e.next(n),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var t=this._hasValue,r=this._value;this._isComplete||(this._isComplete=!0,t&&e.prototype.next.call(this,r),e.prototype.complete.call(this))},t}(r(45164).Subject);t.AsyncSubject=o},40290:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.BehaviorSubject=void 0;var o=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r.closed||t.next(this._value),r},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(r(45164).Subject);t.BehaviorSubject=o},24666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeNotification=t.Notification=t.NotificationKind=void 0;var n=r(3874),o=r(22651),i=r(90512),a=r(53062);!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(t.NotificationKind||(t.NotificationKind={}));var s=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){return u(this,e)},e.prototype.do=function(e,t,r){var n=this.kind,o=this.value,i=this.error;return"N"===n?null==e?void 0:e(o):"E"===n?null==t?void 0:t(i):null==r?void 0:r()},e.prototype.accept=function(e,t,r){return a.isFunction(null==e?void 0:e.next)?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){var e=this.kind,t=this.value,r=this.error,a="N"===e?o.of(t):"E"===e?i.throwError(function(){return r}):"C"===e?n.EMPTY:0;if(!a)throw TypeError("Unexpected notification kind "+e);return a},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function u(e,t){var r,n,o,i=e.kind,a=e.value,s=e.error;if("string"!=typeof i)throw TypeError('Invalid notification, missing "kind"');"N"===i?null===(r=t.next)||void 0===r||r.call(t,a):"E"===i?null===(n=t.error)||void 0===n||n.call(t,s):null===(o=t.complete)||void 0===o||o.call(t)}t.Notification=s,t.observeNotification=u},19158:(e,t)=>{"use strict";function r(e,t,r){return{kind:e,value:t,error:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.createNotification=t.nextNotification=t.errorNotification=t.COMPLETE_NOTIFICATION=void 0,t.COMPLETE_NOTIFICATION=r("C",void 0,void 0),t.errorNotification=function(e){return r("E",void 0,e)},t.nextNotification=function(e){return r("N",e,void 0)},t.createNotification=r},10693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var n=r(94971),o=r(48268),i=r(17336),a=r(95348),s=r(9261),u=r(53062),l=r(68653),c=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var i,a=this,s=(i=e)&&i instanceof n.Subscriber||i&&u.isFunction(i.next)&&u.isFunction(i.error)&&u.isFunction(i.complete)&&o.isSubscription(i)?e:new n.SafeSubscriber(e,t,r);return l.errorContext(function(){var e=a.operator,t=a.source;s.add(e?e.call(s,t):t?a._subscribe(s):a._trySubscribe(s))}),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=f(t))(function(t,o){var i=new n.SafeSubscriber({next:function(t){try{e(t)}catch(e){o(e),i.unsubscribe()}},error:o,complete:t});r.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[i.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=f(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function f(e){var t;return null!==(t=null!=e?e:s.config.Promise)&&void 0!==t?t:Promise}t.Observable=c},84936:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ReplaySubject=void 0;var o=r(45164),i=r(25530),a=function(e){function t(t,r,n){void 0===t&&(t=1/0),void 0===r&&(r=1/0),void 0===n&&(n=i.dateTimestampProvider);var o=e.call(this)||this;return o._bufferSize=t,o._windowTime=r,o._timestampProvider=n,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,t),o._windowTime=Math.max(1,r),o}return n(t,e),t.prototype.next=function(t){var r=this.isStopped,n=this._buffer,o=this._infiniteTimeWindow,i=this._timestampProvider,a=this._windowTime;!r&&(n.push(t),o||n.push(i.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),r=this._infiniteTimeWindow,n=this._buffer.slice(),o=0;o<n.length&&!e.closed;o+=r?1:2)e.next(n[o]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,r=this._buffer,n=this._infiniteTimeWindow,o=(n?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!n){for(var i=t.now(),a=0,s=1;s<r.length&&r[s]<=i;s+=2)a=s;a&&r.splice(0,a+1)}},t}(o.Subject);t.ReplaySubject=a},37620:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scheduler=void 0;var n=r(25530),o=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=n.dateTimestampProvider.now,e}();t.Scheduler=o},45164:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.AnonymousSubject=t.Subject=void 0;var i=r(10693),a=r(48268),s=r(30166),u=r(62929),l=r(68653),c=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n(t,e),t.prototype.lift=function(e){var t=new f(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new s.ObjectUnsubscribedError},t.prototype.next=function(e){var t=this;l.errorContext(function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=o(t.currentObservers),a=i.next();!a.done;a=i.next())a.value.next(e)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}})},t.prototype.error=function(e){var t=this;l.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}})},t.prototype.complete=function(){var e=this;l.errorContext(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,o=this.observers;return r||n?a.EMPTY_SUBSCRIPTION:(this.currentObservers=null,o.push(e),new a.Subscription(function(){t.currentObservers=null,u.arrRemove(o,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new f(e,t)},t}(i.Observable);t.Subject=c;var f=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return n(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:a.EMPTY_SUBSCRIPTION},t}(c);t.AnonymousSubject=f},94971:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_OBSERVER=t.SafeSubscriber=t.Subscriber=void 0;var o=r(53062),i=r(48268),a=r(9261),s=r(24210),u=r(73355),l=r(19158),c=r(31957),f=r(68653),p=function(e){function r(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,i.isSubscription(r)&&r.add(n)):n.destination=t.EMPTY_OBSERVER,n}return n(r,e),r.create=function(e,t,r){return new y(e,t,r)},r.prototype.next=function(e){this.isStopped?v(l.nextNotification(e),this):this._next(e)},r.prototype.error=function(e){this.isStopped?v(l.errorNotification(e),this):(this.isStopped=!0,this._error(e))},r.prototype.complete=function(){this.isStopped?v(l.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(e){this.destination.next(e)},r.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(i.Subscription);t.Subscriber=p;var d=Function.prototype.bind;function h(e,t){return d.call(e,t)}var m=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){b(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){b(e)}else b(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){b(e)}},e}(),y=function(e){function t(t,r,n){var i,s,u=e.call(this)||this;return o.isFunction(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:u&&a.config.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return u.unsubscribe()},i={next:t.next&&h(t.next,s),error:t.error&&h(t.error,s),complete:t.complete&&h(t.complete,s)}):i=t,u.destination=new m(i),u}return n(t,e),t}(p);function b(e){a.config.useDeprecatedSynchronousErrorHandling?f.captureError(e):s.reportUnhandledError(e)}function v(e,t){var r=a.config.onStoppedNotification;r&&c.timeoutProvider.setTimeout(function(){return r(e,t)})}t.SafeSubscriber=y,t.EMPTY_OBSERVER={closed:!0,next:u.noop,error:function(e){throw e},complete:u.noop}},48268:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.isSubscription=t.EMPTY_SUBSCRIPTION=t.Subscription=void 0;var a=r(53062),s=r(66045),u=r(62929),l=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,u,l,f=this._parentage;if(f){if(this._parentage=null,Array.isArray(f))try{for(var p=n(f),d=p.next();!d.done;d=p.next())d.value.remove(this)}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}else f.remove(this)}var h=this.initialTeardown;if(a.isFunction(h))try{h()}catch(e){l=e instanceof s.UnsubscriptionError?e.errors:[e]}var m=this._finalizers;if(m){this._finalizers=null;try{for(var y=n(m),b=y.next();!b.done;b=y.next()){var v=b.value;try{c(v)}catch(e){l=null!=l?l:[],e instanceof s.UnsubscriptionError?l=i(i([],o(l)),o(e.errors)):l.push(e)}}}catch(e){r={error:e}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(r)throw r.error}}}if(l)throw new s.UnsubscriptionError(l)}},t.prototype.add=function(e){var r;if(e&&e!==this){if(this.closed)c(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&u.arrRemove(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&u.arrRemove(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function c(e){a.isFunction(e)?e():e.unsubscribe()}t.Subscription=l,t.EMPTY_SUBSCRIPTION=l.EMPTY,t.isSubscription=function(e){return e instanceof l||e&&"closed"in e&&a.isFunction(e.remove)&&a.isFunction(e.add)&&a.isFunction(e.unsubscribe)}},9261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9422:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectableObservable=void 0;var o=r(10693),i=r(48268),a=r(26638),s=r(96526),u=r(31714),l=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._subject=null,n._refCount=0,n._connection=null,u.hasLift(t)&&(n.lift=t.lift),n}return n(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new i.Subscription;var r=this.getSubject();t.add(this.source.subscribe(s.createOperatorSubscriber(r,void 0,function(){e._teardown(),r.complete()},function(t){e._teardown(),r.error(t)},function(){return e._teardown()}))),t.closed&&(this._connection=null,t=i.Subscription.EMPTY)}return t},t.prototype.refCount=function(){return a.refCount()(this)},t}(o.Observable);t.ConnectableObservable=l},89469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestInit=t.combineLatest=void 0;var n=r(10693),o=r(62338),i=r(24988),a=r(31487),s=r(1031),u=r(13261),l=r(72733),c=r(96526),f=r(53946);function p(e,t,r){return void 0===r&&(r=a.identity),function(n){d(t,function(){for(var o=e.length,a=Array(o),s=o,u=o,l=function(o){d(t,function(){var l=i.from(e[o],t),f=!1;l.subscribe(c.createOperatorSubscriber(n,function(e){a[o]=e,!f&&(f=!0,u--),u||n.next(r(a.slice()))},function(){--s||n.complete()}))},n)},f=0;f<o;f++)l(f)},n)}}function d(e,t,r){e?f.executeSchedule(r,e,t):t()}t.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=u.popScheduler(e),c=u.popResultSelector(e),f=o.argsArgArrayOrObject(e),d=f.args,h=f.keys;if(0===d.length)return i.from([],r);var m=new n.Observable(p(d,r,h?function(e){return l.createObject(h,e)}:a.identity));return c?m.pipe(s.mapOneOrManyArgs(c)):m},t.combineLatestInit=p},73691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concat=void 0;var n=r(79429),o=r(13261),i=r(24988);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.concatAll()(i.from(e,o.popScheduler(e)))}},3874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.empty=t.EMPTY=void 0;var n=r(10693);t.EMPTY=new n.Observable(function(e){return e.complete()}),t.empty=function(e){return e?new n.Observable(function(t){return e.schedule(function(){return t.complete()})}):t.EMPTY}},24988:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.from=void 0;var n=r(26568),o=r(21435);t.from=function(e,t){return t?n.scheduled(e,t):o.innerFrom(e)}},11867:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromSubscribable=void 0;var n=r(10693);t.fromSubscribable=function(e){return new n.Observable(function(t){return e.subscribe(t)})}},21435:(e,t,r)=>{"use strict";var n=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},o=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof i?i(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,o){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,o,(t=e[r](t)).done,t.value)})}}},i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.fromReadableStreamLike=t.fromAsyncIterable=t.fromIterable=t.fromPromise=t.fromArrayLike=t.fromInteropObservable=t.innerFrom=void 0;var a=r(78685),s=r(57452),u=r(10693),l=r(99105),c=r(28220),f=r(83205),p=r(31214),d=r(36696),h=r(53062),m=r(24210),y=r(17336);function b(e){return new u.Observable(function(t){var r=e[y.observable]();if(h.isFunction(r.subscribe))return r.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")})}function v(e){return new u.Observable(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function g(e){return new u.Observable(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,m.reportUnhandledError)})}function O(e){return new u.Observable(function(t){var r,n;try{for(var o=i(e),a=o.next();!a.done;a=o.next()){var s=a.value;if(t.next(s),t.closed)return}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()})}function w(e){return new u.Observable(function(t){(function(e,t){var r,i,a,s,u,l,c,f;return u=this,l=void 0,c=void 0,f=function(){var u;return n(this,function(n){switch(n.label){case 0:n.trys.push([0,5,6,11]),r=o(e),n.label=1;case 1:return[4,r.next()];case 2:if((i=n.sent()).done)return[3,4];if(u=i.value,t.next(u),t.closed)return[2];n.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a={error:n.sent()},[3,11];case 6:if(n.trys.push([6,,9,10]),!(i&&!i.done&&(s=r.return)))return[3,8];return[4,s.call(r)];case 7:n.sent(),n.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(c||(c=Promise))(function(e,t){function r(e){try{o(f.next(e))}catch(e){t(e)}}function n(e){try{o(f.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):((o=t.value)instanceof c?o:new c(function(e){e(o)})).then(r,n)}o((f=f.apply(u,l||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function x(e){return w(d.readableStreamLikeToAsyncGenerator(e))}t.innerFrom=function(e){if(e instanceof u.Observable)return e;if(null!=e){if(l.isInteropObservable(e))return b(e);if(a.isArrayLike(e))return v(e);if(s.isPromise(e))return g(e);if(c.isAsyncIterable(e))return w(e);if(p.isIterable(e))return O(e);if(d.isReadableStreamLike(e))return x(e)}throw f.createInvalidObservableTypeError(e)},t.fromInteropObservable=b,t.fromArrayLike=v,t.fromPromise=g,t.fromIterable=O,t.fromAsyncIterable=w,t.fromReadableStreamLike=x},37945:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.interval=void 0;var n=r(69210),o=r(50603);t.interval=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=n.asyncScheduler),e<0&&(e=0),o.timer(e,e,t)}},22651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.of=void 0;var n=r(13261),o=r(24988);t.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n.popScheduler(e);return o.from(e,r)}},33735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onErrorResumeNext=void 0;var n=r(10693),o=r(14841),i=r(96526),a=r(73355),s=r(21435);t.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.argsOrArgArray(e);return new n.Observable(function(e){var t=0,n=function(){if(t<r.length){var o=void 0;try{o=s.innerFrom(r[t++])}catch(e){n();return}var u=new i.OperatorSubscriber(e,void 0,a.noop,a.noop);o.subscribe(u),u.add(n)}else e.complete()};n()})}},64098:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raceInit=t.race=void 0;var n=r(10693),o=r(21435),i=r(14841),a=r(96526);function s(e){return function(t){for(var r=[],n=function(n){r.push(o.innerFrom(e[n]).subscribe(a.createOperatorSubscriber(t,function(e){if(r){for(var o=0;o<r.length;o++)o!==n&&r[o].unsubscribe();r=null}t.next(e)})))},i=0;r&&!t.closed&&i<e.length;i++)n(i)}}t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=i.argsOrArgArray(e)).length?o.innerFrom(e[0]):new n.Observable(s(e))},t.raceInit=s},90512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwError=void 0;var n=r(10693),o=r(53062);t.throwError=function(e,t){var r=o.isFunction(e)?e:function(){return e},i=function(e){return e.error(r())};return new n.Observable(t?function(e){return t.schedule(i,0,e)}:i)}},50603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timer=void 0;var n=r(10693),o=r(69210),i=r(2773),a=r(68699);t.timer=function(e,t,r){void 0===e&&(e=0),void 0===r&&(r=o.async);var s=-1;return null!=t&&(i.isScheduler(t)?r=t:s=t),new n.Observable(function(t){var n=a.isValidDate(e)?+e-r.now():e;n<0&&(n=0);var o=0;return r.schedule(function(){t.closed||(t.next(o++),0<=s?this.schedule(void 0,s):t.complete())},n)})}},69555:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zip=void 0;var i=r(10693),a=r(21435),s=r(14841),u=r(3874),l=r(96526),c=r(13261);t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.popResultSelector(e),f=s.argsOrArgArray(e);return f.length?new i.Observable(function(e){var t=f.map(function(){return[]}),i=f.map(function(){return!1});e.add(function(){t=i=null});for(var s=function(s){a.innerFrom(f[s]).subscribe(l.createOperatorSubscriber(e,function(a){if(t[s].push(a),t.every(function(e){return e.length})){var u=t.map(function(e){return e.shift()});e.next(r?r.apply(void 0,o([],n(u))):u),t.some(function(e,t){return!e.length&&i[t]})&&e.complete()}},function(){i[s]=!0,t[s].length||e.complete()}))},u=0;!e.closed&&u<f.length;u++)s(u);return function(){t=i=null}}):u.EMPTY}},96526:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.OperatorSubscriber=t.createOperatorSubscriber=void 0;var o=r(94971);t.createOperatorSubscriber=function(e,t,r,n,o){return new i(e,t,r,n,o)};var i=function(e){function t(t,r,n,o,i,a){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return n(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(o.Subscriber);t.OperatorSubscriber=i},29750:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audit=void 0;var n=r(31714),o=r(21435),i=r(96526);t.audit=function(e){return n.operate(function(t,r){var n=!1,a=null,s=null,u=!1,l=function(){if(null==s||s.unsubscribe(),s=null,n){n=!1;var e=a;a=null,r.next(e)}u&&r.complete()},c=function(){s=null,u&&r.complete()};t.subscribe(i.createOperatorSubscriber(r,function(t){n=!0,a=t,s||o.innerFrom(e(t)).subscribe(s=i.createOperatorSubscriber(r,l,c))},function(){u=!0,n&&s&&!s.closed||r.complete()}))})}},57070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auditTime=void 0;var n=r(69210),o=r(29750),i=r(50603);t.auditTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),o.audit(function(){return i.timer(e,t)})}},84768:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buffer=void 0;var n=r(31714),o=r(73355),i=r(96526),a=r(21435);t.buffer=function(e){return n.operate(function(t,r){var n=[];return t.subscribe(i.createOperatorSubscriber(r,function(e){return n.push(e)},function(){r.next(n),r.complete()})),a.innerFrom(e).subscribe(i.createOperatorSubscriber(r,function(){var e=n;n=[],r.next(e)},o.noop)),function(){n=null}})}},59152:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferCount=void 0;var o=r(31714),i=r(96526),a=r(62929);t.bufferCount=function(e,t){return void 0===t&&(t=null),t=null!=t?t:e,o.operate(function(r,o){var s=[],u=0;r.subscribe(i.createOperatorSubscriber(o,function(r){var i,l,c,f,p=null;u++%t==0&&s.push([]);try{for(var d=n(s),h=d.next();!h.done;h=d.next()){var m=h.value;m.push(r),e<=m.length&&(p=null!=p?p:[]).push(m)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(i)throw i.error}}if(p)try{for(var y=n(p),b=y.next();!b.done;b=y.next()){var m=b.value;a.arrRemove(s,m),o.next(m)}}catch(e){c={error:e}}finally{try{b&&!b.done&&(f=y.return)&&f.call(y)}finally{if(c)throw c.error}}},function(){var e,t;try{for(var r=n(s),i=r.next();!i.done;i=r.next()){var a=i.value;o.next(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}o.complete()},void 0,function(){s=null}))})}},11915:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferTime=void 0;var o=r(48268),i=r(31714),a=r(96526),s=r(62929),u=r(69210),l=r(13261),c=r(53946);t.bufferTime=function(e){for(var t,r,f=[],p=1;p<arguments.length;p++)f[p-1]=arguments[p];var d=null!==(t=l.popScheduler(f))&&void 0!==t?t:u.asyncScheduler,h=null!==(r=f[0])&&void 0!==r?r:null,m=f[1]||1/0;return i.operate(function(t,r){var i=[],u=!1,l=function(e){var t=e.buffer;e.subs.unsubscribe(),s.arrRemove(i,e),r.next(t),u&&f()},f=function(){if(i){var t=new o.Subscription;r.add(t);var n={buffer:[],subs:t};i.push(n),c.executeSchedule(t,d,function(){return l(n)},e)}};null!==h&&h>=0?c.executeSchedule(r,d,f,h,!0):u=!0,f();var p=a.createOperatorSubscriber(r,function(e){var t,r,o=i.slice();try{for(var a=n(o),s=a.next();!s.done;s=a.next()){var u=s.value,c=u.buffer;c.push(e),m<=c.length&&l(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},function(){for(;null==i?void 0:i.length;)r.next(i.shift().buffer);null==p||p.unsubscribe(),r.complete(),r.unsubscribe()},void 0,function(){return i=null});t.subscribe(p)})}},24612:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.bufferToggle=void 0;var o=r(48268),i=r(31714),a=r(21435),s=r(96526),u=r(73355),l=r(62929);t.bufferToggle=function(e,t){return i.operate(function(r,i){var c=[];a.innerFrom(e).subscribe(s.createOperatorSubscriber(i,function(e){var r=[];c.push(r);var n=new o.Subscription;n.add(a.innerFrom(t(e)).subscribe(s.createOperatorSubscriber(i,function(){l.arrRemove(c,r),i.next(r),n.unsubscribe()},u.noop)))},u.noop)),r.subscribe(s.createOperatorSubscriber(i,function(e){var t,r;try{for(var o=n(c),i=o.next();!i.done;i=o.next())i.value.push(e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},function(){for(;c.length>0;)i.next(c.shift());i.complete()}))})}},35162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferWhen=void 0;var n=r(31714),o=r(73355),i=r(96526),a=r(21435);t.bufferWhen=function(e){return n.operate(function(t,r){var n=null,s=null,u=function(){null==s||s.unsubscribe();var t=n;n=[],t&&r.next(t),a.innerFrom(e()).subscribe(s=i.createOperatorSubscriber(r,u,o.noop))};u(),t.subscribe(i.createOperatorSubscriber(r,function(e){return null==n?void 0:n.push(e)},function(){n&&r.next(n),r.complete()},void 0,function(){return n=s=null}))})}},26173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.catchError=void 0;var n=r(21435),o=r(96526),i=r(31714);t.catchError=function e(t){return i.operate(function(r,i){var a,s=null,u=!1;s=r.subscribe(o.createOperatorSubscriber(i,void 0,void 0,function(o){a=n.innerFrom(t(o,e(t)(r))),s?(s.unsubscribe(),s=null,a.subscribe(i)):u=!0})),u&&(s.unsubscribe(),s=null,a.subscribe(i))})}},24162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineAll=void 0;var n=r(67619);t.combineAll=n.combineLatestAll},93697:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatest=void 0;var i=r(89469),a=r(31714),s=r(14841),u=r(1031),l=r(95348),c=r(13261);t.combineLatest=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var f=c.popResultSelector(t);return f?l.pipe(e.apply(void 0,o([],n(t))),u.mapOneOrManyArgs(f)):a.operate(function(e,r){i.combineLatestInit(o([e],n(s.argsOrArgArray(t))))(r)})}},67619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestAll=void 0;var n=r(89469),o=r(1452);t.combineLatestAll=function(e){return o.joinAllInternals(n.combineLatest,e)}},7588:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.combineLatestWith=void 0;var i=r(93697);t.combineLatestWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.combineLatest.apply(void 0,o([],n(e)))}},41340:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.concat=void 0;var i=r(31714),a=r(79429),s=r(13261),u=r(24988);t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s.popScheduler(e);return i.operate(function(t,i){a.concatAll()(u.from(o([t],n(e)),r)).subscribe(i)})}},79429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatAll=void 0;var n=r(79791);t.concatAll=function(){return n.mergeAll(1)}},42408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMap=void 0;var n=r(30714),o=r(53062);t.concatMap=function(e,t){return o.isFunction(t)?n.mergeMap(e,t,1):n.mergeMap(e,1)}},45327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatMapTo=void 0;var n=r(42408),o=r(53062);t.concatMapTo=function(e,t){return o.isFunction(t)?n.concatMap(function(){return e},t):n.concatMap(function(){return e})}},86162:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.concatWith=void 0;var i=r(41340);t.concatWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.concat.apply(void 0,o([],n(e)))}},40841:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var n=r(45164),o=r(21435),i=r(31714),a=r(11867),s={connector:function(){return new n.Subject}};t.connect=function(e,t){void 0===t&&(t=s);var r=t.connector;return i.operate(function(t,n){var i=r();o.innerFrom(e(a.fromSubscribable(i))).subscribe(n),n.add(t.subscribe(i))})}},31354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.count=void 0;var n=r(98839);t.count=function(e){return n.reduce(function(t,r,n){return!e||e(r,n)?t+1:t},0)}},25831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0;var n=r(31714),o=r(73355),i=r(96526),a=r(21435);t.debounce=function(e){return n.operate(function(t,r){var n=!1,s=null,u=null,l=function(){if(null==u||u.unsubscribe(),u=null,n){n=!1;var e=s;s=null,r.next(e)}};t.subscribe(i.createOperatorSubscriber(r,function(t){null==u||u.unsubscribe(),n=!0,s=t,u=i.createOperatorSubscriber(r,l,o.noop),a.innerFrom(e(t)).subscribe(u)},function(){l(),r.complete()},void 0,function(){s=u=null}))})}},18338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounceTime=void 0;var n=r(69210),o=r(31714),i=r(96526);t.debounceTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),o.operate(function(r,n){var o=null,a=null,s=null,u=function(){if(o){o.unsubscribe(),o=null;var e=a;a=null,n.next(e)}};function l(){var r=s+e,i=t.now();if(i<r){o=this.schedule(void 0,r-i),n.add(o);return}u()}r.subscribe(i.createOperatorSubscriber(n,function(r){a=r,s=t.now(),o||(o=t.schedule(l,e),n.add(o))},function(){u(),n.complete()},void 0,function(){a=o=null}))})}},11683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultIfEmpty=void 0;var n=r(31714),o=r(96526);t.defaultIfEmpty=function(e){return n.operate(function(t,r){var n=!1;t.subscribe(o.createOperatorSubscriber(r,function(e){n=!0,r.next(e)},function(){n||r.next(e),r.complete()}))})}},10296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0;var n=r(69210),o=r(1558),i=r(50603);t.delay=function(e,t){void 0===t&&(t=n.asyncScheduler);var r=i.timer(e,t);return o.delayWhen(function(){return r})}},1558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delayWhen=void 0;var n=r(73691),o=r(20261),i=r(67549),a=r(51084),s=r(30714),u=r(21435);t.delayWhen=function e(t,r){return r?function(a){return n.concat(r.pipe(o.take(1),i.ignoreElements()),a.pipe(e(t)))}:s.mergeMap(function(e,r){return u.innerFrom(t(e,r)).pipe(o.take(1),a.mapTo(e))})}},33681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dematerialize=void 0;var n=r(24666),o=r(31714),i=r(96526);t.dematerialize=function(){return o.operate(function(e,t){e.subscribe(i.createOperatorSubscriber(t,function(e){return n.observeNotification(e,t)}))})}},8472:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinct=void 0;var n=r(31714),o=r(96526),i=r(73355),a=r(21435);t.distinct=function(e,t){return n.operate(function(r,n){var s=new Set;r.subscribe(o.createOperatorSubscriber(n,function(t){var r=e?e(t):t;s.has(r)||(s.add(r),n.next(t))})),t&&a.innerFrom(t).subscribe(o.createOperatorSubscriber(n,function(){return s.clear()},i.noop))})}},1035:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinctUntilChanged=void 0;var n=r(31487),o=r(31714),i=r(96526);function a(e,t){return e===t}t.distinctUntilChanged=function(e,t){return void 0===t&&(t=n.identity),e=null!=e?e:a,o.operate(function(r,n){var o,a=!0;r.subscribe(i.createOperatorSubscriber(n,function(r){var i=t(r);(a||!e(o,i))&&(a=!1,o=i,n.next(r))}))})}},54238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distinctUntilKeyChanged=void 0;var n=r(1035);t.distinctUntilKeyChanged=function(e,t){return n.distinctUntilChanged(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}},66235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elementAt=void 0;var n=r(26531),o=r(56235),i=r(47846),a=r(11683),s=r(20261);t.elementAt=function(e,t){if(e<0)throw new n.ArgumentOutOfRangeError;var r=arguments.length>=2;return function(u){return u.pipe(o.filter(function(t,r){return r===e}),s.take(1),r?a.defaultIfEmpty(t):i.throwIfEmpty(function(){return new n.ArgumentOutOfRangeError}))}}},44905:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.endWith=void 0;var i=r(73691),a=r(22651);t.endWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return i.concat(t,a.of.apply(void 0,o([],n(e))))}}},28827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.every=void 0;var n=r(31714),o=r(96526);t.every=function(e,t){return n.operate(function(r,n){var i=0;r.subscribe(o.createOperatorSubscriber(n,function(o){e.call(t,o,i++,r)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}},75359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaust=void 0;var n=r(37210);t.exhaust=n.exhaustAll},37210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustAll=void 0;var n=r(2115),o=r(31487);t.exhaustAll=function(){return n.exhaustMap(o.identity)}},2115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustMap=void 0;var n=r(71971),o=r(21435),i=r(31714),a=r(96526);t.exhaustMap=function e(t,r){return r?function(i){return i.pipe(e(function(e,i){return o.innerFrom(t(e,i)).pipe(n.map(function(t,n){return r(e,t,i,n)}))}))}:i.operate(function(e,r){var n=0,i=null,s=!1;e.subscribe(a.createOperatorSubscriber(r,function(e){i||(i=a.createOperatorSubscriber(r,void 0,function(){i=null,s&&r.complete()}),o.innerFrom(t(e,n++)).subscribe(i))},function(){s=!0,i||r.complete()}))})}},60806:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expand=void 0;var n=r(31714),o=r(29078);t.expand=function(e,t,r){return void 0===t&&(t=1/0),t=1>(t||0)?1/0:t,n.operate(function(n,i){return o.mergeInternals(n,i,e,t,void 0,!0,r)})}},56235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filter=void 0;var n=r(31714),o=r(96526);t.filter=function(e,t){return n.operate(function(r,n){var i=0;r.subscribe(o.createOperatorSubscriber(n,function(r){return e.call(t,r,i++)&&n.next(r)}))})}},33699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalize=void 0;var n=r(31714);t.finalize=function(e){return n.operate(function(t,r){try{t.subscribe(r)}finally{r.add(e)}})}},71851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFind=t.find=void 0;var n=r(31714),o=r(96526);function i(e,t,r){var n="index"===r;return function(r,i){var a=0;r.subscribe(o.createOperatorSubscriber(i,function(o){var s=a++;e.call(t,o,s,r)&&(i.next(n?s:o),i.complete())},function(){i.next(n?-1:void 0),i.complete()}))}}t.find=function(e,t){return n.operate(i(e,t,"value"))},t.createFind=i},77568:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findIndex=void 0;var n=r(31714),o=r(71851);t.findIndex=function(e,t){return n.operate(o.createFind(e,t,"index"))}},44252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.first=void 0;var n=r(30206),o=r(56235),i=r(20261),a=r(11683),s=r(47846),u=r(31487);t.first=function(e,t){var r=arguments.length>=2;return function(l){return l.pipe(e?o.filter(function(t,r){return e(t,r,l)}):u.identity,i.take(1),r?a.defaultIfEmpty(t):s.throwIfEmpty(function(){return new n.EmptyError}))}}},5543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatMap=void 0;var n=r(30714);t.flatMap=n.mergeMap},58807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupBy=void 0;var n=r(10693),o=r(21435),i=r(45164),a=r(31714),s=r(96526);t.groupBy=function(e,t,r,u){return a.operate(function(a,l){t&&"function"!=typeof t?(r=t.duration,c=t.element,u=t.connector):c=t;var c,f=new Map,p=function(e){f.forEach(e),e(l)},d=function(e){return p(function(t){return t.error(e)})},h=0,m=!1,y=new s.OperatorSubscriber(l,function(t){try{var a=e(t),p=f.get(a);if(!p){f.set(a,p=u?u():new i.Subject);var b,v,g=(b=p,(v=new n.Observable(function(e){h++;var t=b.subscribe(e);return function(){t.unsubscribe(),0==--h&&m&&y.unsubscribe()}})).key=a,v);if(l.next(g),r){var O=s.createOperatorSubscriber(p,function(){p.complete(),null==O||O.unsubscribe()},void 0,void 0,function(){return f.delete(a)});y.add(o.innerFrom(r(g)).subscribe(O))}}p.next(c?c(t):t)}catch(e){d(e)}},function(){return p(function(e){return e.complete()})},d,function(){return f.clear()},function(){return m=!0,0===h});a.subscribe(y)})}},67549:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ignoreElements=void 0;var n=r(31714),o=r(96526),i=r(73355);t.ignoreElements=function(){return n.operate(function(e,t){e.subscribe(o.createOperatorSubscriber(t,i.noop))})}},26192:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=void 0;var n=r(31714),o=r(96526);t.isEmpty=function(){return n.operate(function(e,t){e.subscribe(o.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}},1452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinAllInternals=void 0;var n=r(31487),o=r(1031),i=r(95348),a=r(30714),s=r(54301);t.joinAllInternals=function(e,t){return i.pipe(s.toArray(),a.mergeMap(function(t){return e(t)}),t?o.mapOneOrManyArgs(t):n.identity)}},55777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.last=void 0;var n=r(30206),o=r(56235),i=r(54894),a=r(47846),s=r(11683),u=r(31487);t.last=function(e,t){var r=arguments.length>=2;return function(l){return l.pipe(e?o.filter(function(t,r){return e(t,r,l)}):u.identity,i.takeLast(1),r?s.defaultIfEmpty(t):a.throwIfEmpty(function(){return new n.EmptyError}))}}},71971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.map=void 0;var n=r(31714),o=r(96526);t.map=function(e,t){return n.operate(function(r,n){var i=0;r.subscribe(o.createOperatorSubscriber(n,function(r){n.next(e.call(t,r,i++))}))})}},51084:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapTo=void 0;var n=r(71971);t.mapTo=function(e){return n.map(function(){return e})}},4329:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.materialize=void 0;var n=r(24666),o=r(31714),i=r(96526);t.materialize=function(){return o.operate(function(e,t){e.subscribe(i.createOperatorSubscriber(t,function(e){t.next(n.Notification.createNext(e))},function(){t.next(n.Notification.createComplete()),t.complete()},function(e){t.next(n.Notification.createError(e)),t.complete()}))})}},21471:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.max=void 0;var n=r(98839),o=r(53062);t.max=function(e){return n.reduce(o.isFunction(e)?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t})}},4449:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.merge=void 0;var i=r(31714),a=r(79791),s=r(13261),u=r(24988);t.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s.popScheduler(e),l=s.popNumber(e,1/0);return i.operate(function(t,i){a.mergeAll(l)(u.from(o([t],n(e)),r)).subscribe(i)})}},79791:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAll=void 0;var n=r(30714),o=r(31487);t.mergeAll=function(e){return void 0===e&&(e=1/0),n.mergeMap(o.identity,e)}},29078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeInternals=void 0;var n=r(21435),o=r(53946),i=r(96526);t.mergeInternals=function(e,t,r,a,s,u,l,c){var f=[],p=0,d=0,h=!1,m=function(){!h||f.length||p||t.complete()},y=function(e){return p<a?b(e):f.push(e)},b=function(e){u&&t.next(e),p++;var c=!1;n.innerFrom(r(e,d++)).subscribe(i.createOperatorSubscriber(t,function(e){null==s||s(e),u?y(e):t.next(e)},function(){c=!0},void 0,function(){if(c)try{for(p--;f.length&&p<a;)!function(){var e=f.shift();l?o.executeSchedule(t,l,function(){return b(e)}):b(e)}();m()}catch(e){t.error(e)}}))};return e.subscribe(i.createOperatorSubscriber(t,y,function(){h=!0,m()})),function(){null==c||c()}}},30714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMap=void 0;var n=r(71971),o=r(21435),i=r(31714),a=r(29078),s=r(53062);t.mergeMap=function e(t,r,u){return(void 0===u&&(u=1/0),s.isFunction(r))?e(function(e,i){return n.map(function(t,n){return r(e,t,i,n)})(o.innerFrom(t(e,i)))},u):("number"==typeof r&&(u=r),i.operate(function(e,r){return a.mergeInternals(e,r,t,u)}))}},64407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMapTo=void 0;var n=r(30714),o=r(53062);t.mergeMapTo=function(e,t,r){return(void 0===r&&(r=1/0),o.isFunction(t))?n.mergeMap(function(){return e},t,r):("number"==typeof t&&(r=t),n.mergeMap(function(){return e},r))}},56801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeScan=void 0;var n=r(31714),o=r(29078);t.mergeScan=function(e,t,r){return void 0===r&&(r=1/0),n.operate(function(n,i){var a=t;return o.mergeInternals(n,i,function(t,r){return e(a,t,r)},r,function(e){a=e},!1,void 0,function(){return a=null})})}},27828:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeWith=void 0;var i=r(4449);t.mergeWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.merge.apply(void 0,o([],n(e)))}},49077:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.min=void 0;var n=r(98839),o=r(53062);t.min=function(e){return n.reduce(o.isFunction(e)?function(t,r){return 0>e(t,r)?t:r}:function(e,t){return e<t?e:t})}},54707:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multicast=void 0;var n=r(9422),o=r(53062),i=r(40841);t.multicast=function(e,t){var r=o.isFunction(e)?e:function(){return e};return o.isFunction(t)?i.connect(t,{connector:r}):function(e){return new n.ConnectableObservable(e,r)}}},87195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeOn=void 0;var n=r(53946),o=r(31714),i=r(96526);t.observeOn=function(e,t){return void 0===t&&(t=0),o.operate(function(r,o){r.subscribe(i.createOperatorSubscriber(o,function(r){return n.executeSchedule(o,e,function(){return o.next(r)},t)},function(){return n.executeSchedule(o,e,function(){return o.complete()},t)},function(r){return n.executeSchedule(o,e,function(){return o.error(r)},t)}))})}},96466:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.onErrorResumeNext=t.onErrorResumeNextWith=void 0;var i=r(14841),a=r(33735);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.argsOrArgArray(e);return function(e){return a.onErrorResumeNext.apply(void 0,o([e],n(r)))}}t.onErrorResumeNextWith=s,t.onErrorResumeNext=s},23760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pairwise=void 0;var n=r(31714),o=r(96526);t.pairwise=function(){return n.operate(function(e,t){var r,n=!1;e.subscribe(o.createOperatorSubscriber(t,function(e){var o=r;r=e,n&&t.next([o,e]),n=!0}))})}},19124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.partition=void 0;var n=r(12340),o=r(56235);t.partition=function(e,t){return function(r){return[o.filter(e,t)(r),o.filter(n.not(e,t))(r)]}}},67954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluck=void 0;var n=r(71971);t.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(0===r)throw Error("list of properties cannot be empty.");return n.map(function(t){for(var n=t,o=0;o<r;o++){var i=null==n?void 0:n[e[o]];if(void 0===i)return;n=i}return n})}},84372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publish=void 0;var n=r(45164),o=r(54707),i=r(40841);t.publish=function(e){return e?function(t){return i.connect(e)(t)}:function(e){return o.multicast(new n.Subject)(e)}}},63408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishBehavior=void 0;var n=r(40290),o=r(9422);t.publishBehavior=function(e){return function(t){var r=new n.BehaviorSubject(e);return new o.ConnectableObservable(t,function(){return r})}}},37937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishLast=void 0;var n=r(8008),o=r(9422);t.publishLast=function(){return function(e){var t=new n.AsyncSubject;return new o.ConnectableObservable(e,function(){return t})}}},8602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publishReplay=void 0;var n=r(84936),o=r(54707),i=r(53062);t.publishReplay=function(e,t,r,a){r&&!i.isFunction(r)&&(a=r);var s=i.isFunction(r)?r:void 0;return function(r){return o.multicast(new n.ReplaySubject(e,t,a),s)(r)}}},55098:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.race=void 0;var i=r(14841),a=r(41744);t.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.raceWith.apply(void 0,o([],n(i.argsOrArgArray(e))))}},41744:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.raceWith=void 0;var i=r(64098),a=r(31714),s=r(31487);t.raceWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?a.operate(function(t,r){i.raceInit(o([t],n(e)))(r)}):s.identity}},98839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduce=void 0;var n=r(31885),o=r(31714);t.reduce=function(e,t){return o.operate(n.scanInternals(e,t,arguments.length>=2,!1,!0))}},26638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refCount=void 0;var n=r(31714),o=r(96526);t.refCount=function(){return n.operate(function(e,t){var r=null;e._refCount++;var n=o.createOperatorSubscriber(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){r=null;return}var n=e._connection,o=r;r=null,n&&(!o||n===o)&&n.unsubscribe(),t.unsubscribe()});e.subscribe(n),n.closed||(r=e.connect())})}},42251:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeat=void 0;var n=r(3874),o=r(31714),i=r(96526),a=r(21435),s=r(50603);t.repeat=function(e){var t,r,u=1/0;return null!=e&&("object"==typeof e?(u=void 0===(t=e.count)?1/0:t,r=e.delay):u=e),u<=0?function(){return n.EMPTY}:o.operate(function(e,t){var n,o=0,l=function(){if(null==n||n.unsubscribe(),n=null,null!=r){var e="number"==typeof r?s.timer(r):a.innerFrom(r(o)),u=i.createOperatorSubscriber(t,function(){u.unsubscribe(),c()});e.subscribe(u)}else c()},c=function(){var r=!1;n=e.subscribe(i.createOperatorSubscriber(t,void 0,function(){++o<u?n?l():r=!0:t.complete()})),r&&l()};c()})}},3747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repeatWhen=void 0;var n=r(21435),o=r(45164),i=r(31714),a=r(96526);t.repeatWhen=function(e){return i.operate(function(t,r){var i,s,u=!1,l=!1,c=!1,f=function(){return c&&l&&(r.complete(),!0)},p=function(){c=!1,i=t.subscribe(a.createOperatorSubscriber(r,void 0,function(){c=!0,f()||(s||(s=new o.Subject,n.innerFrom(e(s)).subscribe(a.createOperatorSubscriber(r,function(){i?p():u=!0},function(){l=!0,f()}))),s).next()})),u&&(i.unsubscribe(),i=null,u=!1,p())};p()})}},40685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retry=void 0;var n=r(31714),o=r(96526),i=r(31487),a=r(50603),s=r(21435);t.retry=function(e){void 0===e&&(e=1/0);var t,r=(t=e&&"object"==typeof e?e:{count:e}).count,u=void 0===r?1/0:r,l=t.delay,c=t.resetOnSuccess,f=void 0!==c&&c;return u<=0?i.identity:n.operate(function(e,t){var r,n=0,i=function(){var c=!1;r=e.subscribe(o.createOperatorSubscriber(t,function(e){f&&(n=0),t.next(e)},void 0,function(e){if(n++<u){var f=function(){r?(r.unsubscribe(),r=null,i()):c=!0};if(null!=l){var p="number"==typeof l?a.timer(l):s.innerFrom(l(e,n)),d=o.createOperatorSubscriber(t,function(){d.unsubscribe(),f()},function(){t.complete()});p.subscribe(d)}else f()}else t.error(e)})),c&&(r.unsubscribe(),r=null,i())};i()})}},40047:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retryWhen=void 0;var n=r(21435),o=r(45164),i=r(31714),a=r(96526);t.retryWhen=function(e){return i.operate(function(t,r){var i,s,u=!1,l=function(){i=t.subscribe(a.createOperatorSubscriber(r,void 0,void 0,function(t){s||(s=new o.Subject,n.innerFrom(e(s)).subscribe(a.createOperatorSubscriber(r,function(){return i?l():u=!0}))),s&&s.next(t)})),u&&(i.unsubscribe(),i=null,u=!1,l())};l()})}},17591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sample=void 0;var n=r(21435),o=r(31714),i=r(73355),a=r(96526);t.sample=function(e){return o.operate(function(t,r){var o=!1,s=null;t.subscribe(a.createOperatorSubscriber(r,function(e){o=!0,s=e})),n.innerFrom(e).subscribe(a.createOperatorSubscriber(r,function(){if(o){o=!1;var e=s;s=null,r.next(e)}},i.noop))})}},53732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sampleTime=void 0;var n=r(69210),o=r(17591),i=r(37945);t.sampleTime=function(e,t){return void 0===t&&(t=n.asyncScheduler),o.sample(i.interval(e,t))}},89857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scan=void 0;var n=r(31714),o=r(31885);t.scan=function(e,t){return n.operate(o.scanInternals(e,t,arguments.length>=2,!0))}},31885:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanInternals=void 0;var n=r(96526);t.scanInternals=function(e,t,r,o,i){return function(a,s){var u=r,l=t,c=0;a.subscribe(n.createOperatorSubscriber(s,function(t){var r=c++;l=u?e(l,t,r):(u=!0,t),o&&s.next(l)},i&&function(){u&&s.next(l),s.complete()}))}}},50739:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sequenceEqual=void 0;var n=r(31714),o=r(96526),i=r(21435);function a(){return{buffer:[],complete:!1}}t.sequenceEqual=function(e,t){return void 0===t&&(t=function(e,t){return e===t}),n.operate(function(r,n){var s=a(),u=a(),l=function(e){n.next(e),n.complete()},c=function(e,r){var i=o.createOperatorSubscriber(n,function(n){var o=r.buffer,i=r.complete;0===o.length?i?l(!1):e.buffer.push(n):t(n,o.shift())||l(!1)},function(){e.complete=!0;var t=r.complete,n=r.buffer;t&&l(0===n.length),null==i||i.unsubscribe()});return i};r.subscribe(c(s,u)),i.innerFrom(e).subscribe(c(u,s))})}},78998:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.share=void 0;var i=r(21435),a=r(45164),s=r(94971),u=r(31714);function l(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];if(!0===t){e();return}if(!1!==t){var u=new s.SafeSubscriber({next:function(){u.unsubscribe(),e()}});return i.innerFrom(t.apply(void 0,o([],n(r)))).subscribe(u)}}t.share=function(e){void 0===e&&(e={});var t=e.connector,r=void 0===t?function(){return new a.Subject}:t,n=e.resetOnError,o=void 0===n||n,c=e.resetOnComplete,f=void 0===c||c,p=e.resetOnRefCountZero,d=void 0===p||p;return function(e){var t,n,a,c=0,p=!1,h=!1,m=function(){null==n||n.unsubscribe(),n=void 0},y=function(){m(),t=a=void 0,p=h=!1},b=function(){var e=t;y(),null==e||e.unsubscribe()};return u.operate(function(e,u){c++,h||p||m();var v=a=null!=a?a:r();u.add(function(){0!=--c||h||p||(n=l(b,d))}),v.subscribe(u),!t&&c>0&&(t=new s.SafeSubscriber({next:function(e){return v.next(e)},error:function(e){h=!0,m(),n=l(y,o,e),v.error(e)},complete:function(){p=!0,m(),n=l(y,f),v.complete()}}),i.innerFrom(e).subscribe(t))})(e)}}},82335:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shareReplay=void 0;var n=r(84936),o=r(78998);t.shareReplay=function(e,t,r){var i,a,s,u,l=!1;return e&&"object"==typeof e?(u=void 0===(i=e.bufferSize)?1/0:i,t=void 0===(a=e.windowTime)?1/0:a,l=void 0!==(s=e.refCount)&&s,r=e.scheduler):u=null!=e?e:1/0,o.share({connector:function(){return new n.ReplaySubject(u,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}},57234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.single=void 0;var n=r(30206),o=r(20425),i=r(33),a=r(31714),s=r(96526);t.single=function(e){return a.operate(function(t,r){var a,u=!1,l=!1,c=0;t.subscribe(s.createOperatorSubscriber(r,function(n){l=!0,(!e||e(n,c++,t))&&(u&&r.error(new o.SequenceError("Too many matching values")),u=!0,a=n)},function(){u?(r.next(a),r.complete()):r.error(l?new i.NotFoundError("No matching values"):new n.EmptyError)}))})}},20747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skip=void 0;var n=r(56235);t.skip=function(e){return n.filter(function(t,r){return e<=r})}},35508:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipLast=void 0;var n=r(31487),o=r(31714),i=r(96526);t.skipLast=function(e){return e<=0?n.identity:o.operate(function(t,r){var n=Array(e),o=0;return t.subscribe(i.createOperatorSubscriber(r,function(t){var i=o++;if(i<e)n[i]=t;else{var a=i%e,s=n[a];n[a]=t,r.next(s)}})),function(){n=null}})}},46369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipUntil=void 0;var n=r(31714),o=r(96526),i=r(21435),a=r(73355);t.skipUntil=function(e){return n.operate(function(t,r){var n=!1,s=o.createOperatorSubscriber(r,function(){null==s||s.unsubscribe(),n=!0},a.noop);i.innerFrom(e).subscribe(s),t.subscribe(o.createOperatorSubscriber(r,function(e){return n&&r.next(e)}))})}},23659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipWhile=void 0;var n=r(31714),o=r(96526);t.skipWhile=function(e){return n.operate(function(t,r){var n=!1,i=0;t.subscribe(o.createOperatorSubscriber(r,function(t){return(n||(n=!e(t,i++)))&&r.next(t)}))})}},34928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startWith=void 0;var n=r(73691),o=r(13261),i=r(31714);t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.popScheduler(e);return i.operate(function(t,o){(r?n.concat(e,t,r):n.concat(e,t)).subscribe(o)})}},88405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeOn=void 0;var n=r(31714);t.subscribeOn=function(e,t){return void 0===t&&(t=0),n.operate(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}},63114:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchAll=void 0;var n=r(92684),o=r(31487);t.switchAll=function(){return n.switchMap(o.identity)}},92684:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchMap=void 0;var n=r(21435),o=r(31714),i=r(96526);t.switchMap=function(e,t){return o.operate(function(r,o){var a=null,s=0,u=!1,l=function(){return u&&!a&&o.complete()};r.subscribe(i.createOperatorSubscriber(o,function(r){null==a||a.unsubscribe();var u=0,c=s++;n.innerFrom(e(r,c)).subscribe(a=i.createOperatorSubscriber(o,function(e){return o.next(t?t(r,e,c,u++):e)},function(){a=null,l()}))},function(){u=!0,l()}))})}},99594:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchMapTo=void 0;var n=r(92684),o=r(53062);t.switchMapTo=function(e,t){return o.isFunction(t)?n.switchMap(function(){return e},t):n.switchMap(function(){return e})}},24507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchScan=void 0;var n=r(92684),o=r(31714);t.switchScan=function(e,t){return o.operate(function(r,o){var i=t;return n.switchMap(function(t,r){return e(i,t,r)},function(e,t){return i=t,t})(r).subscribe(o),function(){i=null}})}},20261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.take=void 0;var n=r(3874),o=r(31714),i=r(96526);t.take=function(e){return e<=0?function(){return n.EMPTY}:o.operate(function(t,r){var n=0;t.subscribe(i.createOperatorSubscriber(r,function(t){++n<=e&&(r.next(t),e<=n&&r.complete())}))})}},54894:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.takeLast=void 0;var o=r(3874),i=r(31714),a=r(96526);t.takeLast=function(e){return e<=0?function(){return o.EMPTY}:i.operate(function(t,r){var o=[];t.subscribe(a.createOperatorSubscriber(r,function(t){o.push(t),e<o.length&&o.shift()},function(){var e,t;try{for(var i=n(o),a=i.next();!a.done;a=i.next()){var s=a.value;r.next(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}r.complete()},void 0,function(){o=null}))})}},18641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeUntil=void 0;var n=r(31714),o=r(96526),i=r(21435),a=r(73355);t.takeUntil=function(e){return n.operate(function(t,r){i.innerFrom(e).subscribe(o.createOperatorSubscriber(r,function(){return r.complete()},a.noop)),r.closed||t.subscribe(r)})}},65439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeWhile=void 0;var n=r(31714),o=r(96526);t.takeWhile=function(e,t){return void 0===t&&(t=!1),n.operate(function(r,n){var i=0;r.subscribe(o.createOperatorSubscriber(n,function(r){var o=e(r,i++);(o||t)&&n.next(r),o||n.complete()}))})}},88187:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tap=void 0;var n=r(53062),o=r(31714),i=r(96526),a=r(31487);t.tap=function(e,t,r){var s=n.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return s?o.operate(function(e,t){null===(r=s.subscribe)||void 0===r||r.call(s);var r,n=!0;e.subscribe(i.createOperatorSubscriber(t,function(e){var r;null===(r=s.next)||void 0===r||r.call(s,e),t.next(e)},function(){var e;n=!1,null===(e=s.complete)||void 0===e||e.call(s),t.complete()},function(e){var r;n=!1,null===(r=s.error)||void 0===r||r.call(s,e),t.error(e)},function(){var e,t;n&&(null===(e=s.unsubscribe)||void 0===e||e.call(s)),null===(t=s.finalize)||void 0===t||t.call(s)}))}):a.identity}},81759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=void 0;var n=r(31714),o=r(96526),i=r(21435);t.throttle=function(e,t){return n.operate(function(r,n){var a=null!=t?t:{},s=a.leading,u=void 0===s||s,l=a.trailing,c=void 0!==l&&l,f=!1,p=null,d=null,h=!1,m=function(){null==d||d.unsubscribe(),d=null,c&&(v(),h&&n.complete())},y=function(){d=null,h&&n.complete()},b=function(t){return d=i.innerFrom(e(t)).subscribe(o.createOperatorSubscriber(n,m,y))},v=function(){if(f){f=!1;var e=p;p=null,n.next(e),h||b(e)}};r.subscribe(o.createOperatorSubscriber(n,function(e){f=!0,p=e,d&&!d.closed||(u?v():b(e))},function(){h=!0,c&&f&&d&&!d.closed||n.complete()}))})}},73353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttleTime=void 0;var n=r(69210),o=r(81759),i=r(50603);t.throttleTime=function(e,t,r){void 0===t&&(t=n.asyncScheduler);var a=i.timer(e,t);return o.throttle(function(){return a},r)}},47846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfEmpty=void 0;var n=r(30206),o=r(31714),i=r(96526);function a(){return new n.EmptyError}t.throwIfEmpty=function(e){return void 0===e&&(e=a),o.operate(function(t,r){var n=!1;t.subscribe(i.createOperatorSubscriber(r,function(e){n=!0,r.next(e)},function(){return n?r.complete():r.error(e())}))})}},6362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeInterval=t.timeInterval=void 0;var n=r(69210),o=r(31714),i=r(96526);t.timeInterval=function(e){return void 0===e&&(e=n.asyncScheduler),o.operate(function(t,r){var n=e.now();t.subscribe(i.createOperatorSubscriber(r,function(t){var o=e.now(),i=o-n;n=o,r.next(new a(t,i))}))})};var a=function(e,t){this.value=e,this.interval=t};t.TimeInterval=a},3487:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeout=t.TimeoutError=void 0;var n=r(69210),o=r(68699),i=r(31714),a=r(21435),s=r(9259),u=r(96526),l=r(53946);function c(e){throw new t.TimeoutError(e)}t.TimeoutError=s.createErrorClass(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}),t.timeout=function(e,t){var r=o.isValidDate(e)?{first:e}:"number"==typeof e?{each:e}:e,s=r.first,f=r.each,p=r.with,d=void 0===p?c:p,h=r.scheduler,m=void 0===h?null!=t?t:n.asyncScheduler:h,y=r.meta,b=void 0===y?null:y;if(null==s&&null==f)throw TypeError("No timeout provided.");return i.operate(function(e,t){var r,n,o=null,i=0,c=function(e){n=l.executeSchedule(t,m,function(){try{r.unsubscribe(),a.innerFrom(d({meta:b,lastValue:o,seen:i})).subscribe(t)}catch(e){t.error(e)}},e)};r=e.subscribe(u.createOperatorSubscriber(t,function(e){null==n||n.unsubscribe(),i++,t.next(o=e),f>0&&c(f)},void 0,void 0,function(){(null==n?void 0:n.closed)||null==n||n.unsubscribe(),o=null})),i||c(null!=s?"number"==typeof s?s:+s-m.now():f)})}},88998:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutWith=void 0;var n=r(69210),o=r(68699),i=r(3487);t.timeoutWith=function(e,t,r){var a,s,u;if(r=null!=r?r:n.async,o.isValidDate(e)?a=e:"number"==typeof e&&(s=e),t)u=function(){return t};else throw TypeError("No observable provided to switch to");if(null==a&&null==s)throw TypeError("No timeout provided.");return i.timeout({first:a,each:s,scheduler:r,with:u})}},72242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestamp=void 0;var n=r(25530),o=r(71971);t.timestamp=function(e){return void 0===e&&(e=n.dateTimestampProvider),o.map(function(t){return{value:t,timestamp:e.now()}})}},54301:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=void 0;var n=r(98839),o=r(31714),i=function(e,t){return e.push(t),e};t.toArray=function(){return o.operate(function(e,t){n.reduce(i,[])(e).subscribe(t)})}},98700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.window=void 0;var n=r(45164),o=r(31714),i=r(96526),a=r(73355),s=r(21435);t.window=function(e){return o.operate(function(t,r){var o=new n.Subject;r.next(o.asObservable());var u=function(e){o.error(e),r.error(e)};return t.subscribe(i.createOperatorSubscriber(r,function(e){return null==o?void 0:o.next(e)},function(){o.complete(),r.complete()},u)),s.innerFrom(e).subscribe(i.createOperatorSubscriber(r,function(){o.complete(),r.next(o=new n.Subject)},a.noop,u)),function(){null==o||o.unsubscribe(),o=null}})}},62953:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.windowCount=void 0;var o=r(45164),i=r(31714),a=r(96526);t.windowCount=function(e,t){void 0===t&&(t=0);var r=t>0?t:e;return i.operate(function(t,i){var s=[new o.Subject],u=0;i.next(s[0].asObservable()),t.subscribe(a.createOperatorSubscriber(i,function(t){try{for(var a,l,c=n(s),f=c.next();!f.done;f=c.next())f.value.next(t)}catch(e){a={error:e}}finally{try{f&&!f.done&&(l=c.return)&&l.call(c)}finally{if(a)throw a.error}}var p=u-e+1;if(p>=0&&p%r==0&&s.shift().complete(),++u%r==0){var d=new o.Subject;s.push(d),i.next(d.asObservable())}},function(){for(;s.length>0;)s.shift().complete();i.complete()},function(e){for(;s.length>0;)s.shift().error(e);i.error(e)},function(){s=null}))})}},67355:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowTime=void 0;var n=r(45164),o=r(69210),i=r(48268),a=r(31714),s=r(96526),u=r(62929),l=r(13261),c=r(53946);t.windowTime=function(e){for(var t,r,f=[],p=1;p<arguments.length;p++)f[p-1]=arguments[p];var d=null!==(t=l.popScheduler(f))&&void 0!==t?t:o.asyncScheduler,h=null!==(r=f[0])&&void 0!==r?r:null,m=f[1]||1/0;return a.operate(function(t,r){var o=[],a=!1,l=function(e){var t=e.window,r=e.subs;t.complete(),r.unsubscribe(),u.arrRemove(o,e),a&&f()},f=function(){if(o){var t=new i.Subscription;r.add(t);var a=new n.Subject,s={window:a,subs:t,seen:0};o.push(s),r.next(a.asObservable()),c.executeSchedule(t,d,function(){return l(s)},e)}};null!==h&&h>=0?c.executeSchedule(r,d,f,h,!0):a=!0,f();var p=function(e){return o.slice().forEach(e)},y=function(e){p(function(t){return e(t.window)}),e(r),r.unsubscribe()};return t.subscribe(s.createOperatorSubscriber(r,function(e){p(function(t){t.window.next(e),m<=++t.seen&&l(t)})},function(){return y(function(e){return e.complete()})},function(e){return y(function(t){return t.error(e)})})),function(){o=null}})}},4791:(e,t,r)=>{"use strict";var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.windowToggle=void 0;var o=r(45164),i=r(48268),a=r(31714),s=r(21435),u=r(96526),l=r(73355),c=r(62929);t.windowToggle=function(e,t){return a.operate(function(r,a){var f=[],p=function(e){for(;0<f.length;)f.shift().error(e);a.error(e)};s.innerFrom(e).subscribe(u.createOperatorSubscriber(a,function(e){var r,n=new o.Subject;f.push(n);var d=new i.Subscription;try{r=s.innerFrom(t(e))}catch(e){p(e);return}a.next(n.asObservable()),d.add(r.subscribe(u.createOperatorSubscriber(a,function(){c.arrRemove(f,n),n.complete(),d.unsubscribe()},l.noop,p)))},l.noop)),r.subscribe(u.createOperatorSubscriber(a,function(e){var t,r,o=f.slice();try{for(var i=n(o),a=i.next();!a.done;a=i.next())a.value.next(e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},function(){for(;0<f.length;)f.shift().complete();a.complete()},p,function(){for(;0<f.length;)f.shift().unsubscribe()}))})}},20178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowWhen=void 0;var n=r(45164),o=r(31714),i=r(96526),a=r(21435);t.windowWhen=function(e){return o.operate(function(t,r){var o,s,u=function(e){o.error(e),r.error(e)},l=function(){var t;null==s||s.unsubscribe(),null==o||o.complete(),o=new n.Subject,r.next(o.asObservable());try{t=a.innerFrom(e())}catch(e){u(e);return}t.subscribe(s=i.createOperatorSubscriber(r,l,l,u))};l(),t.subscribe(i.createOperatorSubscriber(r,function(e){return o.next(e)},function(){o.complete(),r.complete()},u,function(){null==s||s.unsubscribe(),o=null}))})}},96108:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.withLatestFrom=void 0;var i=r(31714),a=r(96526),s=r(21435),u=r(31487),l=r(73355),c=r(13261);t.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.popResultSelector(e);return i.operate(function(t,i){for(var c=e.length,f=Array(c),p=e.map(function(){return!1}),d=!1,h=function(t){s.innerFrom(e[t]).subscribe(a.createOperatorSubscriber(i,function(e){f[t]=e,!d&&!p[t]&&(p[t]=!0,(d=p.every(u.identity))&&(p=null))},l.noop))},m=0;m<c;m++)h(m);t.subscribe(a.createOperatorSubscriber(i,function(e){if(d){var t=o([e],n(f));i.next(r?r.apply(void 0,o([],n(t))):t)}}))})}},40589:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zip=void 0;var i=r(69555),a=r(31714);t.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.operate(function(t,r){i.zip.apply(void 0,o([t],n(e))).subscribe(r)})}},69126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zipAll=void 0;var n=r(69555),o=r(1452);t.zipAll=function(e){return o.joinAllInternals(n.zip,e)}},37965:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.zipWith=void 0;var i=r(40589);t.zipWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.zip.apply(void 0,o([],n(e)))}},36774:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleArray=void 0;var n=r(10693);t.scheduleArray=function(e,t){return new n.Observable(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}},23455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleAsyncIterable=void 0;var n=r(10693),o=r(53946);t.scheduleAsyncIterable=function(e,t){if(!e)throw Error("Iterable cannot be null");return new n.Observable(function(r){o.executeSchedule(r,t,function(){var n=e[Symbol.asyncIterator]();o.executeSchedule(r,t,function(){n.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}},26803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleIterable=void 0;var n=r(10693),o=r(19678),i=r(53062),a=r(53946);t.scheduleIterable=function(e,t){return new n.Observable(function(r){var n;return a.executeSchedule(r,t,function(){n=e[o.iterator](),a.executeSchedule(r,t,function(){var e,t,o;try{t=(e=n.next()).value,o=e.done}catch(e){r.error(e);return}o?r.complete():r.next(t)},0,!0)}),function(){return i.isFunction(null==n?void 0:n.return)&&n.return()}})}},21520:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleObservable=void 0;var n=r(21435),o=r(87195),i=r(88405);t.scheduleObservable=function(e,t){return n.innerFrom(e).pipe(i.subscribeOn(t),o.observeOn(t))}},22701:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.schedulePromise=void 0;var n=r(21435),o=r(87195),i=r(88405);t.schedulePromise=function(e,t){return n.innerFrom(e).pipe(i.subscribeOn(t),o.observeOn(t))}},11063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleReadableStreamLike=void 0;var n=r(23455),o=r(36696);t.scheduleReadableStreamLike=function(e,t){return n.scheduleAsyncIterable(o.readableStreamLikeToAsyncGenerator(e),t)}},26568:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduled=void 0;var n=r(21520),o=r(22701),i=r(36774),a=r(26803),s=r(23455),u=r(99105),l=r(57452),c=r(78685),f=r(31214),p=r(28220),d=r(83205),h=r(36696),m=r(11063);t.scheduled=function(e,t){if(null!=e){if(u.isInteropObservable(e))return n.scheduleObservable(e,t);if(c.isArrayLike(e))return i.scheduleArray(e,t);if(l.isPromise(e))return o.schedulePromise(e,t);if(p.isAsyncIterable(e))return s.scheduleAsyncIterable(e,t);if(f.isIterable(e))return a.scheduleIterable(e,t);if(h.isReadableStreamLike(e))return m.scheduleReadableStreamLike(e,t)}throw d.createInvalidObservableTypeError(e)}},9023:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;var o=function(e){function t(t,r){return e.call(this)||this}return n(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r(48268).Subscription);t.Action=o},42094:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncAction=void 0;var o=r(9023),i=r(78631),a=r(62929),s=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return n(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r,n=this.id,o=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(o,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),i.intervalProvider.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&i.intervalProvider.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,a.arrRemove(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(o.Action);t.AsyncAction=s},25493:(e,t,r)=>{"use strict";var n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScheduler=void 0;var o=r(37620),i=function(e){function t(t,r){void 0===r&&(r=o.Scheduler.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return n(t,e),t.prototype.flush=function(e){var t,r=this.actions;if(this._active){r.push(e);return}this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}},t}(o.Scheduler);t.AsyncScheduler=i},69210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.async=t.asyncScheduler=void 0;var n=r(42094),o=r(25493);t.asyncScheduler=new o.AsyncScheduler(n.AsyncAction),t.async=t.asyncScheduler},25530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateTimestampProvider=void 0,t.dateTimestampProvider={now:function(){return(t.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},78631:(e,t)=>{"use strict";var r=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},n=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.intervalProvider=void 0,t.intervalProvider={setInterval:function(e,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=t.intervalProvider.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,n([e,o],r(i))):setInterval.apply(void 0,n([e,o],r(i)))},clearInterval:function(e){var r=t.intervalProvider.delegate;return((null==r?void 0:r.clearInterval)||clearInterval)(e)},delegate:void 0}},31957:(e,t)=>{"use strict";var r=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},n=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutProvider=void 0,t.timeoutProvider={setTimeout:function(e,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=t.timeoutProvider.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,n([e,o],r(i))):setTimeout.apply(void 0,n([e,o],r(i)))},clearTimeout:function(e){var r=t.timeoutProvider.delegate;return((null==r?void 0:r.clearTimeout)||clearTimeout)(e)},delegate:void 0}},19678:(e,t)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(t,"__esModule",{value:!0}),t.iterator=t.getSymbolIterator=void 0,t.getSymbolIterator=r,t.iterator=r()},17336:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observable=void 0,t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},26531:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentOutOfRangeError=void 0;var n=r(9259);t.ArgumentOutOfRangeError=n.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},30206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyError=void 0;var n=r(9259);t.EmptyError=n.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}})},33:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundError=void 0;var n=r(9259);t.NotFoundError=n.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}})},30166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectUnsubscribedError=void 0;var n=r(9259);t.ObjectUnsubscribedError=n.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},20425:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceError=void 0;var n=r(9259);t.SequenceError=n.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}})},66045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsubscriptionError=void 0;var n=r(9259);t.UnsubscriptionError=n.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}})},13261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.popNumber=t.popScheduler=t.popResultSelector=void 0;var n=r(53062),o=r(2773);function i(e){return e[e.length-1]}t.popResultSelector=function(e){return n.isFunction(i(e))?e.pop():void 0},t.popScheduler=function(e){return o.isScheduler(i(e))?e.pop():void 0},t.popNumber=function(e,t){return"number"==typeof i(e)?e.pop():t}},62338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.argsArgArrayOrObject=void 0;var r=Array.isArray,n=Object.getPrototypeOf,o=Object.prototype,i=Object.keys;t.argsArgArrayOrObject=function(e){if(1===e.length){var t=e[0];if(r(t))return{args:t,keys:null};if(t&&"object"==typeof t&&n(t)===o){var a=i(t);return{args:a.map(function(e){return t[e]}),keys:a}}}return{args:e,keys:null}}},14841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.argsOrArgArray=void 0;var r=Array.isArray;t.argsOrArgArray=function(e){return 1===e.length&&r(e[0])?e[0]:e}},62929:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrRemove=void 0,t.arrRemove=function(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}},9259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createErrorClass=void 0,t.createErrorClass=function(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}},72733:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createObject=void 0,t.createObject=function(e,t){return e.reduce(function(e,r,n){return e[r]=t[n],e},{})}},68653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.captureError=t.errorContext=void 0;var n=r(9261),o=null;t.errorContext=function(e){if(n.config.useDeprecatedSynchronousErrorHandling){var t=!o;if(t&&(o={errorThrown:!1,error:null}),e(),t){var r=o,i=r.errorThrown,a=r.error;if(o=null,i)throw a}}else e()},t.captureError=function(e){n.config.useDeprecatedSynchronousErrorHandling&&o&&(o.errorThrown=!0,o.error=e)}},53946:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeSchedule=void 0,t.executeSchedule=function(e,t,r,n,o){void 0===n&&(n=0),void 0===o&&(o=!1);var i=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}},31487:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=void 0,t.identity=function(e){return e}},78685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayLike=void 0,t.isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},28220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=void 0;var n=r(53062);t.isAsyncIterable=function(e){return Symbol.asyncIterator&&n.isFunction(null==e?void 0:e[Symbol.asyncIterator])}},68699:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidDate=void 0,t.isValidDate=function(e){return e instanceof Date&&!isNaN(e)}},53062:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=void 0,t.isFunction=function(e){return"function"==typeof e}},99105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInteropObservable=void 0;var n=r(17336),o=r(53062);t.isInteropObservable=function(e){return o.isFunction(e[n.observable])}},31214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIterable=void 0;var n=r(19678),o=r(53062);t.isIterable=function(e){return o.isFunction(null==e?void 0:e[n.iterator])}},57452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=void 0;var n=r(53062);t.isPromise=function(e){return n.isFunction(null==e?void 0:e.then)}},36696:(e,t,r)=>{"use strict";var n=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},o=function(e){return this instanceof o?(this.v=e,this):new o(e)},i=function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),a=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||u(e,t)})})}function u(e,t){try{var r;(r=i[e](t)).value instanceof o?Promise.resolve(r.value.v).then(l,c):f(a[0][2],r)}catch(e){f(a[0][3],e)}}function l(e){u("next",e)}function c(e){u("throw",e)}function f(e,t){e(t),a.shift(),a.length&&u(a[0][0],a[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.isReadableStreamLike=t.readableStreamLikeToAsyncGenerator=void 0;var a=r(53062);t.readableStreamLikeToAsyncGenerator=function(e){return i(this,arguments,function(){var t,r,i;return n(this,function(n){switch(n.label){case 0:t=e.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,o(t.read())];case 3:if(i=(r=n.sent()).value,!r.done)return[3,5];return[4,o(void 0)];case 4:return[2,n.sent()];case 5:return[4,o(i)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})},t.isReadableStreamLike=function(e){return a.isFunction(null==e?void 0:e.getReader)}},2773:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduler=void 0;var n=r(53062);t.isScheduler=function(e){return e&&n.isFunction(e.schedule)}},31714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operate=t.hasLift=void 0;var n=r(53062);function o(e){return n.isFunction(null==e?void 0:e.lift)}t.hasLift=o,t.operate=function(e){return function(t){if(o(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}},1031:(e,t,r)=>{"use strict";var n=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mapOneOrManyArgs=void 0;var i=r(71971),a=Array.isArray;t.mapOneOrManyArgs=function(e){return i.map(function(t){return a(t)?e.apply(void 0,o([],n(t))):e(t)})}},73355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=void 0,t.noop=function(){}},12340:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.not=void 0,t.not=function(e,t){return function(r,n){return!e.call(t,r,n)}}},95348:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeFromArray=t.pipe=void 0;var n=r(31487);function o(e){return 0===e.length?n.identity:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)},t.pipeFromArray=o},24210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportUnhandledError=void 0;var n=r(9261),o=r(31957);t.reportUnhandledError=function(e){o.timeoutProvider.setTimeout(function(){var t=n.config.onUnhandledError;if(t)t(e);else throw e})}},83205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInvalidObservableTypeError=void 0,t.createInvalidObservableTypeError=function(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},29775:(e,t,r)=>{"use strict";t.UI=t.hX=t.xb=void 0,t.O4=t.d=t.bT=t.zg=void 0,r(29750),r(57070),r(84768),r(59152),r(11915),r(24612),r(35162),r(26173),r(24162),r(67619),r(93697),r(7588),r(41340),r(79429),r(42408),r(45327),r(86162),r(40841),r(31354),r(25831),r(18338),r(11683),r(10296),r(1558),r(33681),r(8472);var n=r(1035);Object.defineProperty(t,"xb",{enumerable:!0,get:function(){return n.distinctUntilChanged}}),r(54238),r(66235),r(44905),r(28827),r(75359),r(37210),r(2115),r(60806);var o=r(56235);Object.defineProperty(t,"hX",{enumerable:!0,get:function(){return o.filter}}),r(33699),r(71851),r(77568),r(44252),r(58807),r(67549),r(26192),r(55777);var i=r(71971);Object.defineProperty(t,"UI",{enumerable:!0,get:function(){return i.map}}),r(51084),r(4329),r(21471),r(4449),r(79791),r(5543);var a=r(30714);Object.defineProperty(t,"zg",{enumerable:!0,get:function(){return a.mergeMap}}),r(64407),r(56801);var s=r(27828);Object.defineProperty(t,"bT",{enumerable:!0,get:function(){return s.mergeWith}}),r(49077),r(54707),r(87195),r(96466),r(23760),r(19124),r(67954),r(84372),r(63408),r(37937),r(8602),r(55098),r(41744),r(98839),r(42251),r(3747),r(40685),r(40047),r(26638),r(17591),r(53732),r(89857),r(50739),r(78998);var u=r(82335);Object.defineProperty(t,"d",{enumerable:!0,get:function(){return u.shareReplay}}),r(57234),r(20747),r(35508),r(46369),r(23659);var l=r(34928);Object.defineProperty(t,"O4",{enumerable:!0,get:function(){return l.startWith}}),r(88405),r(63114),r(92684),r(99594),r(24507),r(20261),r(54894),r(18641),r(65439),r(88187),r(81759),r(73353),r(47846),r(6362),r(3487),r(88998),r(72242),r(54301),r(98700),r(62953),r(67355),r(4791),r(20178),r(96108),r(40589),r(69126),r(37965)},30901:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{default:()=>aE});var o,i,a=r(10326),s=r(17577),u=r(77389);function l(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}let c=e=>Array.isArray(e);function f(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function p(e){return"string"==typeof e||Array.isArray(e)}function d(e){let t=[{},{}];return null==e||e.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function h(e,t,r,n){if("function"==typeof t){let[o,i]=d(n);t=t(void 0!==r?r:e.custom,o,i)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[o,i]=d(n);t=t(void 0!==r?r:e.custom,o,i)}return t}function m(e,t,r){let n=e.getProps();return h(n,t,void 0!==r?r:n.custom,e)}let y=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],b=["initial",...y];function v(e){let t;return()=>(void 0===t&&(t=e()),t)}let g=v(()=>void 0!==window.ScrollTimeline);class O{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){let r=this.animations.map(r=>g()&&r.attachTimeline?r.attachTimeline(e):"function"==typeof t?t(r):void 0);return()=>{r.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class w extends O{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function x(e,t){return e?e[t]||e.default||e:void 0}function j(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}function _(e){return"function"==typeof e}function P(e,t){e.timeline=t,e.onfinish=null}let S=e=>Array.isArray(e)&&"number"==typeof e[0],D={linearEasing:void 0},k=function(e,t){let r=v(e);return()=>{var e;return null!==(e=D[t])&&void 0!==e?e:r()}}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),M=(e,t,r)=>{let n=t-e;return 0===n?1:(r-e)/n},N=(e,t,r=10)=>{let n="",o=Math.max(Math.round(t/r),2);for(let t=0;t<o;t++)n+=e(M(0,o-1,t))+", ";return`linear(${n.substring(0,n.length-2)})`},E=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,A={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:E([0,.65,.55,1]),circOut:E([.55,0,1,.45]),backIn:E([.31,.01,.66,-.59]),backOut:E([.33,1.53,.69,.99])},T={x:!1,y:!1};function C(e,t){let r=function(e,t,r){if(e instanceof Element)return[e];if("string"==typeof e){let t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}(e),n=new AbortController;return[r,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function $(e){return t=>{"touch"===t.pointerType||T.x||T.y||e(t)}}let I=(e,t)=>!!t&&(e===t||I(e,t.parentElement)),R=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,F=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),B=new WeakSet;function L(e){return t=>{"Enter"===t.key&&e(t)}}function q(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}let V=(e,t)=>{let r=e.currentTarget;if(!r)return;let n=L(()=>{if(B.has(r))return;q(r,"down");let e=L(()=>{q(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>q(r,"cancel"),t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function U(e){return R(e)&&!(T.x||T.y)}let z=e=>1e3*e,K=e=>e/1e3,W=e=>e,H=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Y=new Set(H),Q=new Set(["width","height","top","left","right","bottom",...H]),G=e=>!!(e&&"object"==typeof e&&e.mix&&e.toValue),X=e=>c(e)?e[e.length-1]||0:e,Z={skipAnimations:!1,useManualTiming:!1},J=["read","resolveKeyframes","update","preRender","render","postRender"];function ee(e,t){let r=!1,n=!0,o={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,a=J.reduce((e,t)=>(e[t]=function(e){let t=new Set,r=new Set,n=!1,o=!1,i=new WeakSet,a={delta:0,timestamp:0,isProcessing:!1};function s(t){i.has(t)&&(u.schedule(t),e()),t(a)}let u={schedule:(e,o=!1,a=!1)=>{let s=a&&n?t:r;return o&&i.add(e),s.has(e)||s.add(e),e},cancel:e=>{r.delete(e),i.delete(e)},process:e=>{if(a=e,n){o=!0;return}n=!0,[t,r]=[r,t],t.forEach(s),t.clear(),n=!1,o&&(o=!1,u.process(e))}};return u}(i),e),{}),{read:s,resolveKeyframes:u,update:l,preRender:c,render:f,postRender:p}=a,d=()=>{let i=Z.useManualTiming?o.timestamp:performance.now();r=!1,o.delta=n?1e3/60:Math.max(Math.min(i-o.timestamp,40),1),o.timestamp=i,o.isProcessing=!0,s.process(o),u.process(o),l.process(o),c.process(o),f.process(o),p.process(o),o.isProcessing=!1,r&&t&&(n=!1,e(d))},h=()=>{r=!0,n=!0,o.isProcessing||e(d)};return{schedule:J.reduce((e,t)=>{let n=a[t];return e[t]=(e,t=!1,o=!1)=>(r||h(),n.schedule(e,t,o)),e},{}),cancel:e=>{for(let t=0;t<J.length;t++)a[J[t]].cancel(e)},state:o,steps:a}}let{schedule:et,cancel:er,state:en,steps:eo}=ee("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:W,!0);function ei(){n=void 0}let ea={now:()=>(void 0===n&&ea.set(en.isProcessing||Z.useManualTiming?en.timestamp:performance.now()),n),set:e=>{n=e,queueMicrotask(ei)}};function es(e,t){-1===e.indexOf(t)&&e.push(t)}function eu(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class el{constructor(){this.subscriptions=[]}add(e){return es(this.subscriptions,e),()=>eu(this.subscriptions,e)}notify(e,t,r){let n=this.subscriptions.length;if(n){if(1===n)this.subscriptions[0](e,t,r);else for(let o=0;o<n;o++){let n=this.subscriptions[o];n&&n(e,t,r)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let ec=e=>!isNaN(parseFloat(e)),ef={current:void 0};class ep{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{let r=ea.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ea.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=ec(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new el);let r=this.events[e].add(t);return"change"===e?()=>{r(),et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return ef.current&&ef.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=ea.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),r?1e3/r*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ed(e,t){return new ep(e,t)}let eh=e=>!!(e&&e.getVelocity);function em(e,t){let r=e.getValue("willChange");if(eh(r)&&r.add)return r.add(t)}let ey=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eb="data-"+ey("framerAppearId"),ev={current:!1},eg=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function eO(e,t,r,n){if(e===t&&r===n)return W;let o=t=>(function(e,t,r,n,o){let i,a;let s=0;do(i=eg(a=t+(r-t)/2,n,o)-e)>0?r=a:t=a;while(Math.abs(i)>1e-7&&++s<12);return a})(t,0,1,e,r);return e=>0===e||1===e?e:eg(o(e),t,n)}let ew=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ex=e=>t=>1-e(1-t),ej=eO(.33,1.53,.69,.99),e_=ex(ej),eP=ew(e_),eS=e=>(e*=2)<1?.5*e_(e):.5*(2-Math.pow(2,-10*(e-1))),eD=e=>1-Math.sin(Math.acos(e)),ek=ex(eD),eM=ew(eD),eN=e=>/^0[^.\s]+$/u.test(e),eE=(e,t,r)=>r>t?t:r<e?e:r,eA={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},eT={...eA,transform:e=>eE(0,1,e)},eC={...eA,default:1},e$=e=>Math.round(1e5*e)/1e5,eI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,eR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eF=(e,t)=>r=>!!("string"==typeof r&&eR.test(r)&&r.startsWith(e)||t&&null!=r&&Object.prototype.hasOwnProperty.call(r,t)),eB=(e,t,r)=>n=>{if("string"!=typeof n)return n;let[o,i,a,s]=n.match(eI);return{[e]:parseFloat(o),[t]:parseFloat(i),[r]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},eL=e=>eE(0,255,e),eq={...eA,transform:e=>Math.round(eL(e))},eV={test:eF("rgb","red"),parse:eB("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+eq.transform(e)+", "+eq.transform(t)+", "+eq.transform(r)+", "+e$(eT.transform(n))+")"},eU={test:eF("#"),parse:function(e){let t="",r="",n="",o="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),o=e.substring(4,5),t+=t,r+=r,n+=n,o+=o),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:o?parseInt(o,16)/255:1}},transform:eV.transform},ez=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),eK=ez("deg"),eW=ez("%"),eH=ez("px"),eY=ez("vh"),eQ=ez("vw"),eG={...eW,parse:e=>eW.parse(e)/100,transform:e=>eW.transform(100*e)},eX={test:eF("hsl","hue"),parse:eB("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+eW.transform(e$(t))+", "+eW.transform(e$(r))+", "+e$(eT.transform(n))+")"},eZ={test:e=>eV.test(e)||eU.test(e)||eX.test(e),parse:e=>eV.test(e)?eV.parse(e):eX.test(e)?eX.parse(e):eU.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?eV.transform(e):eX.transform(e)},eJ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,e0="number",e1="color",e2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function e3(e){let t=e.toString(),r=[],n={color:[],number:[],var:[]},o=[],i=0,a=t.replace(e2,e=>(eZ.test(e)?(n.color.push(i),o.push(e1),r.push(eZ.parse(e))):e.startsWith("var(")?(n.var.push(i),o.push("var"),r.push(e)):(n.number.push(i),o.push(e0),r.push(parseFloat(e))),++i,"${}")).split("${}");return{values:r,split:a,indexes:n,types:o}}function e5(e){return e3(e).values}function e9(e){let{split:t,types:r}=e3(e),n=t.length;return e=>{let o="";for(let i=0;i<n;i++)if(o+=t[i],void 0!==e[i]){let t=r[i];t===e0?o+=e$(e[i]):t===e1?o+=eZ.transform(e[i]):o+=e[i]}return o}}let e6=e=>"number"==typeof e?0:e,e4={test:function(e){var t,r;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(eI))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(eJ))||void 0===r?void 0:r.length)||0)>0},parse:e5,createTransformer:e9,getAnimatableNone:function(e){let t=e5(e);return e9(e)(t.map(e6))}},e8=new Set(["brightness","contrast","saturate","opacity"]);function e7(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[n]=r.match(eI)||[];if(!n)return e;let o=r.replace(n,""),i=e8.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+o+")"}let te=/\b([a-z-]*)\(.*?\)/gu,tt={...e4,getAnimatableNone:e=>{let t=e.match(te);return t?t.map(e7).join(" "):e}},tr={...eA,transform:Math.round},tn={borderWidth:eH,borderTopWidth:eH,borderRightWidth:eH,borderBottomWidth:eH,borderLeftWidth:eH,borderRadius:eH,radius:eH,borderTopLeftRadius:eH,borderTopRightRadius:eH,borderBottomRightRadius:eH,borderBottomLeftRadius:eH,width:eH,maxWidth:eH,height:eH,maxHeight:eH,top:eH,right:eH,bottom:eH,left:eH,padding:eH,paddingTop:eH,paddingRight:eH,paddingBottom:eH,paddingLeft:eH,margin:eH,marginTop:eH,marginRight:eH,marginBottom:eH,marginLeft:eH,backgroundPositionX:eH,backgroundPositionY:eH,rotate:eK,rotateX:eK,rotateY:eK,rotateZ:eK,scale:eC,scaleX:eC,scaleY:eC,scaleZ:eC,skew:eK,skewX:eK,skewY:eK,distance:eH,translateX:eH,translateY:eH,translateZ:eH,x:eH,y:eH,z:eH,perspective:eH,transformPerspective:eH,opacity:eT,originX:eG,originY:eG,originZ:eH,zIndex:tr,size:eH,fillOpacity:eT,strokeOpacity:eT,numOctaves:tr},to={...tn,color:eZ,backgroundColor:eZ,outlineColor:eZ,fill:eZ,stroke:eZ,borderColor:eZ,borderTopColor:eZ,borderRightColor:eZ,borderBottomColor:eZ,borderLeftColor:eZ,filter:tt,WebkitFilter:tt},ti=e=>to[e];function ta(e,t){let r=ti(e);return r!==tt&&(r=e4),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let ts=new Set(["auto","none","0"]),tu=e=>e===eA||e===eH,tl=(e,t)=>parseFloat(e.split(", ")[t]),tc=(e,t)=>(r,{transform:n})=>{if("none"===n||!n)return 0;let o=n.match(/^matrix3d\((.+)\)$/u);if(o)return tl(o[1],t);{let t=n.match(/^matrix\((.+)\)$/u);return t?tl(t[1],e):0}},tf=new Set(["x","y","z"]),tp=H.filter(e=>!tf.has(e)),td={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:tc(4,13),y:tc(5,14)};td.translateX=td.x,td.translateY=td.y;let th=new Set,tm=!1,ty=!1;function tb(){if(ty){let e=Array.from(th).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t=function(e){let t=[];return tp.forEach(r=>{let n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{var n;null===(n=e.getValue(t))||void 0===n||n.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}ty=!1,tm=!1,th.forEach(e=>e.complete()),th.clear()}function tv(){th.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ty=!0)})}class tg{constructor(e,t,r,n,o,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=n,this.element=o,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(th.add(this),tm||(tm=!0,et.read(tv),et.resolveKeyframes(tb))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:n}=this;for(let o=0;o<e.length;o++)if(null===e[o]){if(0===o){let o=null==n?void 0:n.get(),i=e[e.length-1];if(void 0!==o)e[0]=o;else if(r&&t){let n=r.readValue(t,i);null!=n&&(e[0]=n)}void 0===e[0]&&(e[0]=i),n&&void 0===o&&n.set(e[0])}else e[o]=e[o-1]}}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),th.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,th.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let tO=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),tw=e=>t=>"string"==typeof t&&t.startsWith(e),tx=tw("--"),tj=tw("var(--"),t_=e=>!!tj(e)&&tP.test(e.split("/*")[0].trim()),tP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tS=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,tD=e=>t=>t.test(e),tk=[eA,eH,eW,eK,eQ,eY,{test:e=>"auto"===e,parse:e=>e}],tM=e=>tk.find(tD(e));class tN extends tg{constructor(e,t,r,n,o){super(e,t,r,n,o,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let n=e[r];if("string"==typeof n&&t_(n=n.trim())){let o=function e(t,r,n=1){W(n<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);let[o,i]=function(e){let t=tS.exec(e);if(!t)return[,];let[,r,n,o]=t;return[`--${null!=r?r:n}`,o]}(t);if(!o)return;let a=window.getComputedStyle(r).getPropertyValue(o);if(a){let e=a.trim();return tO(e)?parseFloat(e):e}return t_(i)?e(i,r,n+1):i}(n,t.current);void 0!==o&&(e[r]=o),r===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Q.has(r)||2!==e.length)return;let[n,o]=e,i=tM(n),a=tM(o);if(i!==a){if(tu(i)&&tu(a))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else this.needsMeasurement=!0}}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++){var n;("number"==typeof(n=e[t])?0===n:null===n||"none"===n||"0"===n||eN(n))&&r.push(t)}r.length&&function(e,t,r){let n,o=0;for(;o<e.length&&!n;){let t=e[o];"string"==typeof t&&!ts.has(t)&&e3(t).values.length&&(n=e[o]),o++}if(n&&r)for(let o of t)e[o]=ta(r,n)}(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=td[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let n=t[t.length-1];void 0!==n&&e.getValue(r,n).jump(n,!1)}measureEndState(){var e;let{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;let o=t.getValue(r);o&&o.jump(this.measuredOrigin,!1);let i=n.length-1,a=n[i];n[i]=td[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(([e,r])=>{t.getValue(e).set(r)}),this.resolveNoneKeyframes()}}let tE=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(e4.test(e)||"0"===e)&&!e.startsWith("url(")),tA=e=>null!==e;function tT(e,{repeat:t,repeatType:r="loop"},n){let o=e.filter(tA),i=t&&"loop"!==r&&t%2==1?0:o.length-1;return i&&void 0!==n?n:o[i]}class tC{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:n=0,repeatDelay:o=0,repeatType:i="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ea.now(),this.options={autoplay:e,delay:t,type:r,repeat:n,repeatDelay:o,repeatType:i,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(tv(),tb()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=ea.now(),this.hasAttemptedResolve=!0;let{name:r,type:n,velocity:o,delay:i,onComplete:a,onUpdate:s,isGenerator:u}=this.options;if(!u&&!function(e,t,r,n){let o=e[0];if(null===o)return!1;if("display"===t||"visibility"===t)return!0;let i=e[e.length-1],a=tE(o,t),s=tE(i,t);return W(a===s,`You are trying to animate ${t} from "${o}" to "${i}". ${o} is not an animatable value - to enable this animation set ${o} to a value animatable to ${i} via the \`style\` property.`),!!a&&!!s&&(function(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||_(r))&&n)}(e,r,n,o)){if(ev.current||!i){s&&s(tT(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}this.options.duration=0}let l=this.initPlayback(e,t);!1!==l&&(this._resolved={keyframes:e,finalKeyframe:t,...l},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}let t$=(e,t,r)=>e+(t-e)*r;function tI(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function tR(e,t){return r=>r>0?t:e}let tF=(e,t,r)=>{let n=e*e,o=r*(t*t-n)+n;return o<0?0:Math.sqrt(o)},tB=[eU,eV,eX],tL=e=>tB.find(t=>t.test(e));function tq(e){let t=tL(e);if(W(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`),!t)return!1;let r=t.parse(e);return t===eX&&(r=function({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let o=0,i=0,a=0;if(t/=100){let n=r<.5?r*(1+t):r+t-r*t,s=2*r-n;o=tI(s,n,e+1/3),i=tI(s,n,e),a=tI(s,n,e-1/3)}else o=i=a=r;return{red:Math.round(255*o),green:Math.round(255*i),blue:Math.round(255*a),alpha:n}}(r)),r}let tV=(e,t)=>{let r=tq(e),n=tq(t);if(!r||!n)return tR(e,t);let o={...r};return e=>(o.red=tF(r.red,n.red,e),o.green=tF(r.green,n.green,e),o.blue=tF(r.blue,n.blue,e),o.alpha=t$(r.alpha,n.alpha,e),eV.transform(o))},tU=(e,t)=>r=>t(e(r)),tz=(...e)=>e.reduce(tU),tK=new Set(["none","hidden"]);function tW(e,t){return r=>t$(e,t,r)}function tH(e){return"number"==typeof e?tW:"string"==typeof e?t_(e)?tR:eZ.test(e)?tV:tG:Array.isArray(e)?tY:"object"==typeof e?eZ.test(e)?tV:tQ:tR}function tY(e,t){let r=[...e],n=r.length,o=e.map((e,r)=>tH(e)(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=o[t](e);return r}}function tQ(e,t){let r={...e,...t},n={};for(let o in r)void 0!==e[o]&&void 0!==t[o]&&(n[o]=tH(e[o])(e[o],t[o]));return e=>{for(let t in n)r[t]=n[t](e);return r}}let tG=(e,t)=>{let r=e4.createTransformer(t),n=e3(e),o=e3(t);return n.indexes.var.length===o.indexes.var.length&&n.indexes.color.length===o.indexes.color.length&&n.indexes.number.length>=o.indexes.number.length?tK.has(e)&&!o.values.length||tK.has(t)&&!n.values.length?function(e,t){return tK.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}(e,t):tz(tY(function(e,t){var r;let n=[],o={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){let a=t.types[i],s=e.indexes[a][o[a]],u=null!==(r=e.values[s])&&void 0!==r?r:0;n[i]=u,o[a]++}return n}(n,o),o.values),r):(W(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),tR(e,t))};function tX(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?t$(e,t,r):tH(e)(e,t)}function tZ(e,t,r){var n,o;let i=Math.max(t-5,0);return n=r-e(i),(o=t-i)?1e3/o*n:0}let tJ={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};function t0(e,t){return e*Math.sqrt(1-t*t)}let t1=["duration","bounce"],t2=["stiffness","damping","mass"];function t3(e,t){return t.some(t=>void 0!==e[t])}function t5(e=tJ.visualDuration,t=tJ.bounce){let r;let n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:o,restDelta:i}=n,a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:l,damping:c,mass:f,duration:p,velocity:d,isResolvedFromDuration:h}=function(e){let t={velocity:tJ.velocity,stiffness:tJ.stiffness,damping:tJ.damping,mass:tJ.mass,isResolvedFromDuration:!1,...e};if(!t3(e,t2)&&t3(e,t1)){if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),n=r*r,o=2*eE(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:tJ.mass,stiffness:n,damping:o}}else{let r=function({duration:e=tJ.duration,bounce:t=tJ.bounce,velocity:r=tJ.velocity,mass:n=tJ.mass}){let o,i;W(e<=z(tJ.maxDuration),"Spring duration must be 10 seconds or less");let a=1-t;a=eE(tJ.minDamping,tJ.maxDamping,a),e=eE(tJ.minDuration,tJ.maxDuration,K(e)),a<1?(o=t=>{let n=t*a,o=n*e;return .001-(n-r)/t0(t,a)*Math.exp(-o)},i=t=>{let n=t*a*e,i=Math.pow(a,2)*Math.pow(t,2)*e,s=t0(Math.pow(t,2),a);return(n*r+r-i)*Math.exp(-n)*(-o(t)+.001>0?-1:1)/s}):(o=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),i=t=>e*e*(r-t)*Math.exp(-t*e));let s=function(e,t,r){let n=r;for(let r=1;r<12;r++)n-=e(n)/t(n);return n}(o,i,5/e);if(e=z(e),isNaN(s))return{stiffness:tJ.stiffness,damping:tJ.damping,duration:e};{let t=Math.pow(s,2)*n;return{stiffness:t,damping:2*a*Math.sqrt(n*t),duration:e}}}(e);(t={...t,...r,mass:tJ.mass}).isResolvedFromDuration=!0}}return t}({...n,velocity:-K(n.velocity||0)}),m=d||0,y=c/(2*Math.sqrt(l*f)),b=s-a,v=K(Math.sqrt(l/f)),g=5>Math.abs(b);if(o||(o=g?tJ.restSpeed.granular:tJ.restSpeed.default),i||(i=g?tJ.restDelta.granular:tJ.restDelta.default),y<1){let e=t0(v,y);r=t=>s-Math.exp(-y*v*t)*((m+y*v*b)/e*Math.sin(e*t)+b*Math.cos(e*t))}else if(1===y)r=e=>s-Math.exp(-v*e)*(b+(m+v*b)*e);else{let e=v*Math.sqrt(y*y-1);r=t=>{let r=Math.exp(-y*v*t),n=Math.min(e*t,300);return s-r*((m+y*v*b)*Math.sinh(n)+e*b*Math.cosh(n))/e}}let O={calculatedDuration:h&&p||null,next:e=>{let t=r(e);if(h)u.done=e>=p;else{let n=0;y<1&&(n=0===e?z(m):tZ(r,e,t));let a=Math.abs(n)<=o,l=Math.abs(s-t)<=i;u.done=a&&l}return u.value=u.done?s:t,u},toString:()=>{let e=Math.min(j(O),2e4),t=N(t=>O.next(e*t).value,e,30);return e+"ms "+t}};return O}function t9({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:a,min:s,max:u,restDelta:l=.5,restSpeed:c}){let f,p;let d=e[0],h={done:!1,value:d},m=e=>void 0!==s&&e<s||void 0!==u&&e>u,y=e=>void 0===s?u:void 0===u?s:Math.abs(s-e)<Math.abs(u-e)?s:u,b=r*t,v=d+b,g=void 0===a?v:a(v);g!==v&&(b=g-d);let O=e=>-b*Math.exp(-e/n),w=e=>g+O(e),x=e=>{let t=O(e),r=w(e);h.done=Math.abs(t)<=l,h.value=h.done?g:r},j=e=>{m(h.value)&&(f=e,p=t5({keyframes:[h.value,y(h.value)],velocity:tZ(w,e,h.value),damping:o,stiffness:i,restDelta:l,restSpeed:c}))};return j(0),{calculatedDuration:null,next:e=>{let t=!1;return(p||void 0!==f||(t=!0,x(e),j(e)),void 0!==f&&e>=f)?p.next(e-f):(t||x(e),h)}}}let t6=eO(.42,0,1,1),t4=eO(0,0,.58,1),t8=eO(.42,0,.58,1),t7=e=>Array.isArray(e)&&"number"!=typeof e[0],re={linear:W,easeIn:t6,easeInOut:t8,easeOut:t4,circIn:eD,circInOut:eM,circOut:ek,backIn:e_,backInOut:eP,backOut:ej,anticipate:eS},rt=e=>{if(S(e)){W(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[t,r,n,o]=e;return eO(t,r,n,o)}return"string"==typeof e?(W(void 0!==re[e],`Invalid easing type '${e}'`),re[e]):e};function rr({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){let o=t7(n)?n.map(rt):rt(n),i={done:!1,value:t[0]},a=function(e,t,{clamp:r=!0,ease:n,mixer:o}={}){let i=e.length;if(W(i===t.length,"Both input and output ranges must be the same length"),1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());let s=function(e,t,r){let n=[],o=r||tX,i=e.length-1;for(let r=0;r<i;r++){let i=o(e[r],e[r+1]);t&&(i=tz(Array.isArray(t)?t[r]||W:t,i)),n.push(i)}return n}(t,n,o),u=s.length,l=r=>{if(a&&r<e[0])return t[0];let n=0;if(u>1)for(;n<e.length-2&&!(r<e[n+1]);n++);let o=M(e[n],e[n+1],r);return s[n](o)};return r?t=>l(eE(e[0],e[i-1],t)):l}((r&&r.length===t.length?r:function(e){let t=[0];return function(e,t){let r=e[e.length-1];for(let n=1;n<=t;n++){let o=M(0,t,n);e.push(t$(r,1,o))}}(t,e.length-1),t}(t)).map(t=>t*e),t,{ease:Array.isArray(o)?o:t.map(()=>o||t8).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(i.value=a(t),i.done=t>=e,i)}}let rn=e=>{let t=({timestamp:t})=>e(t);return{start:()=>et.update(t,!0),stop:()=>er(t),now:()=>en.isProcessing?en.timestamp:ea.now()}},ro={decay:t9,inertia:t9,tween:rr,keyframes:rr,spring:t5},ri=e=>e/100;class ra extends tC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();let{onStop:e}=this.options;e&&e()};let{name:t,motionValue:r,element:n,keyframes:o}=this.options,i=(null==n?void 0:n.KeyframeResolver)||tg;this.resolver=new i(o,(e,t)=>this.onKeyframesResolved(e,t),t,r,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){let t,r;let{type:n="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,u=_(n)?n:ro[n]||rr;u!==rr&&"number"!=typeof e[0]&&(t=tz(ri,tX(e[0],e[1])),e=[0,100]);let l=u({...this.options,keyframes:e});"mirror"===a&&(r=u({...this.options,keyframes:[...e].reverse(),velocity:-s})),null===l.calculatedDuration&&(l.calculatedDuration=j(l));let{calculatedDuration:c}=l,f=c+i;return{generator:l,mirroredGenerator:r,mapPercentToKeyframes:t,calculatedDuration:c,resolvedDuration:f,totalDuration:f*(o+1)-i}}onPostResolved(){let{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){let{resolved:r}=this;if(!r){let{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}let{finalKeyframe:n,generator:o,mirroredGenerator:i,mapPercentToKeyframes:a,keyframes:s,calculatedDuration:u,totalDuration:l,resolvedDuration:c}=r;if(null===this.startTime)return o.next(0);let{delay:f,repeat:p,repeatType:d,repeatDelay:h,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-l/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;let y=this.currentTime-f*(this.speed>=0?1:-1),b=this.speed>=0?y<0:y>l;this.currentTime=Math.max(y,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=l);let v=this.currentTime,g=o;if(p){let e=Math.min(this.currentTime,l)/c,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,p+1))%2&&("reverse"===d?(r=1-r,h&&(r-=h/c)):"mirror"===d&&(g=i)),v=eE(0,1,r)*c}let O=b?{done:!1,value:s[0]}:g.next(v);a&&(O.value=a(O.value));let{done:w}=O;b||null===u||(w=this.speed>=0?this.currentTime>=l:this.currentTime<=0);let x=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return x&&void 0!==n&&(O.value=tT(s,this.options,n)),m&&m(O.value),x&&this.finish(),O}get duration(){let{resolved:e}=this;return e?K(e.calculatedDuration):0}get time(){return K(this.currentTime)}set time(e){e=z(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=K(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;let{driver:e=rn,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();let n=this.driver.now();null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=n):this.startTime=null!=r?r:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}let rs=new Set(["opacity","clipPath","filter","transform"]),ru=v(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rl={anticipate:eS,backInOut:eP,circInOut:eM};class rc extends tC{constructor(e){super(e);let{name:t,motionValue:r,element:n,keyframes:o}=this.options;this.resolver=new tN(o,(e,t)=>this.onKeyframesResolved(e,t),t,r,n),this.resolver.scheduleResolve()}initPlayback(e,t){var r;let{duration:n=300,times:o,ease:i,type:a,motionValue:s,name:u,startTime:l}=this.options;if(!s.owner||!s.owner.current)return!1;if("string"==typeof i&&k()&&i in rl&&(i=rl[i]),_((r=this.options).type)||"spring"===r.type||!function e(t){return!!("function"==typeof t&&k()||!t||"string"==typeof t&&(t in A||k())||S(t)||Array.isArray(t)&&t.every(e))}(r.ease)){let{onComplete:t,onUpdate:r,motionValue:s,element:u,...l}=this.options,c=function(e,t){let r=new ra({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0}),n={done:!1,value:e[0]},o=[],i=0;for(;!n.done&&i<2e4;)o.push((n=r.sample(i)).value),i+=10;return{times:void 0,keyframes:o,duration:i-10,ease:"linear"}}(e,l);1===(e=c.keyframes).length&&(e[1]=e[0]),n=c.duration,o=c.times,i=c.ease,a="keyframes"}let c=function(e,t,r,{delay:n=0,duration:o=300,repeat:i=0,repeatType:a="loop",ease:s="easeInOut",times:u}={}){let l={[t]:r};u&&(l.offset=u);let c=function e(t,r){if(t)return"function"==typeof t&&k()?N(t,r):S(t)?E(t):Array.isArray(t)?t.map(t=>e(t,r)||A.easeOut):A[t]}(s,o);return Array.isArray(c)&&(l.easing=c),e.animate(l,{delay:n,duration:o,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:"reverse"===a?"alternate":"normal"})}(s.owner.current,u,e,{...this.options,duration:n,times:o,ease:i});return c.startTime=null!=l?l:this.calcStartTime(),this.pendingTimeline?(P(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{let{onComplete:r}=this.options;s.set(tT(e,this.options,t)),r&&r(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:n,times:o,type:a,ease:i,keyframes:e}}get duration(){let{resolved:e}=this;if(!e)return 0;let{duration:t}=e;return K(t)}get time(){let{resolved:e}=this;if(!e)return 0;let{animation:t}=e;return K(t.currentTime||0)}set time(e){let{resolved:t}=this;if(!t)return;let{animation:r}=t;r.currentTime=z(e)}get speed(){let{resolved:e}=this;if(!e)return 1;let{animation:t}=e;return t.playbackRate}set speed(e){let{resolved:t}=this;if(!t)return;let{animation:r}=t;r.playbackRate=e}get state(){let{resolved:e}=this;if(!e)return"idle";let{animation:t}=e;return t.playState}get startTime(){let{resolved:e}=this;if(!e)return null;let{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){let{resolved:t}=this;if(!t)return W;let{animation:r}=t;P(r,e)}else this.pendingTimeline=e;return W}play(){if(this.isStopped)return;let{resolved:e}=this;if(!e)return;let{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){let{resolved:e}=this;if(!e)return;let{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();let{resolved:e}=this;if(!e)return;let{animation:t,keyframes:r,duration:n,type:o,ease:i,times:a}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){let{motionValue:e,onUpdate:t,onComplete:s,element:u,...l}=this.options,c=new ra({...l,keyframes:r,duration:n,type:o,ease:i,times:a,isGenerator:!0}),f=z(this.time);e.setWithVelocity(c.sample(f-10).value,c.sample(f).value,10)}let{onStop:s}=this.options;s&&s(),this.cancel()}complete(){let{resolved:e}=this;e&&e.animation.finish()}cancel(){let{resolved:e}=this;e&&e.animation.cancel()}static supports(e){let{motionValue:t,name:r,repeatDelay:n,repeatType:o,damping:i,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;let{onUpdate:s,transformTemplate:u}=t.owner.getProps();return ru()&&r&&rs.has(r)&&!s&&!u&&!n&&"mirror"!==o&&0!==i&&"inertia"!==a}}let rf={type:"spring",stiffness:500,damping:25,restSpeed:10},rp=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),rd={type:"keyframes",duration:.8},rh={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rm=(e,{keyframes:t})=>t.length>2?rd:Y.has(e)?e.startsWith("scale")?rp(t[1]):rf:rh,ry=(e,t,r,n={},o,i)=>a=>{let s=x(n,e)||{},u=s.delay||n.delay||0,{elapsed:l=0}=n;l-=z(u);let c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-l,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:i?void 0:o};!function({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:o,repeat:i,repeatType:a,repeatDelay:s,from:u,elapsed:l,...c}){return!!Object.keys(c).length}(s)&&(c={...c,...rm(e,c)}),c.duration&&(c.duration=z(c.duration)),c.repeatDelay&&(c.repeatDelay=z(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let f=!1;if(!1!==c.type&&(0!==c.duration||c.repeatDelay)||(c.duration=0,0!==c.delay||(f=!0)),(ev.current||Z.skipAnimations)&&(f=!0,c.duration=0,c.delay=0),f&&!i&&void 0!==t.get()){let e=tT(c.keyframes,s);if(void 0!==e)return et.update(()=>{c.onUpdate(e),c.onComplete()}),new w([])}return!i&&rc.supports(c)?new rc(c):new ra(c)};function rb(e,t,{delay:r=0,transitionOverride:n,type:o}={}){var i;let{transition:a=e.getDefaultTransition(),transitionEnd:s,...u}=t;n&&(a=n);let l=[],c=o&&e.animationState&&e.animationState.getState()[o];for(let t in u){let n=e.getValue(t,null!==(i=e.latestValues[t])&&void 0!==i?i:null),o=u[t];if(void 0===o||c&&function({protectedKeys:e,needsAnimating:t},r){let n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}(c,t))continue;let s={delay:r,...x(a||{},t)},f=!1;if(window.MotionHandoffAnimation){let r=e.props[eb];if(r){let e=window.MotionHandoffAnimation(r,t,et);null!==e&&(s.startTime=e,f=!0)}}em(e,t),n.start(ry(t,n,o,e.shouldReduceMotion&&Q.has(t)?{type:!1}:s,e,f));let p=n.animation;p&&l.push(p)}return s&&Promise.all(l).then(()=>{et.update(()=>{s&&function(e,t){let{transitionEnd:r={},transition:n={},...o}=m(e,t)||{};for(let t in o={...o,...r}){let r=X(o[t]);e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ed(r))}}(e,s)})}),l}function rv(e,t,r={}){var n;let o=m(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0),{transition:i=e.getDefaultTransition()||{}}=o||{};r.transitionOverride&&(i=r.transitionOverride);let a=o?()=>Promise.all(rb(e,o,r)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(n=0)=>{let{delayChildren:o=0,staggerChildren:a,staggerDirection:s}=i;return function(e,t,r=0,n=0,o=1,i){let a=[],s=(e.variantChildren.size-1)*n,u=1===o?(e=0)=>e*n:(e=0)=>s-e*n;return Array.from(e.variantChildren).sort(rg).forEach((e,n)=>{e.notify("AnimationStart",t),a.push(rv(e,t,{...i,delay:r+u(n)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}(e,t,o+n,a,s,r)}:()=>Promise.resolve(),{when:u}=i;if(!u)return Promise.all([a(),s(r.delay)]);{let[e,t]="beforeChildren"===u?[a,s]:[s,a];return e().then(()=>t())}}function rg(e,t){return e.sortNodePosition(t)}let rO=b.length,rw=[...y].reverse(),rx=y.length;function rj(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r_(){return{animate:rj(!0),whileInView:rj(),whileHover:rj(),whileTap:rj(),whileDrag:rj(),whileFocus:rj(),exit:rj()}}class rP{constructor(e){this.isMounted=!1,this.node=e}update(){}}class rS extends rP{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t))n=Promise.all(t.map(t=>rv(e,t,r)));else if("string"==typeof t)n=rv(e,t,r);else{let o="function"==typeof t?m(e,t,r.custom):t;n=Promise.all(rb(e,o,r))}return n.then(()=>{e.notify("AnimationComplete",t)})})(e,t,r))),r=r_(),n=!0,o=t=>(r,n)=>{var o;let i=m(e,n,"exit"===t?null===(o=e.presenceContext)||void 0===o?void 0:o.custom:void 0);if(i){let{transition:e,transitionEnd:t,...n}=i;r={...r,...n,...t}}return r};function i(i){let{props:a}=e,s=function e(t){if(!t)return;if(!t.isControllingVariants){let r=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(r.initial=t.props.initial),r}let r={};for(let e=0;e<rO;e++){let n=b[e],o=t.props[n];(p(o)||!1===o)&&(r[n]=o)}return r}(e.parent)||{},u=[],d=new Set,h={},m=1/0;for(let t=0;t<rx;t++){var y;let b=rw[t],v=r[b],g=void 0!==a[b]?a[b]:s[b],O=p(g),w=b===i?v.isActive:null;!1===w&&(m=t);let x=g===s[b]&&g!==a[b]&&O;if(x&&n&&e.manuallyAnimateOnMount&&(x=!1),v.protectedKeys={...h},!v.isActive&&null===w||!g&&!v.prevProp||l(g)||"boolean"==typeof g)continue;let j=(y=v.prevProp,"string"==typeof g?g!==y:!!Array.isArray(g)&&!f(g,y)),_=j||b===i&&v.isActive&&!x&&O||t>m&&O,P=!1,S=Array.isArray(g)?g:[g],D=S.reduce(o(b),{});!1===w&&(D={});let{prevResolvedValues:k={}}=v,M={...k,...D},N=t=>{_=!0,d.has(t)&&(P=!0,d.delete(t)),v.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in M){let t=D[e],r=k[e];if(!h.hasOwnProperty(e))(c(t)&&c(r)?f(t,r):t===r)?void 0!==t&&d.has(e)?N(e):v.protectedKeys[e]=!0:null!=t?N(e):d.add(e)}v.prevProp=g,v.prevResolvedValues=D,v.isActive&&(h={...h,...D}),n&&e.blockInitialAnimation&&(_=!1);let E=!(x&&j)||P;_&&E&&u.push(...S.map(e=>({animation:e,options:{type:b}})))}if(d.size){let t={};d.forEach(r=>{let n=e.getBaseTarget(r),o=e.getValue(r);o&&(o.liveStyle=!0),t[r]=null!=n?n:null}),u.push({animation:t})}let v=!!u.length;return n&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(v=!1),n=!1,v?t(u):Promise.resolve()}return{animateChanges:i,setActive:function(t,n){var o;if(r[t].isActive===n)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach(e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,n)}),r[t].isActive=n;let a=i(t);for(let e in r)r[e].protectedKeys={};return a},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=r_(),n=!0}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();l(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}let rD=0;class rk extends rP{constructor(){super(...arguments),this.id=rD++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>t(this.id))}mount(){let{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}function rM(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function rN(e){return{point:{x:e.pageX,y:e.pageY}}}let rE=e=>t=>R(t)&&e(t,rN(t));function rA(e,t,r,n){return rM(e,t,rE(r),n)}let rT=(e,t)=>Math.abs(e-t);class rC{constructor(e,t,{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=rR(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){return Math.sqrt(rT(e.x,t.x)**2+rT(e.y,t.y)**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;let{point:n}=e,{timestamp:o}=en;this.history.push({...n,timestamp:o});let{onStart:i,onMove:a}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=r$(t,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:n,resumeAnimation:o}=this.handlers;if(this.dragSnapToOrigin&&o&&o(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let i=rR("pointercancel"===e.type?this.lastMoveEventInfo:r$(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,i),n&&n(e,i)},!R(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=n||window;let i=r$(rN(e),this.transformPagePoint),{point:a}=i,{timestamp:s}=en;this.history=[{...a,timestamp:s}];let{onSessionStart:u}=t;u&&u(e,rR(i,this.history)),this.removeListeners=tz(rA(this.contextWindow,"pointermove",this.handlePointerMove),rA(this.contextWindow,"pointerup",this.handlePointerUp),rA(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),er(this.updatePoint)}}function r$(e,t){return t?{point:t(e.point)}:e}function rI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function rR({point:e},t){return{point:e,delta:rI(e,rF(t)),offset:rI(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null,o=rF(e);for(;r>=0&&(n=e[r],!(o.timestamp-n.timestamp>z(.1)));)r--;if(!n)return{x:0,y:0};let i=K(o.timestamp-n.timestamp);if(0===i)return{x:0,y:0};let a={x:(o.x-n.x)/i,y:(o.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,0)}}function rF(e){return e[e.length-1]}function rB(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function rL(e){return e.max-e.min}function rq(e,t,r,n=.5){e.origin=n,e.originPoint=t$(t.min,t.max,e.origin),e.scale=rL(r)/rL(t),e.translate=t$(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function rV(e,t,r,n){rq(e.x,t.x,r.x,n?n.originX:void 0),rq(e.y,t.y,r.y,n?n.originY:void 0)}function rU(e,t,r){e.min=r.min+t.min,e.max=e.min+rL(t)}function rz(e,t,r){e.min=t.min-r.min,e.max=e.min+rL(t)}function rK(e,t,r){rz(e.x,t.x,r.x),rz(e.y,t.y,r.y)}function rW(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function rH(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function rY(e,t,r){return{min:rQ(e,t),max:rQ(e,r)}}function rQ(e,t){return"number"==typeof e?e:e[t]||0}let rG=()=>({translate:0,scale:1,origin:0,originPoint:0}),rX=()=>({x:rG(),y:rG()}),rZ=()=>({min:0,max:0}),rJ=()=>({x:rZ(),y:rZ()});function r0(e){return[e("x"),e("y")]}function r1({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function r2(e){return void 0===e||1===e}function r3({scale:e,scaleX:t,scaleY:r}){return!r2(e)||!r2(t)||!r2(r)}function r5(e){return r3(e)||r9(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function r9(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function r6(e,t,r,n,o){return void 0!==o&&(e=n+o*(e-n)),n+r*(e-n)+t}function r4(e,t=0,r=1,n,o){e.min=r6(e.min,t,r,n,o),e.max=r6(e.max,t,r,n,o)}function r8(e,{x:t,y:r}){r4(e.x,t.translate,t.scale,t.originPoint),r4(e.y,r.translate,r.scale,r.originPoint)}function r7(e,t){e.min=e.min+t,e.max=e.max+t}function ne(e,t,r,n,o=.5){let i=t$(e.min,e.max,o);r4(e,t,r,i,n)}function nt(e,t){ne(e.x,t.x,t.scaleX,t.scale,t.originX),ne(e.y,t.y,t.scaleY,t.scale,t.originY)}function nr(e,t){return r1(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}let nn=({current:e})=>e?e.ownerDocument.defaultView:null,no=new WeakMap;class ni{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rJ(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){let{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;let{dragSnapToOrigin:n}=this.getProps();this.panSession=new rC(e,{onSessionStart:e=>{let{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(rN(e).point)},onStart:(e,t)=>{let{drag:r,dragPropagation:n,onDragStart:o}=this.getProps();if(r&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===r||"y"===r?T[r]?null:(T[r]=!0,()=>{T[r]=!1}):T.x||T.y?null:(T.x=T.y=!0,()=>{T.x=T.y=!1}),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),r0(e=>{let t=this.getAxisMotionValue(e).get()||0;if(eW.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let n=r.layout.layoutBox[e];if(n){let e=rL(n);t=parseFloat(t)/100*e}}}this.originPoint[e]=t}),o&&et.postRender(()=>o(e,t)),em(this.visualElement,"transform");let{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{let{dragPropagation:r,dragDirectionLock:n,onDirectionLock:o,onDrag:i}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:a}=t;if(n&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(a),null!==this.currentDirection&&o&&o(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>r0(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,contextWindow:nn(this.visualElement)})}stop(e,t){let r=this.isDragging;if(this.cancel(),!r)return;let{velocity:n}=t;this.startAnimation(n);let{onDragEnd:o}=this.getProps();o&&et.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){let{drag:n}=this.getProps();if(!r||!na(e,n,this.currentDirection))return;let o=this.getAxisMotionValue(e),i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=function(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?t$(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?t$(r,e,n.max):Math.min(e,r)),e}(i,this.constraints[e],this.elastic[e])),o.set(i)}resolveConstraints(){var e;let{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,o=this.constraints;t&&rB(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=function(e,{top:t,left:r,bottom:n,right:o}){return{x:rW(e.x,r,o),y:rW(e.y,t,n)}}(n.layoutBox,t):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:rY(e,"left","right"),y:rY(e,"top","bottom")}}(r),o!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&r0(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){let r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!rB(t))return!1;let n=t.current;W(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:o}=this.visualElement;if(!o||!o.layout)return!1;let i=function(e,t,r){let n=nr(e,r),{scroll:o}=t;return o&&(r7(n.x,o.offset.x),r7(n.y,o.offset.y)),n}(n,o.root,this.visualElement.getTransformPagePoint()),a={x:rH((e=o.layout.layoutBox).x,i.x),y:rH(e.y,i.y)};if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=r1(e))}return a}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:n,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{};return Promise.all(r0(a=>{if(!na(a,t,this.currentDirection))return;let u=s&&s[a]||{};i&&(u={min:0,max:0});let l={type:"inertia",velocity:r?e[a]:0,bounceStiffness:n?200:1e6,bounceDamping:n?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...o,...u};return this.startAxisValueAnimation(a,l)})).then(a)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return em(this.visualElement,e),r.start(ry(e,r,0,t,this.visualElement,!1))}stopAnimation(){r0(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){r0(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){r0(t=>{let{drag:r}=this.getProps();if(!na(t,r,this.currentDirection))return;let{projection:n}=this.visualElement,o=this.getAxisMotionValue(t);if(n&&n.layout){let{min:r,max:i}=n.layout.layoutBox[t];o.set(e[t]-t$(r,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!rB(t)||!r||!this.constraints)return;this.stopAnimation();let n={x:0,y:0};r0(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){let r=t.get();n[e]=function(e,t){let r=.5,n=rL(e),o=rL(t);return o>n?r=M(t.min,t.max-n,e.min):n>o&&(r=M(e.min,e.max-o,t.min)),eE(0,1,r)}({min:r,max:r},this.constraints[e])}});let{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),r0(t=>{if(!na(t,e,null))return;let r=this.getAxisMotionValue(t),{min:o,max:i}=this.constraints[t];r.set(t$(o,i,n[t]))})}addListeners(){if(!this.visualElement.current)return;no.set(this.visualElement,this);let e=rA(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();rB(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,n=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),et.read(t);let o=rM(window,"resize",()=>this.scalePositionWithinConstraints()),i=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(r0(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{o(),e(),n(),i&&i()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:o=!1,dragElastic:i=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:o,dragElastic:i,dragMomentum:a}}}function na(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}class ns extends rP{constructor(e){super(e),this.removeGroupControls=W,this.removeListeners=W,this.controls=new ni(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||W}unmount(){this.removeGroupControls(),this.removeListeners()}}let nu=e=>(t,r)=>{e&&et.postRender(()=>e(t,r))};class nl extends rP{constructor(){super(...arguments),this.removePointerDownListener=W}onPointerDown(e){this.session=new rC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nn(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:nu(e),onStart:nu(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&et.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=rA(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let nc=(0,s.createContext)(null),nf=(0,s.createContext)({}),np=(0,s.createContext)({}),nd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nh(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let nm={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!eH.test(e))return e;e=parseFloat(e)}let r=nh(e,t.target.x),n=nh(e,t.target.y);return`${r}% ${n}%`}},ny={},{schedule:nb,cancel:nv}=ee(queueMicrotask,!1);class ng extends s.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:o}=e;Object.assign(ny,nw),o&&(t.group&&t.group.add(o),r&&r.register&&n&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),nd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:n,isPresent:o}=this.props,i=r.projection;return i&&(i.isPresent=o,n||e.layoutDependency!==t||void 0===t?i.willUpdate():this.safeToRemove(),e.isPresent===o||(o?i.promote():i.relegate()||et.postRender(()=>{let e=i.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function nO(e){let[t,r]=function(e=!0){let t=(0,s.useContext)(nc);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:n,register:o}=t,i=(0,s.useId)();(0,s.useEffect)(()=>{e&&o(i)},[e]);let a=(0,s.useCallback)(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,a]:[!0]}(),n=(0,s.useContext)(nf);return(0,a.jsx)(ng,{...e,layoutGroup:n,switchLayoutGroup:(0,s.useContext)(np),isPresent:t,safeToRemove:r})}let nw={borderRadius:{...nm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nm,borderTopRightRadius:nm,borderBottomLeftRadius:nm,borderBottomRightRadius:nm,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let n=e4.parse(e);if(n.length>5)return e;let o=e4.createTransformer(e),i="number"!=typeof n[0]?1:0,a=r.x.scale*t.x,s=r.y.scale*t.y;n[0+i]/=a,n[1+i]/=s;let u=t$(a,s,.5);return"number"==typeof n[2+i]&&(n[2+i]/=u),"number"==typeof n[3+i]&&(n[3+i]/=u),o(n)}}},nx=(e,t)=>e.depth-t.depth;class nj{constructor(){this.children=[],this.isDirty=!1}add(e){es(this.children,e),this.isDirty=!0}remove(e){eu(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nx),this.isDirty=!1,this.children.forEach(e)}}function n_(e){let t=eh(e)?e.get():e;return G(t)?t.toValue():t}let nP=["TopLeft","TopRight","BottomLeft","BottomRight"],nS=nP.length,nD=e=>"string"==typeof e?parseFloat(e):e,nk=e=>"number"==typeof e||eH.test(e);function nM(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let nN=nA(0,.5,ek),nE=nA(.5,.95,W);function nA(e,t,r){return n=>n<e?0:n>t?1:r(M(e,t,n))}function nT(e,t){e.min=t.min,e.max=t.max}function nC(e,t){nT(e.x,t.x),nT(e.y,t.y)}function n$(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function nI(e,t,r,n,o){return e-=t,e=n+1/r*(e-n),void 0!==o&&(e=n+1/o*(e-n)),e}function nR(e,t,[r,n,o],i,a){!function(e,t=0,r=1,n=.5,o,i=e,a=e){if(eW.test(t)&&(t=parseFloat(t),t=t$(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let s=t$(i.min,i.max,n);e===i&&(s-=t),e.min=nI(e.min,t,r,s,o),e.max=nI(e.max,t,r,s,o)}(e,t[r],t[n],t[o],t.scale,i,a)}let nF=["x","scaleX","originX"],nB=["y","scaleY","originY"];function nL(e,t,r,n){nR(e.x,t,nF,r?r.x:void 0,n?n.x:void 0),nR(e.y,t,nB,r?r.y:void 0,n?n.y:void 0)}function nq(e){return 0===e.translate&&1===e.scale}function nV(e){return nq(e.x)&&nq(e.y)}function nU(e,t){return e.min===t.min&&e.max===t.max}function nz(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function nK(e,t){return nz(e.x,t.x)&&nz(e.y,t.y)}function nW(e){return rL(e.x)/rL(e.y)}function nH(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class nY{constructor(){this.members=[]}add(e){es(this.members,e),e.scheduleRender()}remove(e){if(eu(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t;let r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let nQ={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},nG="undefined"!=typeof window&&void 0!==window.MotionDebug,nX=["","X","Y","Z"],nZ={visibility:"hidden"},nJ=0;function n0(e,t,r,n){let{latestValues:o}=t;o[e]&&(r[e]=o[e],t.setStaticValue(e,0),n&&(n[e]=0))}function n1({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:o}){return class{constructor(e={},r=null==t?void 0:t()){this.id=nJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,nG&&(nQ.totalNodes=nQ.resolvedTargetDeltas=nQ.recalculatedProjection=0),this.nodes.forEach(n5),this.nodes.forEach(ot),this.nodes.forEach(or),this.nodes.forEach(n9),nG&&window.MotionDebug.record(nQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new nj)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new el),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,r=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;let{layoutId:n,layout:o,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(o||n)&&(this.isLayoutDirty=!0),e){let r;let n=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,r&&r(),r=function(e,t){let r=ea.now(),n=({timestamp:t})=>{let o=t-r;o>=250&&(er(n),e(o-250))};return et.read(n,!0),()=>er(n)}(n,250),nd.hasAnimatedSinceResize&&(nd.hasAnimatedSinceResize=!1,this.nodes.forEach(oe))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&i&&(n||o)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let o=this.options.transition||i.getDefaultTransition()||ou,{onLayoutAnimationStart:a,onLayoutAnimationComplete:s}=i.getProps(),u=!this.targetLayout||!nK(this.targetLayout,n)||r,l=!t&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||l||t&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,l);let t={...x(o,"layout"),onPlay:a,onComplete:s};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||oe(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,er(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(on),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:r}=t.options;if(!r)return;let n=r.props[eb];if(window.MotionHasOptimisedAnimation(n,"transform")){let{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",et,!(e||r))}let{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&e(o)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(n4);return}this.isUpdating||this.nodes.forEach(n8),this.isUpdating=!1,this.nodes.forEach(n7),this.nodes.forEach(n2),this.nodes.forEach(n3),this.clearAllSnapshots();let e=ea.now();en.delta=eE(0,1e3/60,e-en.timestamp),en.timestamp=e,en.isProcessing=!0,eo.update.process(en),eo.preRender.process(en),eo.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(n6),this.sharedNodes.forEach(oo)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rJ(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){let t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!o)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!nV(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,i=n!==this.prevTransformTemplateValue;e&&(t||r5(this.latestValues)||i)&&(o(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),n=this.removeElementScroll(r);return e&&(n=this.removeTransform(n)),of((t=n).x),of(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;let{visualElement:t}=this.options;if(!t)return rJ();let r=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(od))){let{scroll:e}=this.root;e&&(r7(r.x,e.offset.x),r7(r.y,e.offset.y))}return r}removeElementScroll(e){var t;let r=rJ();if(nC(r,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return r;for(let t=0;t<this.path.length;t++){let n=this.path[t],{scroll:o,options:i}=n;n!==this.root&&o&&i.layoutScroll&&(o.wasRoot&&nC(r,e),r7(r.x,o.offset.x),r7(r.y,o.offset.y))}return r}applyTransform(e,t=!1){let r=rJ();nC(r,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];!t&&n.options.layoutScroll&&n.scroll&&n!==n.root&&nt(r,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),r5(n.latestValues)&&nt(r,n.latestValues)}return r5(this.latestValues)&&nt(r,this.latestValues),r}removeTransform(e){let t=rJ();nC(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!r5(r.latestValues))continue;r3(r.latestValues)&&r.updateSnapshot();let n=rJ();nC(n,r.measurePageBox()),nL(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,n)}return r5(this.latestValues)&&nL(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t,r,n,o;let i=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=i.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=i.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=i.isSharedProjectionDirty);let a=!!this.resumingFrom||this!==i;if(!(e||a&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:s,layoutId:u}=this.options;if(this.layout&&(s||u)){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rJ(),this.relativeTargetOrigin=rJ(),rK(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),nC(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if((this.target||(this.target=rJ(),this.targetWithTransforms=rJ()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),r=this.target,n=this.relativeTarget,o=this.relativeParent.target,rU(r.x,n.x,o.x),rU(r.y,n.y,o.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nC(this.target,this.layout.layoutBox),r8(this.target,this.targetDelta)):nC(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rJ(),this.relativeTargetOrigin=rJ(),rK(this.relativeTargetOrigin,this.target,e.target),nC(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}nG&&nQ.resolvedTargetDeltas++}}}getClosestProjectingParent(){return!this.parent||r3(this.parent.latestValues)||r9(this.parent.latestValues)?void 0:this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let t=this.getLead(),r=!!this.resumingFrom||this!==t,n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===en.timestamp&&(n=!1),n)return;let{layout:o,layoutId:i}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(o||i))return;nC(this.layoutCorrected,this.layout.layoutBox);let a=this.treeScale.x,s=this.treeScale.y;(function(e,t,r,n=!1){let o,i;let a=r.length;if(a){t.x=t.y=1;for(let s=0;s<a;s++){i=(o=r[s]).projectionDelta;let{visualElement:a}=o.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&nt(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,r8(e,i)),n&&r5(o.latestValues)&&nt(e,o.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}})(this.layoutCorrected,this.treeScale,this.path,r),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox,t.targetWithTransforms=rJ());let{target:u}=t;if(!u){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(n$(this.prevProjectionDelta.x,this.projectionDelta.x),n$(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),rV(this.projectionDelta,this.layoutCorrected,u,this.latestValues),this.treeScale.x===a&&this.treeScale.y===s&&nH(this.projectionDelta.x,this.prevProjectionDelta.x)&&nH(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u)),nG&&nQ.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rX(),this.projectionDelta=rX(),this.projectionDeltaWithTransform=rX()}setAnimationOrigin(e,t=!1){let r;let n=this.snapshot,o=n?n.latestValues:{},i={...this.latestValues},a=rX();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let s=rJ(),u=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,f=!!(u&&!c&&!0===this.options.crossfade&&!this.path.some(os));this.animationProgress=0,this.mixTargetDelta=t=>{let n=t/1e3;if(oi(a.x,e.x,n),oi(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var l,p,d,h;rK(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),d=this.relativeTarget,h=this.relativeTargetOrigin,oa(d.x,h.x,s.x,n),oa(d.y,h.y,s.y,n),r&&(l=this.relativeTarget,p=r,nU(l.x,p.x)&&nU(l.y,p.y))&&(this.isProjectionDirty=!1),r||(r=rJ()),nC(r,this.relativeTarget)}u&&(this.animationValues=i,function(e,t,r,n,o,i){o?(e.opacity=t$(0,void 0!==r.opacity?r.opacity:1,nN(n)),e.opacityExit=t$(void 0!==t.opacity?t.opacity:1,0,nE(n))):i&&(e.opacity=t$(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(let o=0;o<nS;o++){let i=`border${nP[o]}Radius`,a=nM(t,i),s=nM(r,i);(void 0!==a||void 0!==s)&&(a||(a=0),s||(s=0),0===a||0===s||nk(a)===nk(s)?(e[i]=Math.max(t$(nD(a),nD(s),n),0),(eW.test(s)||eW.test(a))&&(e[i]+="%")):e[i]=s)}(t.rotate||r.rotate)&&(e.rotate=t$(t.rotate||0,r.rotate||0,n))}(i,o,this.latestValues,n,f,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(er(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{nd.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){let n=eh(0)?0:ed(0);return n.start(ry("",n,1e3,r)),n.animation}(0,0,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:n,latestValues:o}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&op(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||rJ();let t=rL(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let n=rL(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}nC(t,r),nt(t,o),rV(this.projectionDeltaWithTransform,this.layoutCorrected,t,o)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new nY),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let n={};r.z&&n0("z",e,n,this.animationValues);for(let t=0;t<nX.length;t++)n0(`rotate${nX[t]}`,e,n,this.animationValues),n0(`skew${nX[t]}`,e,n,this.animationValues);for(let t in e.render(),n)e.setStaticValue(t,n[t]),this.animationValues&&(this.animationValues[t]=n[t]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nZ;let n={visibility:""},o=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=n_(null==e?void 0:e.pointerEvents)||"",n.transform=o?o(this.latestValues,""):"none",n;let i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){let t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=n_(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!r5(this.latestValues)&&(t.transform=o?o({},""):"none",this.hasProjected=!1),t}let a=i.animationValues||i.latestValues;this.applyTransformsToTarget(),n.transform=function(e,t,r){let n="",o=e.x.translate/t.x,i=e.y.translate/t.y,a=(null==r?void 0:r.z)||0;if((o||i||a)&&(n=`translate3d(${o}px, ${i}px, ${a}px) `),(1!==t.x||1!==t.y)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:o,rotateY:i,skewX:a,skewY:s}=r;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),o&&(n+=`rotateX(${o}deg) `),i&&(n+=`rotateY(${i}deg) `),a&&(n+=`skewX(${a}deg) `),s&&(n+=`skewY(${s}deg) `)}let s=e.x.scale*t.x,u=e.y.scale*t.y;return(1!==s||1!==u)&&(n+=`scale(${s}, ${u})`),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,a),o&&(n.transform=o(a,n.transform));let{x:s,y:u}=this.projectionDelta;for(let e in n.transformOrigin=`${100*s.origin}% ${100*u.origin}% 0`,i.animationValues?n.opacity=i===this?null!==(r=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:n.opacity=i===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0,ny){if(void 0===a[e])continue;let{correct:t,applyTo:r}=ny[e],o="none"===n.transform?a[e]:t(a[e],i);if(r){let e=r.length;for(let t=0;t<e;t++)n[r[t]]=o}else n[e]=o}return this.options.layoutId&&(n.pointerEvents=i===this?n_(null==e?void 0:e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(n4),this.root.sharedNodes.clear()}}}function n2(e){e.updateLayout()}function n3(e){var t;let r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){let{layoutBox:t,measuredBox:n}=e.layout,{animationType:o}=e.options,i=r.source!==e.layout.source;"size"===o?r0(e=>{let n=i?r.measuredBox[e]:r.layoutBox[e],o=rL(n);n.min=t[e].min,n.max=n.min+o}):op(o,r.layoutBox,t)&&r0(n=>{let o=i?r.measuredBox[n]:r.layoutBox[n],a=rL(t[n]);o.max=o.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+a)});let a=rX();rV(a,t,r.layoutBox);let s=rX();i?rV(s,e.applyTransform(n,!0),r.measuredBox):rV(s,t,r.layoutBox);let u=!nV(a),l=!1;if(!e.resumeFrom){let n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){let{snapshot:o,layout:i}=n;if(o&&i){let a=rJ();rK(a,r.layoutBox,o.layoutBox);let s=rJ();rK(s,t,i.layoutBox),nK(a,s)||(l=!0),n.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=a,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:s,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:l})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function n5(e){nG&&nQ.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function n9(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function n6(e){e.clearSnapshot()}function n4(e){e.clearMeasurements()}function n8(e){e.isLayoutDirty=!1}function n7(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function oe(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ot(e){e.resolveTargetDelta()}function or(e){e.calcProjection()}function on(e){e.resetSkewAndRotation()}function oo(e){e.removeLeadSnapshot()}function oi(e,t,r){e.translate=t$(t.translate,0,r),e.scale=t$(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function oa(e,t,r,n){e.min=t$(t.min,r.min,n),e.max=t$(t.max,r.max,n)}function os(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let ou={duration:.45,ease:[.4,0,.1,1]},ol=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),oc=ol("applewebkit/")&&!ol("chrome/")?Math.round:W;function of(e){e.min=oc(e.min),e.max=oc(e.max)}function op(e,t,r){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(nW(t)-nW(r)))}function od(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}let oh=n1({attachResizeListener:(e,t)=>rM(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),om={current:void 0},oy=n1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!om.current){let e=new oh({});e.mount(window),e.setOptions({layoutScroll:!0}),om.current=e}return om.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function ob(e,t,r){let{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===r);let o=n["onHover"+r];o&&et.postRender(()=>o(t,rN(t)))}class ov extends rP{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[n,o,i]=C(e,r),a=$(e=>{let{target:r}=e,n=t(e);if("function"!=typeof n||!r)return;let i=$(e=>{n(e),r.removeEventListener("pointerleave",i)});r.addEventListener("pointerleave",i,o)});return n.forEach(e=>{e.addEventListener("pointerenter",a,o)}),i}(e,e=>(ob(this.node,e,"Start"),e=>ob(this.node,e,"End"))))}unmount(){}}class og extends rP{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tz(rM(this.node.current,"focus",()=>this.onFocus()),rM(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function oO(e,t,r){let{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===r);let o=n["onTap"+("End"===r?"":r)];o&&et.postRender(()=>o(t,rN(t)))}class ow extends rP{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[n,o,i]=C(e,r),a=e=>{let n=e.currentTarget;if(!U(e)||B.has(n))return;B.add(n);let i=t(e),a=(e,t)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",u),U(e)&&B.has(n)&&(B.delete(n),"function"==typeof i&&i(e,{success:t}))},s=e=>{a(e,r.useGlobalTarget||I(n,e.target))},u=e=>{a(e,!1)};window.addEventListener("pointerup",s,o),window.addEventListener("pointercancel",u,o)};return n.forEach(e=>{F.has(e.tagName)||-1!==e.tabIndex||null!==e.getAttribute("tabindex")||(e.tabIndex=0),(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,o),e.addEventListener("focus",e=>V(e,o),o)}),i}(e,e=>(oO(this.node,e,"Start"),(e,{success:t})=>oO(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}let ox=new WeakMap,oj=new WeakMap,o_=e=>{let t=ox.get(e.target);t&&t(e)},oP=e=>{e.forEach(o_)},oS={some:0,all:1};class oD extends rP{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:o}=e,i={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof n?n:oS[n]};return function(e,t,r){let n=function({root:e,...t}){let r=e||document;oj.has(r)||oj.set(r,{});let n=oj.get(r),o=JSON.stringify(t);return n[o]||(n[o]=new IntersectionObserver(oP,{root:e,...t})),n[o]}(t);return ox.set(e,r),n.observe(e),()=>{ox.delete(e),n.unobserve(e)}}(this.node.current,i,e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,o&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),i=t?r:n;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}let ok=(0,s.createContext)({strict:!1}),oM=(0,s.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),oN=(0,s.createContext)({});function oE(e){return l(e.animate)||b.some(t=>p(e[t]))}function oA(e){return!!(oE(e)||e.variants)}function oT(e){return Array.isArray(e)?e.join(" "):e}let oC="undefined"!=typeof window,o$={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},oI={};for(let e in o$)oI[e]={isEnabled:t=>o$[e].some(e=>!!t[e])};let oR=Symbol.for("motionComponentSymbol"),oF=oC?s.useLayoutEffect:s.useEffect,oB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oL(e){if("string"!=typeof e||e.includes("-"));else if(oB.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let oq=e=>(t,r)=>{let n=(0,s.useContext)(oN),o=(0,s.useContext)(nc),i=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,o,i){let a={latestValues:function(e,t,r,n){let o={},i=n(e,{});for(let e in i)o[e]=n_(i[e]);let{initial:a,animate:s}=e,u=oE(e),c=oA(e);t&&c&&!u&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===s&&(s=t.animate));let f=!!r&&!1===r.initial,p=(f=f||!1===a)?s:a;if(p&&"boolean"!=typeof p&&!l(p)){let t=Array.isArray(p)?p:[p];for(let r=0;r<t.length;r++){let n=h(e,t[r]);if(n){let{transitionEnd:e,transition:t,...r}=n;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=f?t.length-1:0;t=t[e]}null!==t&&(o[e]=t)}for(let t in e)o[t]=e[t]}}}return o}(n,o,i,e),renderState:t()};return r&&(a.onMount=e=>r({props:n,current:e,...a}),a.onUpdate=e=>r(e)),a})(e,t,n,o);return r?i():function(e){let t=(0,s.useRef)(null);return null===t.current&&(t.current=e()),t.current}(i)},oV=(e,t)=>t&&"number"==typeof e?t.transform(e):e,oU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oz=H.length;function oK(e,t,r){let{style:n,vars:o,transformOrigin:i}=e,a=!1,s=!1;for(let e in t){let r=t[e];if(Y.has(e)){a=!0;continue}if(tx(e)){o[e]=r;continue}{let t=oV(r,tn[e]);e.startsWith("origin")?(s=!0,i[e]=t):n[e]=t}}if(!t.transform&&(a||r?n.transform=function(e,t,r){let n="",o=!0;for(let i=0;i<oz;i++){let a=H[i],s=e[a];if(void 0===s)continue;let u=!0;if(!(u="number"==typeof s?s===(a.startsWith("scale")?1:0):0===parseFloat(s))||r){let e=oV(s,tn[a]);if(!u){o=!1;let t=oU[a]||a;n+=`${t}(${e}) `}r&&(t[a]=e)}}return n=n.trim(),r?n=r(t,o?"":n):o&&(n="none"),n}(t,e.transform,r):n.transform&&(n.transform="none")),s){let{originX:e="50%",originY:t="50%",originZ:r=0}=i;n.transformOrigin=`${e} ${t} ${r}`}}let oW={offset:"stroke-dashoffset",array:"stroke-dasharray"},oH={offset:"strokeDashoffset",array:"strokeDasharray"};function oY(e,t,r){return"string"==typeof e?e:eH.transform(t+r*e)}function oQ(e,{attrX:t,attrY:r,attrScale:n,originX:o,originY:i,pathLength:a,pathSpacing:s=1,pathOffset:u=0,...l},c,f){if(oK(e,l,f),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:p,style:d,dimensions:h}=e;p.transform&&(h&&(d.transform=p.transform),delete p.transform),h&&(void 0!==o||void 0!==i||d.transform)&&(d.transformOrigin=function(e,t,r){let n=oY(t,e.x,e.width),o=oY(r,e.y,e.height);return`${n} ${o}`}(h,void 0!==o?o:.5,void 0!==i?i:.5)),void 0!==t&&(p.x=t),void 0!==r&&(p.y=r),void 0!==n&&(p.scale=n),void 0!==a&&function(e,t,r=1,n=0,o=!0){e.pathLength=1;let i=o?oW:oH;e[i.offset]=eH.transform(-n);let a=eH.transform(t),s=eH.transform(r);e[i.array]=`${a} ${s}`}(p,a,s,u,!1)}let oG=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),oX=()=>({...oG(),attrs:{}}),oZ=e=>"string"==typeof e&&"svg"===e.toLowerCase();function oJ(e,{style:t,vars:r},n,o){for(let i in Object.assign(e.style,t,o&&o.getProjectionStyles(n)),r)e.style.setProperty(i,r[i])}let o0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o1(e,t,r,n){for(let r in oJ(e,t,void 0,n),t.attrs)e.setAttribute(o0.has(r)?r:ey(r),t.attrs[r])}function o2(e,{layout:t,layoutId:r}){return Y.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!ny[e]||"opacity"===e)}function o3(e,t,r){var n;let{style:o}=e,i={};for(let a in o)(eh(o[a])||t.style&&eh(t.style[a])||o2(a,e)||(null===(n=null==r?void 0:r.getValue(a))||void 0===n?void 0:n.liveStyle)!==void 0)&&(i[a]=o[a]);return i}function o5(e,t,r){let n=o3(e,t,r);for(let r in e)(eh(e[r])||eh(t[r]))&&(n[-1!==H.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return n}let o9=["x","y","width","height","cx","cy","r"],o6={useVisualState:oq({scrapeMotionValuesFromProps:o5,createRenderState:oX,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:o})=>{if(!r)return;let i=!!e.drag;if(!i){for(let e in o)if(Y.has(e)){i=!0;break}}if(!i)return;let a=!t;if(t)for(let r=0;r<o9.length;r++){let n=o9[r];e[n]!==t[n]&&(a=!0)}a&&et.read(()=>{(function(e,t){try{t.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(e){t.dimensions={x:0,y:0,width:0,height:0}}})(r,n),et.render(()=>{oQ(n,o,oZ(r.tagName),e.transformTemplate),o1(r,n)})})}})},o4={useVisualState:oq({scrapeMotionValuesFromProps:o3,createRenderState:oG})};function o8(e,t,r){for(let n in t)eh(t[n])||o2(n,r)||(e[n]=t[n])}let o7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ie(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||o7.has(e)}let it=e=>!ie(e);try{!function(e){e&&(it=t=>t.startsWith("on")?!ie(t):e(t))}(require("@emotion/is-prop-valid").default)}catch(e){}let ir={current:null},io={current:!1},ii=[...tk,eZ,e4],ia=e=>ii.find(tD(e)),is=new WeakMap,iu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class il{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:o,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=ea.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,et.render(this.render,!1,!0))};let{latestValues:s,renderState:u,onUpdate:l}=i;this.onUpdate=l,this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=oE(t),this.isVariantNode=oA(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:c,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in f){let t=f[e];void 0!==s[e]&&eh(t)&&t.set(s[e],!1)}}mount(e){this.current=e,is.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),io.current||function(){if(io.current=!0,oC){if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ir.current=e.matches;e.addListener(t),t()}else ir.current=!1}}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ir.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in is.delete(this.current),this.projection&&this.projection.unmount(),er(this.notifyUpdate),er(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let n=Y.has(e),o=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&et.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{o(),i(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in oI){let t=oI[e];if(!t)continue;let{isEnabled:r,Feature:n}=t;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rJ()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<iu.length;t++){let r=iu[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let n=e["on"+r];n&&(this.propEventSubscriptions[r]=this.on(r,n))}this.prevMotionValues=function(e,t,r){for(let n in t){let o=t[n],i=r[n];if(eh(o))e.addValue(n,o);else if(eh(i))e.addValue(n,ed(o,{owner:e}));else if(i!==o){if(e.hasValue(n)){let t=e.getValue(n);!0===t.liveStyle?t.jump(o):t.hasAnimated||t.set(o)}else{let t=e.getStaticValue(n);e.addValue(n,ed(void 0!==t?t:o,{owner:e}))}}}for(let n in r)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=ed(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let n=void 0===this.latestValues[e]&&this.current?null!==(r=this.getBaseTargetFromProps(this.props,e))&&void 0!==r?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=n&&("string"==typeof n&&(tO(n)||eN(n))?n=parseFloat(n):!ia(n)&&e4.test(t)&&(n=ta(e,t)),this.setBaseTarget(e,eh(n)?n.get():n)),eh(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;let r;let{initial:n}=this.props;if("string"==typeof n||"object"==typeof n){let o=h(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);o&&(r=o[e])}if(n&&void 0!==r)return r;let o=this.getBaseTargetFromProps(this.props,e);return void 0===o||eh(o)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:o}on(e,t){return this.events[e]||(this.events[e]=new el),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class ic extends il{constructor(){super(...arguments),this.KeyframeResolver=tN}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;eh(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class ip extends ic{constructor(){super(...arguments),this.type="html",this.renderInstance=oJ}readValueFromInstance(e,t){if(Y.has(t)){let e=ti(t);return e&&e.default||0}{let r=window.getComputedStyle(e),n=(tx(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof n?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:t}){return nr(e,t)}build(e,t,r){oK(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return o3(e,t,r)}}class id extends ic{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=rJ}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Y.has(t)){let e=ti(t);return e&&e.default||0}return t=o0.has(t)?t:ey(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return o5(e,t,r)}build(e,t,r){oQ(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,n){o1(e,t,r,n)}mount(e){this.isSVGTag=oZ(e.tagName),super.mount(e)}}let ih=function(e){if("undefined"==typeof Proxy)return e;let t=new Map;return new Proxy((...t)=>e(...t),{get:(r,n)=>"create"===n?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}((o={animation:{Feature:rS},exit:{Feature:rk},inView:{Feature:oD},tap:{Feature:ow},focus:{Feature:og},hover:{Feature:ov},pan:{Feature:nl},drag:{Feature:ns,ProjectionNode:oy,MeasureLayout:nO},layout:{ProjectionNode:oy,MeasureLayout:nO}},i=(e,t)=>oL(e)?new id(t):new ip(t,{allowProjection:e!==s.Fragment}),function(e,{forwardMotionProps:t}={forwardMotionProps:!1}){return function({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:o}){var i,u;function l(e,i){var u;let l;let c={...(0,s.useContext)(oM),...e,layoutId:function({layoutId:e}){let t=(0,s.useContext)(nf).id;return t&&void 0!==e?t+"-"+e:e}(e)},{isStatic:f}=c,d=function(e){let{initial:t,animate:r}=function(e,t){if(oE(e)){let{initial:t,animate:r}=e;return{initial:!1===t||p(t)?t:void 0,animate:p(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,s.useContext)(oN));return(0,s.useMemo)(()=>({initial:t,animate:r}),[oT(t),oT(r)])}(e),h=n(e,f);if(!f&&oC){(0,s.useContext)(ok).strict;let e=function(e){let{drag:t,layout:r}=oI;if(!t&&!r)return{};let n={...t,...r};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==r?void 0:r.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(c);l=e.MeasureLayout,d.visualElement=function(e,t,r,n,o){var i,a;let{visualElement:u}=(0,s.useContext)(oN),l=(0,s.useContext)(ok),c=(0,s.useContext)(nc),f=(0,s.useContext)(oM).reducedMotion,p=(0,s.useRef)(null);n=n||l.renderer,!p.current&&n&&(p.current=n(e,{visualState:t,parent:u,props:r,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:f}));let d=p.current,h=(0,s.useContext)(np);d&&!d.projection&&o&&("html"===d.type||"svg"===d.type)&&function(e,t,r,n){let{layoutId:o,layout:i,drag:a,dragConstraints:s,layoutScroll:u,layoutRoot:l}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!a||s&&rB(s),visualElement:e,animationType:"string"==typeof i?i:"both",initialPromotionConfig:n,layoutScroll:u,layoutRoot:l})}(p.current,r,o,h);let m=(0,s.useRef)(!1);(0,s.useInsertionEffect)(()=>{d&&m.current&&d.update(r,c)});let y=r[eb],b=(0,s.useRef)(!!y&&!(null===(i=window.MotionHandoffIsComplete)||void 0===i?void 0:i.call(window,y))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,y)));return oF(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),nb.render(d.render),b.current&&d.animationState&&d.animationState.animateChanges())}),(0,s.useEffect)(()=>{d&&(!b.current&&d.animationState&&d.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,y)}),b.current=!1))}),d}(o,h,c,t,e.ProjectionNode)}return(0,a.jsxs)(oN.Provider,{value:d,children:[l&&d.visualElement?(0,a.jsx)(l,{visualElement:d.visualElement,...c}):null,r(o,e,(u=d.visualElement,(0,s.useCallback)(e=>{e&&h.onMount&&h.onMount(e),u&&(e?u.mount(e):u.unmount()),i&&("function"==typeof i?i(e):rB(i)&&(i.current=e))},[u])),h,f,d.visualElement)]})}e&&function(e){for(let t in e)oI[t]={...oI[t],...e[t]}}(e),l.displayName=`motion.${"string"==typeof o?o:`create(${null!==(u=null!==(i=o.displayName)&&void 0!==i?i:o.name)&&void 0!==u?u:""})`}`;let c=(0,s.forwardRef)(l);return c[oR]=o,c}({...oL(e)?o6:o4,preloadedFeatures:o,useRender:function(e=!1){return(t,r,n,{latestValues:o},i)=>{let a=(oL(t)?function(e,t,r,n){let o=(0,s.useMemo)(()=>{let r=oX();return oQ(r,t,oZ(n),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};o8(t,e.style,e),o.style={...t,...o.style}}return o}:function(e,t){let r={},n=function(e,t){let r=e.style||{},n={};return o8(n,r,e),Object.assign(n,function({transformTemplate:e},t){return(0,s.useMemo)(()=>{let r=oG();return oK(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),n}(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r})(r,o,i,t),u=function(e,t,r){let n={};for(let o in e)("values"!==o||"object"!=typeof e.values)&&(it(o)||!0===r&&ie(o)||!t&&!ie(o)||e.draggable&&o.startsWith("onDrag"))&&(n[o]=e[o]);return n}(r,"string"==typeof t,e),l=t!==s.Fragment?{...u,...a,ref:n}:{},{children:c}=r,f=(0,s.useMemo)(()=>eh(c)?c.get():c,[c]);return(0,s.createElement)(t,{...l,children:f})}}(t),createVisualElement:i,Component:e})}));function im({title:e,description:t,children:r,showBack:n=!1,onBack:o}){return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,a.jsxs)(ih.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8 md:p-12",children:[n&&o&&(0,a.jsxs)("button",{onClick:o,className:"mb-6 text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),a.jsx(ih.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:e}),t&&a.jsx(ih.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-lg text-gray-600 mb-8",children:t}),a.jsx(ih.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"space-y-3",children:r})]})})}function iy({label:e,shortcut:t,onClick:r,variant:n="primary",disabled:o=!1,autoFocus:i=!1}){let u=(0,s.useRef)(null);return a.jsx(ih.button,{ref:u,whileHover:{scale:o?1:1.02},whileTap:{scale:o?1:.98},className:`w-full px-6 py-4 rounded-lg text-left transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 ${{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",outline:"border-2 border-gray-300 text-gray-700 hover:border-gray-400 focus:ring-gray-500"}[n]} ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onClick:r,onKeyDown:e=>{"Enter"!==e.key||o||(e.preventDefault(),r()),t&&(e.key===t||e.key===`Digit${t}`)&&!o&&(e.preventDefault(),r())},disabled:o,autoFocus:i,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-lg font-medium",children:e}),t&&a.jsx("span",{className:"text-sm opacity-70 bg-white/20 px-2 py-1 rounded",children:t.toUpperCase()})]})})}function ib({label:e,value:t,onChange:r,min:n,max:o,required:i=!1,autoFocus:s=!1}){return(0,a.jsxs)(ih.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e,i&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsx("input",{type:"date",value:t,onChange:e=>r(e.target.value),min:n,max:o,required:i,autoFocus:s,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"})]})}function iv({label:e,value:t,onChange:r,min:n,max:o,step:i=1,required:s=!1,placeholder:u,autoFocus:l=!1}){return(0,a.jsxs)(ih.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e,s&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsx("input",{type:"number",value:t,onChange:e=>{let t=parseFloat(e.target.value);isNaN(t)?r(0):r(t)},min:n,max:o,step:i,required:s,placeholder:u,autoFocus:l,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"})]})}function ig({label:e,value:t,onChange:r,placeholder:n,required:o=!1,rows:i=4,autoFocus:s=!1}){return(0,a.jsxs)(ih.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[e,o&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsx("textarea",{value:t,onChange:e=>r(e.target.value),placeholder:n,required:o,rows:i,autoFocus:s,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg resize-none"})]})}let iO=["en","sl","de"],iw={en:{common:{next:"Next",back:"Back",cancel:"Cancel",submit:"Submit",save:"Save",delete:"Delete",edit:"Edit",yes:"Yes",no:"No",loading:"Loading...",backToFirstPage:"Back to first page",close:"Close"},absence:{title:"Request Absence",myRequests:"My Requests",newRequest:"Start New Request",ongoing:"Ongoing",upcoming:"Upcoming",pending:"Pending",rejected:"Rejected",showAllHistory:"Show All History",hideHistory:"Hide History",allHistory:"All History",showHolidays:"Show Public Holidays",publicHolidays:"Public Holidays",holidays:"Holidays",noHistory:"No history available",showFeatures:"Show Features",features:"Features",showDocumentation:"Show Documentation",documentation:"Documentation",abortRequest:"Abort",resendRequest:"Resend",selectType:"What type of absence would you like to request?",selectOffice:"Which office are you requesting absence for?",selectDuration:"How long?",selectDate:"Select date",selectStartDate:"Start date",selectEndDate:"End date",selectHours:"Number of hours",selectDays:"Number of days",addNote:"Add a note (optional)",notePlaceholder:"Enter any additional information...",review:"Review your request",submitted:"Request submitted successfully",types:{vacation:"Vacation",sick_leave:"Sick Leave",parental_leave:"Parental Leave",sick_child:"Care for sick child",work_from_home:"Work from Home",knowledge_time:"Knowledge Time",flex_time:"Flex Time",paid_leave:"Paid Leave",unpaid_leave:"Unpaid Leave",care_relative:"Care of Close Relative",military_duties:"Military Duties"},duration:{hours:"Hours",days:"Days"}},office:{ljubljana:"Ljubljana",munich:"Munich"},status:{pending:"Pending",sent:"Sent",approved:"Approved",denied:"Denied",cancelled:"Cancelled"},manager:{dashboard:"Manager Dashboard",approve:"Yes - Approve",deny:"No - Deny",backToUserList:"Back to User List",backToRoleList:"Back to Role List",backToDashboard:"Back to Dashboard",addRole:"Add Role",createNewRole:"Create New Role",roleManagement:"Role Management",allUsers:"All Users",showPublicHolidays:"Show Public Holidays",listAllUsers:"List All Users",manageRoles:"Manage Roles",noPendingRequests:"No pending requests",noApprovedRequests:"No approved requests",noDeniedRequests:"No denied requests",noRequests:"No requests",noRolesAvailable:"No roles available. Create roles in Role Management.",publicHolidays:"Public Holidays",logout:"Logout",searchUsers:"Search users by name, email, or role...",noUsersFound:"No users found.",noUsersFoundSearch:"No users found matching your search.",roleName:"Role name",create:"Create",currentName:"Current name",usedBy:"Used by",user:"user",users:"users",renameRole:"Rename Role",newRoleName:"New role name",rename:"Rename",existingRoles:"Existing Roles",noRolesCreated:"No roles created yet.",roles:"Roles",email:"Email",role:"Role",office:"Office",startDate:"Start Date",endDate:"End Date",hours:"Hours",days:"Days",note:"Note"},login:{demoManager:"\uD83D\uDC54 Demo Manager",demoEmployee:"\uD83D\uDC64 Demo Employee",demoAccountsNote:"These are demo accounts connected to each other. The employee reports to the manager."}},sl:{common:{next:"Naprej",back:"Nazaj",cancel:"Preklii",submit:"Polji",save:"Shrani",delete:"Izbrii",edit:"Uredi",yes:"Da",no:"Ne",loading:"Nalaganje...",backToFirstPage:"Nazaj na prvo stran",close:"Zapri"},absence:{title:"Zahtevaj odsotnost",myRequests:"Moje zahteve",newRequest:"Zani novo zahtevo",ongoing:"V teku",upcoming:"Prihajajoe",pending:"V akanju",rejected:"Zavrnjeno",showAllHistory:"Prikai vso zgodovino",hideHistory:"Skrij zgodovino",allHistory:"Vsa zgodovina",showHolidays:"Prikai javne praznike",publicHolidays:"Javni prazniki",holidays:"Prazniki",noHistory:"Ni zgodovine na voljo",showFeatures:"Prikai funkcije",features:"Funkcije",showDocumentation:"Prikai dokumentacijo",documentation:"Dokumentacija",abortRequest:"Preklii",resendRequest:"Ponovno polji",selectType:"Kakno odsotnost elite zahtevati?",selectOffice:"Za katero pisarno zahtevate odsotnost?",selectDuration:"Kako dolgo?",selectDate:"Izberite datum",selectStartDate:"Zaetni datum",selectEndDate:"Konni datum",selectHours:"tevilo ur",selectDays:"tevilo dni",addNote:"Dodajte opombo (neobvezno)",notePlaceholder:"Vnesite dodatne informacije...",review:"Preglejte svojo zahtevo",submitted:"Zahteva je bila uspeno poslana",types:{vacation:"Dopust",sick_leave:"Bolnica",parental_leave:"Starevski dopust",sick_child:"Skrb za bolnega otroka",work_from_home:"Delo od doma",knowledge_time:"as za znanje",flex_time:"Fleksibilni as",paid_leave:"Plaan dopust",unpaid_leave:"Neplaan dopust",care_relative:"Skrb za sorodnika",military_duties:"Vojake obveznosti"},duration:{hours:"Ure",days:"Dni"}},office:{ljubljana:"Ljubljana",munich:"M\xfcnchen"},status:{pending:"V teku",sent:"Poslano",approved:"Odobreno",denied:"Zavrnjeno",cancelled:"Preklicano"},manager:{dashboard:"Upravljalski nadzor",approve:"Da - Odobri",deny:"Ne - Zavrni",backToUserList:"Nazaj na seznam uporabnikov",backToRoleList:"Nazaj na seznam vlog",backToDashboard:"Nazaj na nadzorno ploo",addRole:"Dodaj vlogo",createNewRole:"Ustvari novo vlogo",roleManagement:"Upravljanje vlog",allUsers:"Vsi uporabniki",showPublicHolidays:"Prikai javne praznike",listAllUsers:"Prikai vse uporabnike",manageRoles:"Upravljaj vloge",noPendingRequests:"Ni akajoih zahtev",noApprovedRequests:"Ni odobrenih zahtev",noDeniedRequests:"Ni zavrnjenih zahtev",noRequests:"Ni zahtev",noRolesAvailable:"Ni razpololjivih vlog. Ustvarite vloge v upravljanju vlog.",publicHolidays:"Javni prazniki",logout:"Odjava",searchUsers:"Ii uporabnike po imenu, e-poti ali vlogi...",noUsersFound:"Ni najdenih uporabnikov.",noUsersFoundSearch:"Ni najdenih uporabnikov, ki bi ustrezali vaemu iskanju.",roleName:"Ime vloge",create:"Ustvari",currentName:"Trenutno ime",usedBy:"Uporablja",user:"uporabnik",users:"uporabniki",renameRole:"Preimenuj vlogo",newRoleName:"Novo ime vloge",rename:"Preimenuj",existingRoles:"Obstojee vloge",noRolesCreated:"e ni ustvarjenih vlog.",roles:"Vloge",email:"E-pota",role:"Vloga",office:"Pisarna",startDate:"Zaetni datum",endDate:"Konni datum",hours:"Ure",days:"Dni",note:"Opomba"},login:{demoManager:"\uD83D\uDC54 Demo Manager",demoEmployee:"\uD83D\uDC64 Demo Zaposleni",demoAccountsNote:"To so demo rauni, povezani med seboj. Zaposleni poroa manageru."}},de:{common:{next:"Weiter",back:"Zur\xfcck",cancel:"Abbrechen",submit:"Absenden",save:"Speichern",delete:"L\xf6schen",edit:"Bearbeiten",yes:"Ja",no:"Nein",loading:"Laden...",backToFirstPage:"Zur\xfcck zur ersten Seite",close:"Schlie\xdfen"},absence:{title:"Abwesenheit beantragen",myRequests:"Meine Anfragen",newRequest:"Neue Anfrage starten",ongoing:"Laufend",upcoming:"Bevorstehend",pending:"Ausstehend",rejected:"Abgelehnt",showAllHistory:"Alle Historie anzeigen",hideHistory:"Historie ausblenden",allHistory:"Alle Historie",showHolidays:"Feiertage anzeigen",publicHolidays:"Feiertage",holidays:"Feiertage",noHistory:"Keine Historie verf\xfcgbar",showFeatures:"Funktionen anzeigen",features:"Funktionen",showDocumentation:"Dokumentation anzeigen",documentation:"Dokumentation",abortRequest:"Abbrechen",resendRequest:"Erneut senden",selectType:"Welche Art von Abwesenheit m\xf6chten Sie beantragen?",selectOffice:"F\xfcr welches B\xfcro beantragen Sie die Abwesenheit?",selectDuration:"Wie lange?",selectDate:"Datum ausw\xe4hlen",selectStartDate:"Startdatum",selectEndDate:"Enddatum",selectHours:"Anzahl der Stunden",selectDays:"Anzahl der Tage",addNote:"Notiz hinzuf\xfcgen (optional)",notePlaceholder:"Geben Sie zus\xe4tzliche Informationen ein...",review:"\xdcberpr\xfcfen Sie Ihre Anfrage",submitted:"Anfrage erfolgreich \xfcbermittelt",types:{vacation:"Urlaub",sick_leave:"Krankheit",parental_leave:"Elternzeit",sick_child:"Betreuung krankes Kind",work_from_home:"Homeoffice",knowledge_time:"Wissenszeit",flex_time:"Gleitzeit",paid_leave:"Bezahlter Urlaub",unpaid_leave:"Unbezahlter Urlaub",care_relative:"Pflege von Angeh\xf6rigen",military_duties:"Wehrdienst"},duration:{hours:"Stunden",days:"Tage"}},office:{ljubljana:"Ljubljana",munich:"M\xfcnchen"},status:{pending:"Ausstehend",sent:"Gesendet",approved:"Genehmigt",denied:"Abgelehnt",cancelled:"Storniert"},manager:{dashboard:"Manager Dashboard",approve:"Ja - Genehmigen",deny:"Nein - Ablehnen",backToUserList:"Zur\xfcck zur Benutzerliste",backToRoleList:"Zur\xfcck zur Rollenliste",backToDashboard:"Zur\xfcck zum Dashboard",addRole:"Rolle hinzuf\xfcgen",createNewRole:"Neue Rolle erstellen",roleManagement:"Rollenverwaltung",allUsers:"Alle Benutzer",showPublicHolidays:"Feiertage anzeigen",listAllUsers:"Alle Benutzer auflisten",manageRoles:"Rollen verwalten",noPendingRequests:"Keine ausstehenden Anfragen",noApprovedRequests:"Keine genehmigten Anfragen",noDeniedRequests:"Keine abgelehnten Anfragen",noRequests:"Keine Anfragen",noRolesAvailable:"Keine Rollen verf\xfcgbar. Erstellen Sie Rollen in der Rollenverwaltung.",publicHolidays:"Feiertage",logout:"Abmelden",searchUsers:"Benutzer nach Name, E-Mail oder Rolle suchen...",noUsersFound:"Keine Benutzer gefunden.",noUsersFoundSearch:"Keine Benutzer gefunden, die Ihrer Suche entsprechen.",roleName:"Rollenname",create:"Erstellen",currentName:"Aktueller Name",usedBy:"Verwendet von",user:"Benutzer",users:"Benutzer",renameRole:"Rolle umbenennen",newRoleName:"Neuer Rollenname",rename:"Umbenennen",existingRoles:"Vorhandene Rollen",noRolesCreated:"Noch keine Rollen erstellt.",roles:"Rollen",email:"E-Mail",role:"Rolle",office:"B\xfcro",startDate:"Startdatum",endDate:"Enddatum",hours:"Stunden",days:"Tage",note:"Notiz"},login:{demoManager:"\uD83D\uDC54 Demo Manager",demoEmployee:"\uD83D\uDC64 Demo Mitarbeiter",demoAccountsNote:"Dies sind Demo-Konten, die miteinander verbunden sind. Der Mitarbeiter berichtet an den Manager."}}};function ix(e,t="en"){let r=function(e="en"){return iw[iO.includes(e)?e:"en"]}(t),n=e.split("."),o=r;for(let t of n){if(!o||"object"!=typeof o||!(t in o))return e;o=o[t]}return"string"==typeof o?o:e}function ij({onLogin:e,language:t,onShowFeatures:r,onShowDocumentation:n}){return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,a.jsxs)(ih.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8 md:p-12",children:[a.jsx(ih.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4 text-center",children:"VacayBot Demo"}),a.jsx(ih.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-lg text-gray-600 mb-8 text-center",children:"Choose a demo account to explore the absence management system"}),(0,a.jsxs)(ih.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Demo Accounts"}),a.jsx(iy,{label:"\uD83D\uDC54 Demo Manager",shortcut:"1",onClick:()=>e("manager@demo.com","manager"),variant:"primary",autoFocus:!0}),a.jsx("p",{className:"text-sm text-gray-500 ml-2",children:"View and approve/deny absence requests from employees"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(iy,{label:"\uD83D\uDC64 Demo Employee",shortcut:"2",onClick:()=>e("employee@demo.com","employee"),variant:"secondary"}),a.jsx("p",{className:"text-sm text-gray-500 ml-2",children:"Request vacation and other absences"})]})]}),(0,a.jsxs)(ih.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-8 pt-8 border-t border-gray-200 space-y-4",children:[a.jsx("p",{className:"text-sm text-gray-500 text-center",children:"These are demo accounts connected to each other. The employee reports to the manager."}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(iy,{label:ix("absence.showFeatures",t)||"Show Features",onClick:r,variant:"outline",shortcut:"3"}),a.jsx(iy,{label:ix("absence.showDocumentation",t)||"Show Documentation",onClick:n,variant:"outline",shortcut:"4"})]})]})]})})}let i_={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function iP(e){return (t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}let iS={date:iP({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:iP({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:iP({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},iD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ik(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,o=r?.width?String(r.width):t;n=e.formattingValues[o]||e.formattingValues[t]}else{let t=e.defaultWidth,o=r?.width?String(r.width):e.defaultWidth;n=e.values[o]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function iM(e){return(t,r={})=>{let n;let o=r.width,i=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;let s=a[0],u=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(u)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(u,e=>e.test(s)):function(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(u,e=>e.test(s));return n=e.valueCallback?e.valueCallback(l):l,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(s.length)}}}let iN={code:"en-US",formatDistance:(e,t,r)=>{let n;let o=i_[e];return(n="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),r?.addSuffix)?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:iS,formatRelative:(e,t,r,n)=>iD[e],localize:{ordinalNumber:(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:ik({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ik({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:ik({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ik({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ik({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return(t,r={})=>{let n=t.match(e.matchPattern);if(!n)return null;let o=n[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];return{value:a=r.valueCallback?r.valueCallback(a):a,rest:t.slice(o.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:iM({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:iM({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:iM({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:iM({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:iM({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},iE={};function iA(e){let t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):new Date("number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?e:NaN)}function iT(e){let t=iA(e);return t.setHours(0,0,0,0),t}function iC(e){let t=iA(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function i$(e,t){let r=iT(e),n=iT(t);return Math.round((+r-iC(r)-(+n-iC(n)))/864e5)}function iI(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function iR(e,t){let r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??iE.weekStartsOn??iE.locale?.options?.weekStartsOn??0,n=iA(e),o=n.getDay();return n.setDate(n.getDate()-((o<r?7:0)+o-r)),n.setHours(0,0,0,0),n}function iF(e){return iR(e,{weekStartsOn:1})}function iB(e){let t=iA(e),r=t.getFullYear(),n=iI(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);let o=iF(n),i=iI(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);let a=iF(i);return t.getTime()>=o.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function iL(e,t){let r=iA(e),n=r.getFullYear(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??iE.firstWeekContainsDate??iE.locale?.options?.firstWeekContainsDate??1,i=iI(e,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);let a=iR(i,t),s=iI(e,0);s.setFullYear(n,0,o),s.setHours(0,0,0,0);let u=iR(s,t);return r.getTime()>=a.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function iq(e,t){let r=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+r}let iV={y(e,t){let r=e.getFullYear(),n=r>0?r:1-r;return iq("yy"===t?n%100:n,t.length)},M(e,t){let r=e.getMonth();return"M"===t?String(r+1):iq(r+1,2)},d:(e,t)=>iq(e.getDate(),t.length),a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>iq(e.getHours()%12||12,t.length),H:(e,t)=>iq(e.getHours(),t.length),m:(e,t)=>iq(e.getMinutes(),t.length),s:(e,t)=>iq(e.getSeconds(),t.length),S(e,t){let r=t.length;return iq(Math.trunc(e.getMilliseconds()*Math.pow(10,r-3)),t.length)}},iU={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iz={G:function(e,t,r){let n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){let t=e.getFullYear();return r.ordinalNumber(t>0?t:1-t,{unit:"year"})}return iV.y(e,t)},Y:function(e,t,r,n){let o=iL(e,n),i=o>0?o:1-o;return"YY"===t?iq(i%100,2):"Yo"===t?r.ordinalNumber(i,{unit:"year"}):iq(i,t.length)},R:function(e,t){return iq(iB(e),t.length)},u:function(e,t){return iq(e.getFullYear(),t.length)},Q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return iq(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return iq(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){let n=e.getMonth();switch(t){case"M":case"MM":return iV.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return iq(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){let o=function(e,t){let r=iA(e);return Math.round((+iR(r,t)-+function(e,t){let r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??iE.firstWeekContainsDate??iE.locale?.options?.firstWeekContainsDate??1,n=iL(e,t),o=iI(e,0);return o.setFullYear(n,0,r),o.setHours(0,0,0,0),iR(o,t)}(r,t))/6048e5)+1}(e,n);return"wo"===t?r.ordinalNumber(o,{unit:"week"}):iq(o,t.length)},I:function(e,t,r){let n=function(e){let t=iA(e);return Math.round((+iF(t)-+function(e){let t=iB(e),r=iI(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),iF(r)}(t))/6048e5)+1}(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):iq(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):iV.d(e,t)},D:function(e,t,r){let n=function(e){let t=iA(e);return i$(t,function(e){let t=iA(e),r=iI(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}(t))+1}(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):iq(n,t.length)},E:function(e,t,r){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return iq(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return iq(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){let n=e.getDay(),o=0===n?7:n;switch(t){case"i":return String(o);case"ii":return iq(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){let n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){let n;let o=e.getHours();switch(n=12===o?iU.noon:0===o?iU.midnight:o/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){let n;let o=e.getHours();switch(n=o>=17?iU.evening:o>=12?iU.afternoon:o>=4?iU.morning:iU.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return iV.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):iV.H(e,t)},K:function(e,t,r){let n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):iq(n,t.length)},k:function(e,t,r){let n=e.getHours();return(0===n&&(n=24),"ko"===t)?r.ordinalNumber(n,{unit:"hour"}):iq(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):iV.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):iV.s(e,t)},S:function(e,t){return iV.S(e,t)},X:function(e,t,r){let n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return iW(n);case"XXXX":case"XX":return iH(n);default:return iH(n,":")}},x:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"x":return iW(n);case"xxxx":case"xx":return iH(n);default:return iH(n,":")}},O:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+iK(n,":");default:return"GMT"+iH(n,":")}},z:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+iK(n,":");default:return"GMT"+iH(n,":")}},t:function(e,t,r){return iq(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,r){return iq(e.getTime(),t.length)}};function iK(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),i=n%60;return 0===i?r+String(o):r+String(o)+t+iq(i,2)}function iW(e,t){return e%60==0?(e>0?"-":"+")+iq(Math.abs(e)/60,2):iH(e,t)}function iH(e,t=""){let r=Math.abs(e);return(e>0?"-":"+")+iq(Math.trunc(r/60),2)+t+iq(r%60,2)}let iY=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},iQ=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},iG={p:iQ,P:(e,t)=>{let r;let n=e.match(/(P+)(p+)?/)||[],o=n[1],i=n[2];if(!i)return iY(e,t);switch(o){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",iY(o,t)).replace("{{time}}",iQ(i,t))}},iX=/^D+$/,iZ=/^Y+$/,iJ=["D","DD","YY","YYYY"],i0=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,i1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,i2=/^'([^]*?)'?$/,i3=/''/g,i5=/[a-zA-Z]/;function i9(e,t,r){let n=r?.locale??iE.locale??iN,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??iE.firstWeekContainsDate??iE.locale?.options?.firstWeekContainsDate??1,i=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??iE.weekStartsOn??iE.locale?.options?.weekStartsOn??0,a=iA(e);if(!((a instanceof Date||"object"==typeof a&&"[object Date]"===Object.prototype.toString.call(a)||"number"==typeof a)&&!isNaN(Number(iA(a)))))throw RangeError("Invalid time value");let s=t.match(i1).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,iG[t])(e,n.formatLong):e}).join("").match(i0).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t)return{isToken:!1,value:function(e){let t=e.match(i2);return t?t[1].replace(i3,"'"):e}(e)};if(iz[t])return{isToken:!0,value:e};if(t.match(i5))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});n.localize.preprocessor&&(s=n.localize.preprocessor(a,s));let u={firstWeekContainsDate:o,weekStartsOn:i,locale:n};return s.map(o=>{if(!o.isToken)return o.value;let i=o.value;return(!r?.useAdditionalWeekYearTokens&&iZ.test(i)||!r?.useAdditionalDayOfYearTokens&&iX.test(i))&&function(e,t,r){let n=function(e,t,r){let n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(console.warn(n),iJ.includes(e))throw RangeError(n)}(i,t,String(e)),(0,iz[i[0]])(a,i,n.localize,u)}).join("")}function i6(e,t){let r,n;let o=t?.additionalDigits??2,i=function(e){let t;let r={},n=e.split(i4.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?t=n[0]:(r.date=n[0],t=n[1],i4.timeZoneDelimiter.test(r.date)&&(r.date=e.split(i4.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=i4.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(i.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let o=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:null===i?o:100*i,restDateString:e.slice((n[1]||n[2]).length)}}(i.date,o);r=function(e,t){if(null===t)return new Date(NaN);let r=e.match(i8);if(!r)return new Date(NaN);let n=!!r[4],o=at(r[1]),i=at(r[2])-1,a=at(r[3]),s=at(r[4]),u=at(r[5])-1;if(n)return s>=1&&s<=53&&u>=0&&u<=6?function(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let o=n.getUTCDay()||7;return n.setUTCDate(n.getUTCDate()+((t-1)*7+r+1-o)),n}(t,s,u):new Date(NaN);{let e=new Date(0);return i>=0&&i<=11&&a>=1&&a<=(an[i]||(ao(t)?29:28))&&o>=1&&o<=(ao(t)?366:365)?(e.setUTCFullYear(t,i,Math.max(o,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let a=r.getTime(),s=0;if(i.time&&isNaN(s=function(e){let t=e.match(i7);if(!t)return NaN;let r=ar(t[1]),n=ar(t[2]),o=ar(t[3]);return(24===r?0===n&&0===o:o>=0&&o<60&&n>=0&&n<60&&r>=0&&r<25)?36e5*r+6e4*n+1e3*o:NaN}(i.time)))return new Date(NaN);if(i.timezone){if(isNaN(n=function(e){if("Z"===e)return 0;let t=e.match(ae);if(!t)return 0;let r="+"===t[1]?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return o>=0&&o<=59?r*(36e5*n+6e4*o):NaN}(i.timezone)))return new Date(NaN)}else{let e=new Date(a+s),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(a+s+n)}let i4={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i8=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,i7=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,ae=/^([+-])(\d{2})(?::?(\d{2}))?$/;function at(e){return e?parseInt(e):1}function ar(e){return e&&parseFloat(e.replace(",","."))||0}let an=[31,null,31,30,31,30,31,31,30,31,30,31];function ao(e){return e%400==0||e%4==0&&e%100!=0}let ai={vacation:{id:"vacation",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},sick_leave:{id:"sick_leave",requiresApproval:!1,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},parental_leave:{id:"parental_leave",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},sick_child:{id:"sick_child",requiresApproval:!1,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},work_from_home:{id:"work_from_home",requiresApproval:!1,affectsCalendar:!1,affectsSlackStatus:!1,affectsCinode:!1,durationType:"days"},knowledge_time:{id:"knowledge_time",requiresApproval:!0,affectsCalendar:!1,affectsSlackStatus:!1,affectsCinode:!1,durationType:"days"},flex_time:{id:"flex_time",requiresApproval:!1,affectsCalendar:!1,affectsSlackStatus:!1,affectsCinode:!1,durationType:"hours"},paid_leave:{id:"paid_leave",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},unpaid_leave:{id:"unpaid_leave",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},care_relative:{id:"care_relative",requiresApproval:!0,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"},military_duties:{id:"military_duties",requiresApproval:!1,affectsCalendar:!0,affectsSlackStatus:!0,affectsCinode:!0,durationType:"days"}},aa={ljubljana:{id:"ljubljana",name:"Ljubljana",timezone:"Europe/Ljubljana",holidayCalendar:"slovenian"},munich:{id:"munich",name:"Munich",timezone:"Europe/Berlin",holidayCalendar:"german"}};var as=r(77897),au=r(77e3);let al=new Map;[{date:"2025-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2025-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2025-02-08",name:{en:"Preeren Day",sl:"Preernov dan",de:"Preeren-Tag"},office:"ljubljana"},{date:"2025-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2025-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2025-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2025-06-25",name:{en:"Statehood Day",sl:"Dan dravnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2025-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2025-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2025-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2025-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2025-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2026-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2026-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2026-02-08",name:{en:"Preeren Day",sl:"Preernov dan",de:"Preeren-Tag"},office:"ljubljana"},{date:"2026-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2026-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2026-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2026-06-25",name:{en:"Statehood Day",sl:"Dan dravnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2026-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2026-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2026-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2026-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2026-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2027-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2027-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2027-02-08",name:{en:"Preeren Day",sl:"Preernov dan",de:"Preeren-Tag"},office:"ljubljana"},{date:"2027-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2027-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2027-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2027-06-25",name:{en:"Statehood Day",sl:"Dan dravnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2027-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2027-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2027-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2027-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2027-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2028-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2028-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2028-02-08",name:{en:"Preeren Day",sl:"Preernov dan",de:"Preeren-Tag"},office:"ljubljana"},{date:"2028-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2028-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2028-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2028-06-25",name:{en:"Statehood Day",sl:"Dan dravnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2028-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2028-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2028-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2028-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2028-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2029-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2029-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2029-02-08",name:{en:"Preeren Day",sl:"Preernov dan",de:"Preeren-Tag"},office:"ljubljana"},{date:"2029-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2029-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2029-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2029-06-25",name:{en:"Statehood Day",sl:"Dan dravnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2029-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2029-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2029-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2029-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2029-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2030-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"ljubljana"},{date:"2030-01-02",name:{en:"New Year Holiday",sl:"Novoletni praznik",de:"Neujahrstag"},office:"ljubljana"},{date:"2030-02-08",name:{en:"Preeren Day",sl:"Preernov dan",de:"Preeren-Tag"},office:"ljubljana"},{date:"2030-04-27",name:{en:"Day of Uprising Against Occupation",sl:"Dan upora proti okupatorju",de:"Tag des Aufstands gegen die Besatzung"},office:"ljubljana"},{date:"2030-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2030-05-02",name:{en:"Labour Day Holiday",sl:"Praznik dela",de:"Tag der Arbeit"},office:"ljubljana"},{date:"2030-06-25",name:{en:"Statehood Day",sl:"Dan dravnosti",de:"Staatlichkeitstag"},office:"ljubljana"},{date:"2030-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2030-10-31",name:{en:"Reformation Day",sl:"Dan reformacije",de:"Reformationstag"},office:"ljubljana"},{date:"2030-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2030-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2030-12-26",name:{en:"Independence Day",sl:"Dan samostojnosti",de:"Unabh\xe4ngigkeitstag"},office:"ljubljana"},{date:"2025-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2025-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2025-04-18",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2025-04-21",name:{en:"Easter Monday",sl:"Velikononi ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2025-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2025-05-29",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2025-06-09",name:{en:"Whit Monday",sl:"Binkotni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2025-06-19",name:{en:"Corpus Christi",sl:"Boje telo",de:"Fronleichnam"},office:"munich"},{date:"2025-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2025-10-03",name:{en:"German Unity Day",sl:"Dan nemke enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2025-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2025-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2025-12-26",name:{en:"Boxing Day",sl:"tefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2026-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2026-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2026-04-03",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2026-04-06",name:{en:"Easter Monday",sl:"Velikononi ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2026-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2026-05-14",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2026-05-25",name:{en:"Whit Monday",sl:"Binkotni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2026-06-04",name:{en:"Corpus Christi",sl:"Boje telo",de:"Fronleichnam"},office:"munich"},{date:"2026-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2026-10-03",name:{en:"German Unity Day",sl:"Dan nemke enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2026-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2026-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2026-12-26",name:{en:"Boxing Day",sl:"tefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2027-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2027-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2027-03-26",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2027-03-29",name:{en:"Easter Monday",sl:"Velikononi ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2027-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2027-05-06",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2027-05-17",name:{en:"Whit Monday",sl:"Binkotni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2027-05-27",name:{en:"Corpus Christi",sl:"Boje telo",de:"Fronleichnam"},office:"munich"},{date:"2027-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2027-10-03",name:{en:"German Unity Day",sl:"Dan nemke enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2027-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2027-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2027-12-26",name:{en:"Boxing Day",sl:"tefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2028-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2028-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2028-04-14",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2028-04-17",name:{en:"Easter Monday",sl:"Velikononi ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2028-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2028-05-25",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2028-06-05",name:{en:"Whit Monday",sl:"Binkotni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2028-06-15",name:{en:"Corpus Christi",sl:"Boje telo",de:"Fronleichnam"},office:"munich"},{date:"2028-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2028-10-03",name:{en:"German Unity Day",sl:"Dan nemke enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2028-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2028-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2028-12-26",name:{en:"Boxing Day",sl:"tefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2029-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2029-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2029-03-30",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2029-04-02",name:{en:"Easter Monday",sl:"Velikononi ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2029-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2029-05-10",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2029-05-21",name:{en:"Whit Monday",sl:"Binkotni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2029-05-31",name:{en:"Corpus Christi",sl:"Boje telo",de:"Fronleichnam"},office:"munich"},{date:"2029-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2029-10-03",name:{en:"German Unity Day",sl:"Dan nemke enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2029-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2029-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2029-12-26",name:{en:"Boxing Day",sl:"tefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"},{date:"2030-01-01",name:{en:"New Year's Day",sl:"Novo leto",de:"Neujahr"},office:"munich"},{date:"2030-01-06",name:{en:"Epiphany",sl:"Sveti trije kralji",de:"Heilige Drei K\xf6nige"},office:"munich"},{date:"2030-04-19",name:{en:"Good Friday",sl:"Veliki petek",de:"Karfreitag"},office:"munich"},{date:"2030-04-22",name:{en:"Easter Monday",sl:"Velikononi ponedeljek",de:"Ostermontag"},office:"munich"},{date:"2030-05-01",name:{en:"Labour Day",sl:"Praznik dela",de:"Tag der Arbeit"},office:"both"},{date:"2030-05-30",name:{en:"Ascension Day",sl:"Vnebohod",de:"Christi Himmelfahrt"},office:"munich"},{date:"2030-06-10",name:{en:"Whit Monday",sl:"Binkotni ponedeljek",de:"Pfingstmontag"},office:"munich"},{date:"2030-06-20",name:{en:"Corpus Christi",sl:"Boje telo",de:"Fronleichnam"},office:"munich"},{date:"2030-08-15",name:{en:"Assumption Day",sl:"Marijino vnebovzetje",de:"Mari\xe4 Himmelfahrt"},office:"both"},{date:"2030-10-03",name:{en:"German Unity Day",sl:"Dan nemke enotnosti",de:"Tag der Deutschen Einheit"},office:"munich"},{date:"2030-11-01",name:{en:"All Saints' Day",sl:"Dan spomina na mrtve",de:"Allerheiligen"},office:"both"},{date:"2030-12-25",name:{en:"Christmas",sl:"Boi",de:"Weihnachten"},office:"both"},{date:"2030-12-26",name:{en:"Boxing Day",sl:"tefanovo",de:"Zweiter Weihnachtsfeiertag"},office:"munich"}].forEach(e=>{let t=`${e.date}-${e.office}`,r="both"===e.office?e.date:t;al.has(r)||al.set(r,e)});let ac=Array.from(al.values()).sort((e,t)=>e.date.localeCompare(t.date));function af(e=50){let t=new Date;t.setHours(0,0,0,0);let r=ac.filter(e=>new Date(e.date)>=t),n=new Map;r.forEach(e=>{let t=n.get(e.date)||[];t.push(e),n.set(e.date,t)});let o=[];return n.forEach((e,t)=>{let r;let n=[],i={},a={};if(e.forEach(e=>{("ljubljana"===e.office||"both"===e.office)&&(n.includes("ljubljana")||n.push("ljubljana"),i.ljubljana=e.name.en,a.ljubljana=e.name),("munich"===e.office||"both"===e.office)&&(n.includes("munich")||n.push("munich"),i.munich=e.name.en,a.munich=e.name)}),1===n.length)r=a[n[0]];else if(i.ljubljana===i.munich&&a.ljubljana&&a.munich)r=a.ljubljana;else{let e=a.ljubljana||{en:"",sl:"",de:""},t=a.munich||{en:"",sl:"",de:""};r={en:`${e.en} / ${t.en}`,sl:`${e.sl} / ${t.sl}`,de:`${e.de} / ${t.de}`}}o.push({date:t,offices:n.sort(),names:i,displayName:r})}),o.sort((e,t)=>e.date.localeCompare(t.date)).slice(0,e)}var ap=r(98143);async function ad(e){let t=await (0,au.N8)();if(!t.roles)throw Error("Roles collection not available");let r=e.trim();if(await am(r))throw Error(`Role with name "${r}" already exists`);let n=new Date().toISOString(),o={id:`role_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:r,createdAt:n,updatedAt:n};return await t.roles.insert(o),o}async function ah(){let e=await (0,au.N8)();return e.roles?(await e.roles.find().exec()).map(e=>e.toJSON()):[]}async function am(e){try{let t=await (0,au.N8)();if(!t.roles)return null;let r=await t.roles.findOne({selector:{name:e.trim()}}).exec();return r?r.toJSON():null}catch(e){return console.error("Error getting role by name:",e),null}}async function ay(e,t){try{let r=await (0,au.N8)();if(!r.roles)return null;let n=await r.roles.findOne({selector:{name:e.trim()}}).exec();if(!n)return null;if(await n.update({$set:{name:t.trim(),updatedAt:new Date().toISOString()}}),r.users)for(let n of(await r.users.find().exec())){let r=n.toJSON();if((r.teams||[]).includes(e.trim())){let o=r.teams?.map(r=>r===e.trim()?t.trim():r)||[];await n.update({$set:{teams:o,updatedAt:new Date().toISOString()}})}}return n.toJSON()}catch(e){return console.error("Error renaming role:",e),null}}async function ab(e){try{let t=await (0,au.N8)();if(!t.users)return 0;return(await t.users.find().exec()).filter(t=>(t.toJSON().teams||[]).includes(e)).length}catch(e){return console.error("Error getting role usage count:",e),0}}let av={vacation:"Vacation",sick_leave:"Sick Leave",parental_leave:"Parental Leave",sick_child:"Care for sick child",work_from_home:"Work from Home",knowledge_time:"Knowledge Time",flex_time:"Flex Time",paid_leave:"Paid Leave",unpaid_leave:"Unpaid Leave",care_relative:"Care of Close Relative",military_duties:"Military Duties"},ag={pending:"Pending",sent:"Sent",approved:"Approved",denied:"Denied",cancelled:"Cancelled"};function aO({managerEmail:e,language:t,onLogout:r}){let[n,o]=(0,s.useState)([]),[i,u]=(0,s.useState)(!0),[l,c]=(0,s.useState)("pending"),[f,p]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),[m,y]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),[g,O]=(0,s.useState)(null),[w,x]=(0,s.useState)([]),[j,_]=(0,s.useState)(""),[P,S]=(0,s.useState)([]),[D,k]=(0,s.useState)({}),[M,N]=(0,s.useState)(""),[E,A]=(0,s.useState)(null),[T,C]=(0,s.useState)(""),[$,I]=(0,s.useState)(null),R=async e=>{try{await (0,as.updateAbsenceRequest)(e,{status:"approved"})}catch(e){console.error("Error approving request:",e)}},F=async e=>{try{await (0,as.updateAbsenceRequest)(e,{status:"denied"})}catch(e){console.error("Error denying request:",e)}},B="all"===l?n:"pending"===l?n.filter(e=>"pending"===e.status||"sent"===e.status):n.filter(e=>e.status===l),L=n.filter(e=>"pending"===e.status||"sent"===e.status),q=n.filter(e=>"approved"===e.status),V=n.filter(e=>"denied"===e.status),U=async e=>{if(!g||$)return;I(e);let t=g.teams||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e],n={...g,teams:r};O(n),x(w.map(e=>e.id===g.id?n:e));try{await (0,ap.wy)(g.id,r)}catch(e){console.error("Failed to update user teams:",e),O(g),x(w.map(e=>e.id===g.id?g:e))}finally{I(null)}},z=async()=>{if(M.trim())try{await ad(M.trim()),N(""),v(!1);let e=await ah();S(e);let t={};for(let r of e)t[r.name]=await ab(r.name);k(t)}catch(e){console.error("Error creating role:",e),alert("Failed to create role. It may already exist.")}},K=async()=>{if(E&&T.trim())try{if(await ay(E.name,T.trim())){C(""),A(null);let e=await ah();S(e);let t={};for(let r of e)t[r.name]=await ab(r.name);if(k(t),g){let e=(await (0,ap.yw)()).find(e=>e.id===g.id);e&&O(e)}}else alert("Failed to rename role. Role may not exist.")}catch(e){console.error("Error renaming role:",e),alert("Failed to rename role.")}},W=w.filter(e=>{if(!j.trim())return!0;let t=j.toLowerCase();return e.email.toLowerCase().includes(t)||e.name.toLowerCase().includes(t)||(e.teams||[]).some(e=>e.toLowerCase().includes(t))});if(g)return a.jsx(im,{title:`User: ${g.name}`,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Email: ",g.email]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Role: ",g.role]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Office: ",g.office]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Roles"}),a.jsx("div",{className:"space-y-2",children:0===P.length?a.jsx("p",{className:"text-gray-500 text-sm",children:"No roles available. Create roles in Role Management."}):P.map(e=>{let t=(g.teams||[]).includes(e.name),r=$===e.name;return(0,a.jsxs)("button",{onClick:()=>U(e.name),disabled:r,className:`w-full text-left px-4 py-2 rounded-lg transition-colors flex items-center justify-between ${t?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[(0,a.jsxs)("span",{children:[e.name," ",t&&""]}),r&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent"})]},e.id)})})]}),a.jsx(iy,{label:"Back to User List",onClick:()=>O(null),variant:"primary",autoFocus:!0})]})});if(m&&b)return a.jsx(im,{title:"Add Role",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Create New Role"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:M,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&z()},placeholder:"Role name",className:"flex-1 px-4 py-2 border rounded-lg",autoFocus:!0}),a.jsx("button",{onClick:z,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create"})]})]}),a.jsx(iy,{label:"Back to Role List",onClick:()=>{v(!1),N("")},variant:"primary"})]})});if(m&&E)return a.jsx(im,{title:`Role: ${E.name}`,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Current name: ",a.jsx("strong",{children:E.name})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Used by ",D[E.name]||0," user",1!==D[E.name]?"s":""]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Rename Role"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",value:T,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&K()},placeholder:"New role name",className:"w-full px-4 py-2 border rounded-lg",autoFocus:!0}),a.jsx("button",{onClick:K,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Rename"})]})]}),a.jsx(iy,{label:"Back to Role List",onClick:()=>{A(null),C("")},variant:"primary"})]})});if(m)return a.jsx(im,{title:"Role Management",children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(iy,{label:"Add Role",onClick:()=>v(!0),variant:"primary",shortcut:"1",autoFocus:!0}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Existing Roles"}),a.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:0===P.length?a.jsx("p",{className:"text-gray-500 text-sm",children:"No roles created yet."}):P.map(e=>(0,a.jsxs)("button",{onClick:()=>A(e),className:"w-full text-left bg-white rounded-lg shadow p-4 hover:bg-gray-50 transition-colors flex justify-between items-center",children:[a.jsx("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Used by ",D[e.name]||0," user",1!==D[e.name]?"s":""]})]},e.id))})]}),a.jsx(iy,{label:"Back to Dashboard",onClick:()=>y(!1),variant:"primary"})]})});if(d)return a.jsx(im,{title:"All Users",children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{children:a.jsx("input",{type:"text",value:j,onChange:e=>_(e.target.value),placeholder:"Search users by name, email, or role...",className:"w-full px-4 py-2 border rounded-lg",autoFocus:!0})}),a.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:0===W.length?a.jsx("p",{className:"text-gray-500 text-center py-8",children:j?"No users found matching your search.":"No users found."}):W.map(e=>(0,a.jsxs)("button",{onClick:()=>O(e),className:"w-full text-left bg-white rounded-lg shadow p-4 hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"font-medium",children:e.name}),a.jsx("div",{className:"text-sm text-gray-600",children:e.email}),e.teams&&e.teams.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.teams.map(e=>a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:e},e))})]},e.id))}),a.jsx(iy,{label:"Back to Dashboard",onClick:()=>{h(!1),_("")},variant:"primary"})]})});if(f){let e=af(100),t=e=>"ljubljana"===e?"\uD83C\uDDF8\uD83C\uDDEE":"\uD83C\uDDE9\uD83C\uDDEA";return a.jsx(im,{title:"Public Holidays",children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"space-y-2 max-h-[70vh] overflow-y-auto",children:e.map(e=>a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 flex gap-1 mt-1",children:e.offices.map(e=>a.jsx("span",{className:"text-2xl",children:t(e)},e))}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-lg",children:e.displayName.en}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:i9(i6(e.date),"PPP")})]})]})},e.date))}),a.jsx(iy,{label:"Close",onClick:()=>p(!1),variant:"primary",shortcut:"2",autoFocus:!0})]})})}return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)(ih.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Manager Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e})]}),a.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"Logout"})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-6 flex-wrap",children:[(0,a.jsxs)("button",{onClick:()=>c("pending"),className:`px-4 py-2 rounded-lg transition-colors ${"pending"===l?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Pending (",L.length,")"]}),(0,a.jsxs)("button",{onClick:()=>c("approved"),className:`px-4 py-2 rounded-lg transition-colors ${"approved"===l?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Approved (",q.length,")"]}),(0,a.jsxs)("button",{onClick:()=>c("denied"),className:`px-4 py-2 rounded-lg transition-colors ${"denied"===l?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Denied (",V.length,")"]}),(0,a.jsxs)("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-lg transition-colors ${"all"===l?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All (",n.length,")"]}),a.jsx(iy,{label:"Show Public Holidays",onClick:()=>p(!0),variant:"outline",shortcut:"2"}),a.jsx(iy,{label:"List All Users",onClick:()=>h(!0),variant:"outline"}),a.jsx(iy,{label:"Manage Roles",onClick:()=>y(!0),variant:"outline"})]})]}),i?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-600",children:"Loading..."})}):0===B.length?(0,a.jsxs)(ih.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white rounded-2xl shadow-xl p-12 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),(0,a.jsxs)("p",{className:"text-xl text-gray-600",children:["pending"===l&&"No pending requests","approved"===l&&"No approved requests","denied"===l&&"No denied requests","all"===l&&"No requests"]})]}):a.jsx("div",{className:"space-y-4",children:B.map(e=>a.jsx(aw,{request:e,onApprove:()=>R(e.id),onDeny:()=>F(e.id),showActions:"pending"===l},e.id))})]})})}function aw({request:e,onApprove:t,onDeny:r,showActions:n}){ai[e.type];let o=aa[e.office];return(0,a.jsxs)(ih.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.userEmail}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[av[e.type]||e.type,"  ",o?.name||e.office]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${{pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",denied:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[e.status]}`,children:ag[e.status]||e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Start Date"}),a.jsx("p",{className:"font-medium",children:i9(i6(e.startDate),"PPP")})]}),e.endDate&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"End Date"}),a.jsx("p",{className:"font-medium",children:i9(i6(e.endDate),"PPP")})]}),e.hours&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Hours"}),a.jsx("p",{className:"font-medium",children:e.hours})]}),e.days&&(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Days"}),a.jsx("p",{className:"font-medium",children:e.days})]})]}),e.note&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Note"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:e.note})]}),n&&(0,a.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsx(iy,{label:"Yes - Approve",onClick:t,variant:"primary"}),a.jsx(iy,{label:"No - Deny",onClick:r,variant:"outline"})]})]})}function ax(e,t){let r=iA(e),n=iA(t);return r.getTime()>n.getTime()}function aj(e,t){let r=iA(e),n=iA(t),o=a_(r,n),i=Math.abs(i$(r,n));r.setDate(r.getDate()-o*i);let a=Number(a_(r,n)===-o),s=o*(i-a);return 0===s?0:s}function a_(e,t){let r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function aP(){let e=(0,u.useRouter)();(0,u.useSearchParams)();let[t,n]=(0,s.useState)("en"),[o,i]=(0,s.useState)("home"),[l,c]=(0,s.useState)(null),[f,p]=(0,s.useState)(null),[d,h]=(0,s.useState)({step:"home",data:{}}),[m,y]=(0,s.useState)(!1),[b,v]=(0,s.useState)([]),[g,O]=(0,s.useState)(!1),[w,x]=(0,s.useState)(!1),[j,_]=(0,s.useState)(!1),[P,S]=(0,s.useState)(!1),[D,k]=(0,s.useState)(!0),M=(0,s.useCallback)(e=>{h(t=>({...t,...e}))},[]),N=async(e,t)=>{c(e),p(t),M({step:"employee"===t?"home":"type",data:{...d.data,userEmail:e,userId:e}}),i("employee"===t?"home":"type")},E=()=>{c(null),p(null),i("home"),h({step:"home",data:{}}),_(!1),S(!1),O(!1),x(!1),e.replace("/")},A=(0,s.useCallback)(e=>{h(t=>({...t,step:"office",data:{...t.data,type:e}})),i("office")},[]),T=(0,s.useCallback)(e=>{h(t=>{let r="both"===ai[t.data.type].durationType?"duration":"dates";return i(r),{...t,step:r,data:{...t.data,office:e}}})},[]),C=(0,s.useCallback)(e=>{h(t=>({...t,step:"dates",data:{...t.data,durationType:e}})),i("dates")},[]),$=(0,s.useCallback)(()=>{h(e=>({...e,step:"type",data:e.data})),i("type")},[]),I=(0,s.useCallback)(()=>{i("home"),h({step:"home",data:{}})},[]),R=(0,s.useCallback)(()=>{h(e=>({...e,step:"note",data:e.data})),i("note")},[]),F=(0,s.useCallback)(()=>{h(e=>({...e,step:"review",data:e.data})),i("review")},[]),B=(0,s.useCallback)(()=>{_(!1),i("home"),h(e=>({...e,step:"home"}))},[]),L=(0,s.useCallback)(()=>{S(!1),i("home"),h(e=>({...e,step:"home"}))},[]),q=(0,s.useCallback)(()=>{y(e=>!e)},[]),V=(0,s.useCallback)(()=>{O(!0),i("holidays")},[]),U=(0,s.useCallback)(()=>{x(!0),i("history")},[]),z=(0,s.useCallback)(()=>{O(!1),i("home")},[]),K=(0,s.useCallback)(()=>{x(!1),i("home")},[]),W=(0,s.useCallback)(()=>{_(!0),i("features")},[]),H=(0,s.useCallback)(()=>{S(!0),i("documentation")},[]),Y=(0,s.useCallback)(()=>{if("holidays"===o||"history"===o||"features"===o||"documentation"===o){"features"===o?B():"documentation"===o?L():(i("home"),h(e=>({...e,step:"home"})));return}if(("features"===o||"documentation"===o)&&(!l||!f)){"features"===o?B():"documentation"===o&&L();return}if("submitted"===o){i("home"),h(e=>({...e,step:"home"}));return}if("home"===o)return;let e=["type","office","duration","dates","note","review"],t=e.indexOf(o);if(t>0){let r=e[t-1];i(r),M({step:r})}else 0===t&&(i("home"),h(e=>({...e,step:"home"})))},[o,M,l,f,B,L]),Q=async()=>{try{let{createAbsenceRequest:e}=await Promise.resolve().then(r.bind(r,77897)),{getUserByEmail:t}=await Promise.resolve().then(r.bind(r,98143)),n=l||d.data.userEmail,o=d.data.managerEmail;if(!o&&n){let e=await t(n);e&&e.managerEmail&&(o=e.managerEmail)}let a={userId:n,userEmail:n,type:d.data.type,office:d.data.office,startDate:d.data.startDate,endDate:d.data.endDate,hours:d.data.hours,days:d.data.days,note:d.data.note,managerEmail:o};console.log("=== Absence Request Data ==="),console.log("Request Data:",JSON.stringify(a,null,2)),console.log("Employee Email:",n),console.log("Manager Email:",o||"No manager assigned"),console.log("Absence Type:",a.type),console.log("Office:",a.office),console.log("Start Date:",a.startDate),console.log("End Date:",a.endDate||"N/A"),console.log("Hours:",a.hours||"N/A"),console.log("Days:",a.days||"N/A"),console.log("Note:",a.note||"N/A"),console.log("===========================");let s=await e(a);console.log("Created absence request:",s),h(e=>({...e,step:"submitted"})),i("submitted")}catch(e){console.error("Error submitting request:",e),alert("Failed to submit request. Please try again.")}},G=d.data.type?ai[d.data.type]:null;return l&&f?"manager"===f?a.jsx(aO,{managerEmail:l,language:t,onLogout:E}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 px-4 py-3",children:[a.jsx("div",{className:"text-sm text-gray-700 truncate min-w-0 flex-shrink",children:l}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,a.jsxs)("select",{value:t,onChange:e=>{let t=e.target.value;n(t),h(e=>({...e,language:t}))},className:"px-3 py-2 bg-white shadow",children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"sl",children:"Slovenina"}),a.jsx("option",{value:"de",children:"Deutsch"})]}),a.jsx("button",{onClick:E,className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 bg-white shadow",children:"Logout"})]})]}),"holidays"===o&&"employee"===f?a.jsx(aD,{language:t,onClose:z}):"history"===o&&"employee"===f?a.jsx(ak,{language:t,requests:b,onClose:K}):"home"===o&&"employee"===f?a.jsx(aS,{userEmail:l,language:t,requests:b,showAllHistory:m,onToggleHistory:q,onStartNewRequest:$,onShowHolidays:V,onShowHistory:U}):"submitted"===o?a.jsx(im,{title:ix("absence.submitted",t),children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("p",{className:"text-gray-600",children:ix("absence.submitted",t)}),a.jsx("div",{className:"mt-6",children:a.jsx(iy,{label:ix("common.backToFirstPage",t)||"Back to first page",onClick:I,variant:"primary",autoFocus:!0})})]})}):(0,a.jsxs)(a.Fragment,{children:["type"===o&&a.jsx(im,{title:ix("absence.title",t),description:ix("absence.selectType",t),children:Object.entries(ai).map(([e,r],n)=>a.jsx(iy,{label:ix(`absence.types.${e}`,t),shortcut:String(n+1),onClick:()=>A(e),autoFocus:0===n},e))}),"office"===o&&a.jsx(im,{title:ix("absence.selectOffice",t),showBack:!0,onBack:Y,children:Object.entries(aa).map(([e,r],n)=>a.jsx(iy,{label:ix(`office.${e}`,t),shortcut:String(n+1),onClick:()=>T(e),autoFocus:0===n},e))}),"duration"===o&&(0,a.jsxs)(im,{title:ix("absence.selectDuration",t),showBack:!0,onBack:Y,children:[a.jsx(iy,{label:ix("absence.duration.hours",t),shortcut:"1",onClick:()=>C("hours"),autoFocus:!0}),a.jsx(iy,{label:ix("absence.duration.days",t),shortcut:"2",onClick:()=>C("days")})]}),"dates"===o&&(0,a.jsxs)(im,{title:ix("absence.selectDate",t),showBack:!0,onBack:Y,children:[a.jsx(ib,{label:ix("absence.selectStartDate",t),value:d.data.startDate||"",onChange:e=>M({data:{...d.data,startDate:e}}),min:i9(new Date,"yyyy-MM-dd"),required:!0,autoFocus:!0}),(G?.durationType==="days"||"days"===d.data.durationType)&&a.jsx(ib,{label:ix("absence.selectEndDate",t),value:d.data.endDate||"",onChange:e=>M({data:{...d.data,endDate:e}}),min:d.data.startDate||i9(new Date,"yyyy-MM-dd")}),(G?.durationType==="hours"||"hours"===d.data.durationType)&&a.jsx(iv,{label:ix("absence.selectHours",t),value:d.data.hours||"",onChange:e=>M({data:{...d.data,hours:e}}),min:.5,step:.5,required:!0}),a.jsx("div",{className:"pt-4",children:a.jsx(iy,{label:ix("common.next",t),onClick:R,variant:"primary"})})]}),"note"===o&&(0,a.jsxs)(im,{title:ix("absence.addNote",t),showBack:!0,onBack:Y,children:[a.jsx(ig,{label:ix("absence.addNote",t),value:d.data.note||"",onChange:e=>M({data:{...d.data,note:e}}),placeholder:ix("absence.notePlaceholder",t),autoFocus:!0}),a.jsx("div",{className:"pt-4",children:a.jsx(iy,{label:ix("common.next",t),onClick:F,variant:"primary"})})]}),"review"===o&&(0,a.jsxs)(im,{title:ix("absence.review",t),showBack:!0,onBack:Y,children:[(0,a.jsxs)("div",{className:"space-y-4 bg-gray-50 p-6 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[ix("absence.selectType",t),":"]})," ",ix(`absence.types.${d.data.type}`,t)]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[ix("absence.selectOffice",t),":"]})," ",ix(`office.${d.data.office}`,t)]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[ix("absence.selectStartDate",t),":"]})," ",d.data.startDate]}),d.data.endDate&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[ix("absence.selectEndDate",t),":"]})," ",d.data.endDate]}),d.data.hours&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[ix("absence.selectHours",t),":"]})," ",d.data.hours]}),d.data.note&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[ix("absence.addNote",t),":"]})," ",d.data.note]})]}),a.jsx("div",{className:"pt-4",children:a.jsx(iy,{label:ix("common.submit",t),onClick:Q,variant:"primary",autoFocus:!0})})]})]})]}):(0,a.jsxs)("div",{className:"relative",children:[a.jsx(ij,{onLogin:N,language:t,onShowFeatures:W,onShowDocumentation:H}),"features"===o&&a.jsx("div",{className:"absolute inset-0 z-50",children:a.jsx(aM,{language:t,onClose:B})}),"documentation"===o&&a.jsx("div",{className:"absolute inset-0 z-50",children:a.jsx(aN,{language:t,onClose:L})})]})}function aS({userEmail:e,language:t,requests:n,showAllHistory:o,onToggleHistory:i,onStartNewRequest:s,onShowHolidays:u,onShowHistory:l}){let c=new Date;c.setHours(0,0,0,0);let f=n.filter(e=>{let t=i6(e.startDate),r=e.endDate?i6(e.endDate):t;return(+iA(t)<+iA(c)||t.getTime()===c.getTime())&&(ax(r,c)||r.getTime()===c.getTime())&&"approved"===e.status}),p=n.filter(e=>ax(i6(e.startDate),c)&&"approved"===e.status),d=n.filter(e=>"pending"===e.status||"sent"===e.status),h=n.filter(e=>"denied"===e.status),m=[...n].sort((e,t)=>{let r=i6(e.startDate);return i6(t.startDate).getTime()-r.getTime()}),y=e=>{let t=i6(e.createdAt);return aj(i6(e.startDate),t)>30},b=async e=>{try{let{updateAbsenceRequest:t}=await Promise.resolve().then(r.bind(r,77897));await t(e,{status:"cancelled"}),console.log("Request aborted:",e)}catch(e){console.error("Error aborting request:",e),alert("Failed to abort request. Please try again.")}},v=async e=>{try{let{updateAbsenceRequest:t}=await Promise.resolve().then(r.bind(r,77897));await t(e,{status:"sent"}),console.log("Request resent:",e)}catch(e){console.error("Error resending request:",e),alert("Failed to resend request. Please try again.")}},g=(e,r=!1)=>{let n="pending"===e.status||"sent"===e.status;return a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:ix(`absence.types.${e.type}`,t)}),r&&a.jsx("span",{className:"text-red-600 font-bold",children:"!!"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[i9(i6(e.startDate),"PPP"),e.endDate&&e.endDate!==e.startDate&&(0,a.jsxs)(a.Fragment,{children:[" - ",i9(i6(e.endDate),"PPP")]})]}),e.note&&a.jsx("div",{className:"text-sm text-gray-500 mt-2",children:e.note}),n&&(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[a.jsx("button",{onClick:()=>b(e.id),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:ix("absence.abortRequest",t)||"Abort"}),a.jsx("button",{onClick:()=>v(e.id),className:"px-3 py-1.5 text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors",children:ix("absence.resendRequest",t)||"Resend"})]})]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${{pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",denied:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[e.status]}`,children:ix(`status.${e.status}`,t)})]})},e.id)};return a.jsx(im,{title:ix("absence.myRequests",t)||"My Requests",children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(iy,{label:ix("absence.newRequest",t)||"Start New Request",onClick:s,variant:"primary",shortcut:"1",autoFocus:!0}),o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:ix("absence.allHistory",t)||"All History"}),a.jsx("div",{className:"space-y-2",children:m.map(e=>g(e,y(e)))})]}),a.jsx(iy,{label:ix("absence.hideHistory",t)||"Hide History",onClick:i,variant:"outline"})]}):(0,a.jsxs)(a.Fragment,{children:[f.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:ix("absence.ongoing",t)||"Ongoing"}),a.jsx("div",{className:"space-y-2",children:f.map(e=>g(e))})]}),p.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:ix("absence.upcoming",t)||"Upcoming"}),a.jsx("div",{className:"space-y-2",children:p.map(e=>g(e))})]}),d.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:ix("absence.pending",t)||"Pending"}),a.jsx("div",{className:"space-y-2",children:d.map(e=>g(e))})]}),h.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:ix("absence.rejected",t)||"Rejected"}),a.jsx("div",{className:"space-y-2",children:h.map(e=>g(e))})]}),a.jsx(iy,{label:ix("absence.showHolidays",t)||"Show Public Holidays",onClick:u,variant:"outline",shortcut:"2"}),m.length>0&&a.jsx(iy,{label:ix("absence.showAllHistory",t)||"Show All History",onClick:l,variant:"outline",shortcut:"3"})]}),a.jsx(iy,{label:ix("absence.newRequest",t)||"Start New Request",onClick:s,variant:"primary",shortcut:"1"})]})})}function aD({language:e,onClose:t}){let r=af(100),n=e=>"ljubljana"===e?"\uD83C\uDDF8\uD83C\uDDEE":"\uD83C\uDDE9\uD83C\uDDEA";return a.jsx(im,{title:ix("absence.publicHolidays",e)||"Public Holidays",children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"space-y-2 max-h-[70vh] overflow-y-auto",children:r.map(t=>a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 flex gap-1 mt-1",children:t.offices.map(e=>a.jsx("span",{className:"text-2xl",children:n(e)},e))}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-lg",children:t.displayName[e]||t.displayName.en}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:i9(i6(t.date),"PPP")})]})]})},t.date))}),a.jsx(iy,{label:ix("common.close",e)||"Close",onClick:t,variant:"primary",autoFocus:!0})]})})}function ak({language:e,requests:t,onClose:r}){let n=[...t].sort((e,t)=>{let r=i6(e.startDate);return i6(t.startDate).getTime()-r.getTime()}),o=e=>{let t=i6(e.createdAt);return aj(i6(e.startDate),t)>30},i=(t,r=!1)=>a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:ix(`absence.types.${t.type}`,e)}),r&&a.jsx("span",{className:"text-red-600 font-bold",children:"!!"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[i9(i6(t.startDate),"PPP"),t.endDate&&t.endDate!==t.startDate&&(0,a.jsxs)(a.Fragment,{children:[" - ",i9(i6(t.endDate),"PPP")]})]}),t.note&&a.jsx("div",{className:"text-sm text-gray-500 mt-2",children:t.note})]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${{pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",denied:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[t.status]}`,children:ix(`status.${t.status}`,e)})]})},t.id);return a.jsx(im,{title:ix("absence.allHistory",e)||"All History",children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:n.length>0?n.map(e=>i(e,o(e))):a.jsx("div",{className:"text-center py-8 text-gray-500",children:ix("absence.noHistory",e)||"No history available"})}),a.jsx(iy,{label:ix("common.close",e)||"Close",onClick:r,variant:"primary",autoFocus:!0})]})})}function aM({language:e,onClose:t}){let[r,n]=(0,s.useState)(""),o=(0,s.useRef)(null);return a.jsx(im,{title:ix("absence.features",e)||"Features",children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"max-h-[70vh] overflow-y-auto bg-white rounded-lg shadow p-6",children:a.jsx("div",{className:"text-sm text-gray-800",children:r?r.split("\n").map((e,t)=>e.startsWith("## ")?a.jsx("h2",{className:"text-2xl font-bold mt-6 mb-3 text-gray-900",children:e.substring(3)},t):e.startsWith("### ")?a.jsx("h3",{className:"text-xl font-semibold mt-4 mb-2 text-gray-800",children:e.substring(4)},t):e.startsWith("- ")?a.jsx("div",{className:"text-green-700 ml-4 mb-1",children:e.substring(2)},t):e.startsWith("- ")?a.jsx("div",{className:"text-yellow-700 ml-4 mb-1",children:e.substring(2)},t):e.startsWith("- \uD83D\uDD2E")?a.jsx("div",{className:"text-gray-600 ml-4 mb-1",children:e.substring(2)},t):e.startsWith("- ")?a.jsx("div",{className:"ml-4 mb-1",children:e.substring(2)},t):""===e.trim()?a.jsx("div",{className:"mb-2"},t):a.jsx("div",{className:"mb-2",children:e},t)):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading features..."})})}),a.jsx("button",{ref:o,onClick:t,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),t())},className:"w-full px-6 py-4 rounded-lg text-left transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 cursor-pointer",autoFocus:!0,children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("span",{className:"text-lg font-medium",children:ix("common.close",e)||"Close"})})})]})})}function aN({language:e,onClose:t}){let[r,n]=(0,s.useState)(""),o=(0,s.useRef)(null);return a.jsx(im,{title:ix("absence.documentation",e)||"Documentation",children:(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"max-h-[70vh] overflow-y-auto bg-white rounded-lg shadow p-6",children:a.jsx("div",{className:"text-sm text-gray-800",children:r?(e=>{let t=e.split("\n"),r=[],n=!1,o=[],i=0;return t.forEach((e,t)=>{if(e.trim().startsWith("```")){n?(r.push(a.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg my-4 overflow-x-auto",children:a.jsx("code",{className:"text-sm font-mono whitespace-pre",children:o.join("\n")})},`code-${i}`)),o=[],n=!1,i++):n=!0;return}if(n){o.push(e);return}e.startsWith("## ")?r.push(a.jsx("h2",{className:"text-2xl font-bold mt-6 mb-3 text-gray-900",children:e.substring(3)},t)):e.startsWith("### ")?r.push(a.jsx("h3",{className:"text-xl font-semibold mt-4 mb-2 text-gray-800",children:e.substring(4)},t)):e.startsWith("- ")?r.push(a.jsx("div",{className:"ml-4 mb-1",children:e.substring(2)},t)):""===e.trim()?r.push(a.jsx("div",{className:"mb-2"},t)):e.startsWith("**")&&e.endsWith("**")?r.push(a.jsx("div",{className:"font-semibold mb-2",children:e.substring(2,e.length-2)},t)):r.push(a.jsx("div",{className:"mb-2",children:e},t))}),n&&o.length>0&&r.push(a.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg my-4 overflow-x-auto",children:a.jsx("code",{className:"text-sm font-mono whitespace-pre",children:o.join("\n")})},`code-${i}`)),r})(r):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading documentation..."})})}),a.jsx("button",{ref:o,onClick:t,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),t())},className:"w-full px-6 py-4 rounded-lg text-left transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 cursor-pointer",autoFocus:!0,children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("span",{className:"text-lg font-medium",children:ix("common.close",e)||"Close"})})})]})})}function aE(){return a.jsx(s.Suspense,{fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:a.jsx(aP,{})})}},77897:(e,t,r)=>{"use strict";r.d(t,{createAbsenceRequest:()=>o,updateAbsenceRequest:()=>i});var n=r(77e3);async function o(e){let t=await (0,n.N8)();if(!t.absences)throw Error("Absences collection not available");let r={id:`abs_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...e,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await t.absences.insert(r),r}async function i(e,t){try{let r=await (0,n.N8)();if(!r.absences)return null;let o=await r.absences.findOne(e).exec();if(!o)return null;let i={updatedAt:new Date().toISOString()};return t.status&&(i.status=t.status),"approved"===t.status?i.approvedAt=new Date().toISOString():"denied"===t.status?i.deniedAt=new Date().toISOString():"cancelled"===t.status&&(i.cancelledAt=new Date().toISOString()),void 0!==t.note&&(i.note=t.note),await o.incrementalPatch(i),o.toJSON()}catch(e){return console.error("Error updating absence request:",e),null}}},77e3:(e,t,r)=>{"use strict";let n;r.d(t,{N8:()=>iE});var o,i,a={};r.r(a),r.d(a,{TMP_FOLDER_BASE:()=>oc,_filterMessage:()=>oK,averageResponseTime:()=>o1,canBeUsed:()=>o0,cleanOldMessages:()=>oL,cleanPipeName:()=>oe,clearNodeFolder:()=>ov,close:()=>oJ,countChannelFolders:()=>oj,create:()=>oU,createSocketEventEmitter:()=>oD,createSocketInfoFile:()=>ox,emitOverFastPath:()=>oX,ensureFoldersExist:()=>oy,getAllMessages:()=>oI,getPaths:()=>op,getReadersUuids:()=>oA,getSingleMessage:()=>oF,handleMessagePing:()=>oW,messagePath:()=>oC,microSeconds:()=>o2,onMessage:()=>oZ,openClientConnection:()=>oM,postMessage:()=>oQ,readMessage:()=>oB,refreshReaderClients:()=>oY,socketInfoPath:()=>ow,socketPath:()=>oO,type:()=>oV,writeMessage:()=>oE});var s=r(48646);function u(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!u(e[n],t[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var r,n,o=Object.keys(e);if((r=o.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;for(n=r;0!=n--;){var i=o[n];if(!u(e[i],t[i]))return!1}return!0}return e!=e&&t!=t}function l(e){return Object.assign({},e)}function c(e,t=!1){if(!e)return e;if(!t&&Array.isArray(e))return e.sort((e,t)=>"string"==typeof e&&"string"==typeof t?e.localeCompare(t):"object"==typeof e?1:-1).map(e=>c(e,t));if("object"==typeof e&&!Array.isArray(e)){var r={};return Object.keys(e).sort((e,t)=>e.localeCompare(t)).forEach(n=>{r[n]=c(e[n],t)}),r}return e}var f=function e(t){if(!t||null===t||"object"!=typeof t)return t;if(Array.isArray(t)){for(var r=Array(t.length),n=r.length;n--;)r[n]=e(t[n]);return r}var o={};for(var i in t)o[i]=e(t[i]);return o};function p(e,t,r){return Object.defineProperty(e,t,{get:function(){return r}}),r}function d(e){return Array.isArray(e)?e.slice(0):[e]}function h(e){return Array.isArray(e)}function m(e){return null!=e}function y(e,t){var r=0,n=-1;for(var o of e)if(t(o,n+=1))r+=1;else break;return r}function b(e,t){var r=t.length;if(0!==r){var n=e.length;e.length=n+t.length;for(var o=0;o<r;++o)e[n+o]=t[o]}}var v=r(98312),g=r(40326),O={isDevMode:()=>!1,deepFreezeWhenDevMode:e=>e,tunnelErrorMessage:e=>"RxDB Error-Code "+e+".\n        Error messages are not included in RxDB core to reduce build size.\n        "};function w(e,t,r){var n;return"RxError ("+t+"):\n"+e+"\n"+(n="",0===Object.keys(r).length?n:n+="Given parameters: {\n"+Object.keys(r).map(e=>{var t="[object Object]";try{t="errors"===e?r[e].map(e=>JSON.stringify(e,Object.getOwnPropertyNames(e))):JSON.stringify(r[e],function(e,t){return void 0===t?null:t},2)}catch(e){}return e+":"+t}).join("\n")+"}")}var x=function(e){function t(t,r,n={}){var o,i=w(r,t,n);return(o=e.call(this,i)||this).code=t,o.message=i,o.url=_(t),o.parameters=n,o.rxdb=!0,o}return v(t,e),t.prototype.toString=function(){return this.message},s(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(g(Error)),j=function(e){function t(t,r,n={}){var o,i=w(r,t,n);return(o=e.call(this,i)||this).code=t,o.message=i,o.url=_(t),o.parameters=n,o.rxdb=!0,o}return v(t,e),t.prototype.toString=function(){return this.message},s(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(g(TypeError));function _(e){return"https://rxdb.info/errors.html?console=errors#"+e}function P(e){return"\n You can find out more about this error here: "+_(e)+" "}function S(e,t){return new x(e,O.tunnelErrorMessage(e)+P(e),t)}function D(e,t){return new j(e,O.tunnelErrorMessage(e)+P(e),t)}function k(e){return!!e&&409===e.status&&e}var M={409:"document write conflict",422:"schema validation error",510:"attachment data missing"},N={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function E(e,t){N[e].length>0&&N[e].forEach(e=>e(t))}function A(e,t){return Promise.all(N[e].map(e=>e(t)))}var T=/\./g,C="abcdefghijklmnopqrstuvwxyz";function $(e=10){for(var t="",r=0;r<e;r++)t+=C.charAt(Math.floor(Math.random()*C.length));return t}function I(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function R(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}var F=e=>{var t=typeof e;return null!==e&&("object"===t||"function"===t)},B=new Set(["__proto__","prototype","constructor"]),L=new Set("0123456789");function q(e){var t=[],r="",n="start",o=!1;for(var i of e)switch(i){case"\\":if("index"===n)throw Error("Invalid character in an index");if("indexEnd"===n)throw Error("Invalid character after an index");o&&(r+=i),n="property",o=!o;break;case".":if("index"===n)throw Error("Invalid character in an index");if("indexEnd"===n){n="property";break}if(o){o=!1,r+=i;break}if(B.has(r))return[];t.push(r),r="",n="property";break;case"[":if("index"===n)throw Error("Invalid character in an index");if("indexEnd"===n){n="index";break}if(o){o=!1,r+=i;break}if("property"===n){if(B.has(r))return[];t.push(r),r=""}n="index";break;case"]":if("index"===n){t.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if("indexEnd"===n)throw Error("Invalid character after an index");default:if("index"===n&&!L.has(i))throw Error("Invalid character in an index");if("indexEnd"===n)throw Error("Invalid character after an index");"start"===n&&(n="property"),o&&(o=!1,r+="\\"),r+=i}switch(o&&(r+="\\"),n){case"property":if(B.has(r))return[];t.push(r);break;case"index":throw Error("Index was not closed");case"start":t.push("")}return t}function V(e,t){if("number"!=typeof t&&Array.isArray(e)){var r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}function U(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!t.includes(".")&&!t.includes("["))return e[t];if(!F(e)||"string"!=typeof t)return void 0===r?e:r;var n=q(t);if(0===n.length)return r;for(var o=0;o<n.length;o++){var i=n[o];if(null==(e=V(e,i)?o===n.length-1?void 0:null:e[i])){if(o!==n.length-1)return r;break}}return void 0===e?r:e}function z(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!F(e)||"string"!=typeof t)return e;for(var n=e,o=q(t),i=0;i<o.length;i++){var a=o[i];(function(e,t){if(V(e,t))throw Error("Cannot use string index")})(e,a),i===o.length-1?e[a]=r:F(e[a])||(e[a]="number"==typeof o[i+1]?[]:{}),e=e[a]}return n}function K(){return{lwt:1}}function W(e,t){var r=t;return U(e,r=R(r="properties."+(r=r.replace(T,".properties."))))}function H(e){return"string"==typeof e?e:e.key}function Y(e,t){if("string"==typeof e.primaryKey)return t[e.primaryKey];var r=e.primaryKey;return r.fields.map(e=>{var r=U(t,e);if(void 0===r)throw S("DOC18",{args:{field:e,documentData:t}});return r}).join(r.separator)}function Q(e){var t=H((e=l(e)).primaryKey);e.properties=l(e.properties),e.additionalProperties=!1,Object.prototype.hasOwnProperty.call(e,"keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=G,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var r=X(e);b(e.required,r),e.required=e.required.filter(e=>!e.includes(".")).filter((e,t,r)=>r.indexOf(e)===t),e.version=e.version||0;var n=e.indexes.map(e=>{var r=h(e)?e.slice(0):[e];return r.includes(t)||r.push(t),"_deleted"!==r[0]&&r.unshift("_deleted"),r});0===n.length&&n.push(["_deleted",t]),n.push(["_meta.lwt",t]),e.internalIndexes&&e.internalIndexes.map(e=>{n.push(e)});var o=new Set;return n.filter(e=>{var t=e.join(",");return!o.has(t)&&(o.add(t),!0)}),e.indexes=n,e}var G={type:"object",properties:{lwt:{type:"number",minimum:1,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function X(e){var t=Object.keys(e.properties).filter(t=>e.properties[t].final),r=H(e.primaryKey);return t.push(r),"string"!=typeof e.primaryKey&&e.primaryKey.fields.forEach(e=>t.push(e)),t}var Z=function(){function e(e,t){this.jsonSchema=e,this.hashFunction=t,this.indexes=(this.jsonSchema.indexes||[]).map(e=>h(e)?e:[e]),this.primaryPath=H(this.jsonSchema.primaryKey),this.finalFields=X(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(e,t){this.finalFields.forEach(r=>{if(!u(e[r],t[r]))throw S("DOC9",{dataBefore:e,dataAfter:t,fieldName:r,schema:this.jsonSchema})})},t.getDocumentPrototype=function(){var e={};return Object.keys(W(this.jsonSchema,"")).forEach(t=>{e.__defineGetter__(t,function(){if(this.get&&"function"==typeof this.get)return this.get(t)}),Object.defineProperty(e,t+"$",{get:function(){return this.get$(t)},enumerable:!1,configurable:!1}),Object.defineProperty(e,t+"$$",{get:function(){return this.get$$(t)},enumerable:!1,configurable:!1}),Object.defineProperty(e,t+"_",{get:function(){return this.populate(t)},enumerable:!1,configurable:!1})}),p(this,"getDocumentPrototype",()=>e),e},t.getPrimaryOfDocumentData=function(e){return Y(this.jsonSchema,e)},s(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var e={};return Object.entries(this.jsonSchema.properties).filter(([,e])=>Object.prototype.hasOwnProperty.call(e,"default")).forEach(([t,r])=>e[t]=r.default),p(this,"defaultValues",e)}},{key:"hash",get:function(){return p(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}(),J=r(29775);function ee(e,t){if(!e)throw t||(t=""),Error("ensureNotFalsy() is falsy: "+t);return e}var et={bufferSize:1,refCount:!0};Promise.resolve(!0);var er=Promise.resolve(!1),en=Promise.resolve(null),eo=Promise.resolve();function ei(e=1e4){return"function"==typeof requestIdleCallback?new Promise(t=>{requestIdleCallback(()=>t(),{timeout:e})}):function(e=0){return new Promise(t=>setTimeout(t,e))}(0)}var ea=eo;function es(e){var t=e.split("-"),r="RxDB";return t.forEach(e=>{r+=I(e)}),Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+(r+="Plugin")+" } from 'rxdb/plugins/"+e+"';\n            addRxPlugin("+r+");\n        ")}function eu(e,t){var r=e.get(t);if(void 0===r)throw Error("missing value from map "+t);return r}function el(e,t,r,n){var o=e.get(t);return void 0===o?(o=r(),e.set(t,o)):n&&n(o),o}var ec=0;function ef(){var e=Date.now();(e+=.01)<=ec&&(e=ec+.01);var t=parseFloat(e.toFixed(2));return ec=t,t}function ep(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if("-"===n)return parseInt(t,10);t+=n}throw Error("malformatted revision: "+e)}function ed(e,t){return(t?ep(t._rev)+1:1)+"-"+e}async function eh(e,t){return(await e.findDocumentsById([t],!1))[0]||void 0}function em(e,t,r,n){if(n){if(409===n.status)throw S("CONFLICT",{collection:e.name,id:t,writeError:n,data:r});if(422===n.status)throw S("VD2",{collection:e.name,id:t,writeError:n,data:r});throw n}}function ey(e){return{previous:e.previous,document:eb(e.document)}}function eb(e){if(!e._attachments||0===Object.keys(e._attachments).length)return e;var t=l(e);return t._attachments={},Object.entries(e._attachments).forEach(([e,r])=>{var n;t._attachments[e]=(n=r.data)?{length:atob(n).length,digest:r.digest,type:r.type}:r}),t}function ev(e){return Object.assign({},e,{_meta:l(e._meta)})}var eg=new WeakMap;function eO(e,t,r){O.deepFreezeWhenDevMode(r);var n=H(t.schema.primaryKey),o={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,bulkWrite(r,o){for(var i=e.token,a=Array(r.length),s=ef(),u=0;u<r.length;u++){var l=r[u],c=ev(l.document);c._meta.lwt=s;var f=l.previous;c._rev=ed(i,f),a[u]={document:c,previous:f}}return E("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:a}),e.lockedRun(()=>t.bulkWrite(a,o)).then(r=>{var i={error:[]},s=ew(n,a,r);eg.set(i,s);var u=0===r.error.length?[]:r.error.filter(e=>409===e.status&&!e.writeRow.previous&&!e.writeRow.document._deleted&&!!ee(e.documentInDb)._deleted||(i.error.push(e),!1));if(u.length>0){var l=u.map(t=>({previous:t.documentInDb,document:Object.assign({},t.writeRow.document,{_rev:ed(e.token,t.documentInDb)})}));return e.lockedRun(()=>t.bulkWrite(l,o)).then(e=>(b(i.error,e.error),b(s,ew(n,l,e)),i))}return i})},query:r=>e.lockedRun(()=>t.query(r)),count:r=>e.lockedRun(()=>t.count(r)),findDocumentsById:(r,n)=>e.lockedRun(()=>t.findDocumentsById(r,n)),getAttachmentData:(r,n,o)=>e.lockedRun(()=>t.getAttachmentData(r,n,o)),getChangedDocumentsSince:t.getChangedDocumentsSince?(r,n)=>e.lockedRun(()=>t.getChangedDocumentsSince(ee(r),n)):void 0,cleanup:r=>e.lockedRun(()=>t.cleanup(r)),remove:()=>(e.storageInstances.delete(o),e.lockedRun(()=>t.remove())),close:()=>(e.storageInstances.delete(o),e.lockedRun(()=>t.close())),changeStream:()=>t.changeStream(),conflictResultionTasks:()=>t.conflictResultionTasks(),resolveConflictResultionTask(e){if(e.output.isEqual)return t.resolveConflictResultionTask(e);var r=l(Object.assign({},e.output.documentData,{_meta:K(),_rev:"",_attachments:{}}));return delete r._meta,delete r._rev,delete r._attachments,t.resolveConflictResultionTask({id:e.id,output:{isEqual:!1,documentData:r}})}};return e.storageInstances.add(o),o}function ew(e,t,r){var n=eg.get(r);if(n)return n;var o=[];if(r.error.length>0){for(var i=new Set,a=0;a<r.error.length;a++){var s=r.error[a];i.add(s.documentId)}for(var u=0;u<t.length;u++){var l=t[u].document;i.has(l[e])||o.push(eb(l))}}else{o.length=t.length-r.error.length;for(var c=0;c<t.length;c++){var f=t[c].document;o[c]=eb(f)}}return o}var ex=function(){function e(e,t,r,n){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=e,this.primaryPath=t,this.preWrite=r,this.postWrite=n}var t=e.prototype;return t.addWrite=function(e,t){var r=e[this.primaryPath],n=el(this.queueByDocId,r,()=>[]);return new Promise((r,o)=>{ee(n).push({lastKnownDocumentState:e,modifier:t,resolve:r,reject:o}),this.triggerRun()})},t.triggerRun=async function(){if(!0!==this.isRunning&&0!==this.queueByDocId.size){this.isRunning=!0;var e=[],t=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(t.entries()).map(async([t,r])=>{var n,o,i,a=(i=ep((o=(n=r.map(e=>e.lastKnownDocumentState))[0])._rev),n.forEach(e=>{var t=ep(e._rev);t>i&&(o=e,i=t)}),o),s=a;for(var u of r)try{s=await u.modifier(f(s))}catch(e){u.reject(e),u.reject=()=>{},u.resolve=()=>{}}try{await this.preWrite(s,a)}catch(e){r.forEach(t=>t.reject(e));return}e.push({previous:a,document:s})}));var r=e.length>0?await this.storageInstance.bulkWrite(e,"incremental-write"):{error:[]};return await Promise.all(ew(this.primaryPath,e,r).map(e=>{var r=e[this.primaryPath];this.postWrite(e),eu(t,r).forEach(t=>t.resolve(e))})),r.error.forEach(e=>{var r=e.documentId,n=eu(t,r),o=k(e);if(o){var i=el(this.queueByDocId,r,()=>[]);n.reverse().forEach(e=>{e.lastKnownDocumentState=ee(o.documentInDb),ee(i).unshift(e)})}else{var a=S("COL20",{name:M[e.status],document:e.documentId,writeError:e});n.forEach(e=>e.reject(a))}}),this.isRunning=!1,this.triggerRun()}},e}();function ej(e){return async t=>{var r=Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0});r._deleted=t._deleted;var n=await e(r),o=Object.assign({},n,{_meta:t._meta,_attachments:t._attachments,_rev:t._rev,_deleted:void 0!==n._deleted?n._deleted:t._deleted});return void 0===o._deleted&&(o._deleted=!1),o}}var e_={get primaryPath(){if(!this.isInstanceOfRxDocument)return;return this.collection.schema.primaryPath},get primary(){if(!this.isInstanceOfRxDocument)return;return this._data[this.primaryPath]},get revision(){if(!this.isInstanceOfRxDocument)return;return this._data._rev},get deleted$(){if(!this.isInstanceOfRxDocument)return;return this.$.pipe((0,J.UI)(e=>e._data._deleted))},get deleted$$(){return this.collection.database.getReactivityFactory().fromObservable(this.deleted$,this.getLatest().deleted,this.collection.database)},get deleted(){if(!this.isInstanceOfRxDocument)return;return this._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){return this.collection.$.pipe((0,J.hX)(e=>!e.isLocal),(0,J.hX)(e=>e.documentId===this.primary),(0,J.UI)(e=>(function(e){return e.documentData?e.documentData:e.previousDocumentData})(e)),(0,J.O4)(this.collection._docCache.getLatestDocumentData(this.primary)),(0,J.xb)((e,t)=>e._rev===t._rev),(0,J.UI)(e=>this.collection._docCache.getCachedRxDocument(e)),(0,J.d)(et))},get $$(){return this.collection.database.getReactivityFactory().fromObservable(this.$,this.getLatest()._data,this.collection.database)},get$(e){if(O.isDevMode()){if(e.includes(".item."))throw S("DOC1",{path:e});if(e===this.primaryPath)throw S("DOC2");if(this.collection.schema.finalFields.includes(e))throw S("DOC3",{path:e});if(!W(this.collection.schema.jsonSchema,e))throw S("DOC4",{path:e})}return this.$.pipe((0,J.UI)(t=>U(t,e)),(0,J.xb)())},get$$(e){var t=this.get$(e);return this.collection.database.getReactivityFactory().fromObservable(t,this.getLatest().get(e),this.collection.database)},populate(e){var t=W(this.collection.schema.jsonSchema,e),r=this.get(e);if(!r)return en;if(!t)throw S("DOC5",{path:e});if(!t.ref)throw S("DOC6",{path:e,schemaObj:t});var n=this.collection.database.collections[t.ref];if(!n)throw S("DOC7",{ref:t.ref,path:e,schemaObj:t});return"array"===t.type?n.findByIds(r).exec().then(e=>Array.from(e.values())):n.findOne(r).exec()},get(e){return function e(t,r){return el(t._propertyCache,r,()=>{var n=U(t._data,r);return"object"!=typeof n||null===n||Array.isArray(n)?O.deepFreezeWhenDevMode(n):new Proxy(l(n),{get(n,o){if("string"!=typeof o)return n[o];var i=o.charAt(o.length-1);if("$"===i){if(o.endsWith("$$")){var a=o.slice(0,-2);return t.get$$(R(r+"."+a))}var s=o.slice(0,-1);return t.get$(R(r+"."+s))}if("_"===i){var u=o.slice(0,-1);return t.populate(R(r+"."+u))}var l=n[o];return"number"==typeof l||"string"==typeof l||"boolean"==typeof l?l:e(t,R(r+"."+o))}})})}(this,e)},toJSON(e=!1){if(e)return O.deepFreezeWhenDevMode(this._data);var t=l(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,O.deepFreezeWhenDevMode(t)},toMutableJSON(e=!1){return f(this.toJSON(e))},update(e){throw es("update")},incrementalUpdate(e){throw es("update")},updateCRDT(e){throw es("crdt")},putAttachment(){throw es("attachments")},getAttachment(){throw es("attachments")},allAttachments(){throw es("attachments")},get allAttachments$(){throw es("attachments")},async modify(e,t){var r=this._data,n=await ej(e)(r);return this._saveData(n,r)},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,ej(e)).then(e=>this.collection._docCache.getCachedRxDocument(e))},patch(e){var t=this._data,r=f(t);return Object.entries(e).forEach(([e,t])=>{r[e]=t}),this._saveData(r,t)},incrementalPatch(e){return this.incrementalModify(t=>(Object.entries(e).forEach(([e,r])=>{t[e]=r}),t))},async _saveData(e,t){if(e=l(e),this._data._deleted)throw S("DOC11",{id:this.primary,document:this});await eP(this.collection,e,t);var r=[{previous:t,document:e}],n=await this.collection.storageInstance.bulkWrite(r,"rx-document-save-data"),o=n.error[0];return em(this.collection,this.primary,e,o),await this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument(ew(this.collection.schema.primaryPath,r,n)[0])},remove(){var e,t=this.collection;if(this.deleted)return Promise.reject(S("DOC13",{document:this,id:this.primary}));var r=l(this._data);return t._runHooks("pre","remove",r,this).then(async()=>{r._deleted=!0;var e=[{previous:this._data,document:r}],n=await t.storageInstance.bulkWrite(e,"rx-document-remove"),o=n.error[0];return em(t,this.primary,r,o),ew(this.collection.schema.primaryPath,e,n)[0]}).then(t=>(e=t,this.collection._runHooks("post","remove",r,this))).then(()=>this.collection._docCache.getCachedRxDocument(e))},incrementalRemove(){return this.incrementalModify(async e=>(await this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e)).then(async e=>(await this.collection._runHooks("post","remove",e._data,e),e))},destroy(){throw S("DOC14")}};function eP(e,t,r){return t._meta=Object.assign({},r._meta,t._meta),O.isDevMode()&&e.schema.validateChange(r,t),e._runHooks("pre","save",t,r)}var eS=function(e,t){return(eS=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function eD(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}eS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function ek(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function eM(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function eN(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function eE(e,t,r){if(r||2==arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function eA(e){return this instanceof eA?(this.v=e,this):new eA(e)}function eT(e){return"function"==typeof e}function eC(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var e$=eC(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function eI(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var eR=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,r,n,o,i=this._parentage;if(i){if(this._parentage=null,Array.isArray(i))try{for(var a=eM(i),s=a.next();!s.done;s=a.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else i.remove(this)}var u=this.initialTeardown;if(eT(u))try{u()}catch(e){o=e instanceof e$?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var c=eM(l),f=c.next();!f.done;f=c.next()){var p=f.value;try{eL(p)}catch(e){o=null!=o?o:[],e instanceof e$?o=eE(eE([],eN(o)),eN(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}if(o)throw new e$(o)}},t.prototype.add=function(e){var r;if(e&&e!==this){if(this.closed)eL(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&eI(t,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&eI(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),eF=eR.EMPTY;function eB(e){return e instanceof eR||e&&"closed"in e&&eT(e.remove)&&eT(e.add)&&eT(e.unsubscribe)}function eL(e){eT(e)?e():e.unsubscribe()}var eq={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},eV={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=eV.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,eE([e,t],eN(r))):setTimeout.apply(void 0,eE([e,t],eN(r)))},clearTimeout:function(e){var t=eV.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function eU(e){eV.setTimeout(function(){var t=eq.onUnhandledError;if(t)t(e);else throw e})}function ez(){}var eK=eW("C",void 0,void 0);function eW(e,t,r){return{kind:e,value:t,error:r}}var eH=null;function eY(e){if(eq.useDeprecatedSynchronousErrorHandling){var t=!eH;if(t&&(eH={errorThrown:!1,error:null}),e(),t){var r=eH,n=r.errorThrown,o=r.error;if(eH=null,n)throw o}}else e()}var eQ=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,eB(t)&&t.add(r)):r.destination=e2,r}return eD(t,e),t.create=function(e,t,r){return new eJ(e,t,r)},t.prototype.next=function(e){this.isStopped?e1(eW("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?e1(eW("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?e1(eK,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(eR),eG=Function.prototype.bind;function eX(e,t){return eG.call(e,t)}var eZ=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){e0(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){e0(e)}else e0(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){e0(e)}},e}(),eJ=function(e){function t(t,r,n){var o,i,a=e.call(this)||this;return eT(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:a&&eq.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},o={next:t.next&&eX(t.next,i),error:t.error&&eX(t.error,i),complete:t.complete&&eX(t.complete,i)}):o=t,a.destination=new eZ(o),a}return eD(t,e),t}(eQ);function e0(e){eq.useDeprecatedSynchronousErrorHandling?eq.useDeprecatedSynchronousErrorHandling&&eH&&(eH.errorThrown=!0,eH.error=e):eU(e)}function e1(e,t){var r=eq.onStoppedNotification;r&&eV.setTimeout(function(){return r(e,t)})}var e2={closed:!0,next:ez,error:function(e){throw e},complete:ez},e3="function"==typeof Symbol&&Symbol.observable||"@@observable";function e5(e){return e}var e9=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,o=this,i=(n=e)&&n instanceof eQ||n&&eT(n.next)&&eT(n.error)&&eT(n.complete)&&eB(n)?e:new eJ(e,t,r);return eY(function(){var e=o.operator,t=o.source;i.add(e?e.call(i,t):t?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=e6(t))(function(t,n){var o=new eJ({next:function(t){try{e(t)}catch(e){n(e),o.unsubscribe()}},error:n,complete:t});r.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[e3]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?e5:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=e6(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function e6(e){var t;return null!==(t=null!=e?e:eq.Promise)&&void 0!==t?t:Promise}var e4=eC(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),e8=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return eD(t,e),t.prototype.lift=function(e){var t=new e7(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new e4},t.prototype.next=function(e){var t=this;eY(function(){var r,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=eM(t.currentObservers),i=o.next();!i.done;i=o.next())i.value.next(e)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}})},t.prototype.error=function(e){var t=this;eY(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}})},t.prototype.complete=function(){var e=this;eY(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,n=this.isStopped,o=this.observers;return r||n?eF:(this.currentObservers=null,o.push(e),new eR(function(){t.currentObservers=null,eI(o,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,n=this.isStopped;t?e.error(r):n&&e.complete()},t.prototype.asObservable=function(){var e=new e9;return e.source=this,e},t.create=function(e,t){return new e7(e,t)},t}(e9),e7=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return eD(t,e),t.prototype.next=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)},t.prototype.error=function(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:eF},t}(e8),te=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return eD(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r.closed||t.next(this._value),r},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(e8);function tt(e){return function(t){if(eT(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function tr(e,t,r,n,o){return new tn(e,t,r,n,o)}var tn=function(e){function t(t,r,n,o,i,a){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return eD(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),r||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(eQ);function to(e,t){return tt(function(r,n){var o=0;r.subscribe(tr(n,function(r){n.next(e.call(t,r,o++))}))})}var ti=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ta(e){return eT(null==e?void 0:e.then)}function ts(e){return Symbol.asyncIterator&&eT(null==e?void 0:e[Symbol.asyncIterator])}function tu(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var tl="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function tc(e){return eT(null==e?void 0:e[tl])}function tf(e){return function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,l)}}),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){o[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||s(e,t)})},t&&(n[e]=t(n[e])))}function s(e,t){try{var r;(r=o[e](t)).value instanceof eA?Promise.resolve(r.value.v).then(u,l):c(i[0][2],r)}catch(e){c(i[0][3],e)}}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}(this,arguments,function(){var t,r,n;return ek(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,eA(t.read())];case 3:if(n=(r=o.sent()).value,!r.done)return[3,5];return[4,eA(void 0)];case 4:return[2,o.sent()];case 5:return[4,eA(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function tp(e){return eT(null==e?void 0:e.getReader)}function td(e){if(e instanceof e9)return e;if(null!=e){if(eT(e[e3]))return new e9(function(t){var r=e[e3]();if(eT(r.subscribe))return r.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(ti(e))return new e9(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()});if(ta(e))return new e9(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,eU)});if(ts(e))return th(e);if(tc(e))return new e9(function(t){var r,n;try{for(var o=eM(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()});if(tp(e))return th(tf(e))}throw tu(e)}function th(e){return new e9(function(t){(function(e,t){var r,n,o,i,a,s,u,l;return a=this,s=void 0,u=void 0,l=function(){var a;return ek(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),r=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=eM(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,o){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,o,(t=e[r](t)).done,t.value)})}}}(e),s.label=1;case 1:return[4,r.next()];case 2:if((n=s.sent()).done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o={error:s.sent()},[3,11];case 6:if(s.trys.push([6,,9,10]),!(n&&!n.done&&(i=r.return)))return[3,8];return[4,i.call(r)];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(u||(u=Promise))(function(e,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):((o=t.value)instanceof u?o:new u(function(e){e(o)})).then(r,n)}o((l=l.apply(a,s||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function tm(e,t,r,n,o){void 0===n&&(n=0),void 0===o&&(o=!1);var i=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}function ty(e,t,r){return(void 0===r&&(r=1/0),eT(t))?ty(function(r,n){return to(function(e,o){return t(r,e,n,o)})(td(e(r,n)))},r):("number"==typeof t&&(r=t),tt(function(t,n){var o,i,a,s,u,l,c,f,p;return o=r,a=[],s=0,u=0,l=!1,c=function(){!l||a.length||s||n.complete()},f=function(e){return s<o?p(e):a.push(e)},p=function(t){s++;var r=!1;td(e(t,u++)).subscribe(tr(n,function(e){i?f(e):n.next(e)},function(){r=!0},void 0,function(){if(r)try{for(s--;a.length&&s<o;)!function(){var e=a.shift();p(e)}();c()}catch(e){n.error(e)}}))},t.subscribe(tr(n,f,function(){l=!0,c()})),function(){}}))}var tb=new e9(function(e){return e.complete()});function tv(e){return e[e.length-1]}function tg(e,t){return void 0===t&&(t=0),tt(function(r,n){r.subscribe(tr(n,function(r){return tm(n,e,function(){return n.next(r)},t)},function(){return tm(n,e,function(){return n.complete()},t)},function(r){return tm(n,e,function(){return n.error(r)},t)}))})}function tO(e,t){return void 0===t&&(t=0),tt(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function tw(e,t){if(!e)throw Error("Iterable cannot be null");return new e9(function(r){tm(r,t,function(){var n=e[Symbol.asyncIterator]();tm(r,t,function(){n.next().then(function(e){e.done?r.complete():r.next(e.value)})},0,!0)})})}let tx=e=>{e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},tj=e=>{e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},t_=e=>{let t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},tP=e=>{let t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},tS=e=>{e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);let t=e.queryParams.primaryKey,r=e.previousResults;for(let n=0;n<r.length;n++)if(r[n][t]===e.changeEvent.id){r.splice(n,1);break}},tD=e=>{let t=e.changeEvent.id,r=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,r)}else if(e.previousResults.find(r=>r[e.queryParams.primaryKey]===t))return;!function(e,t,r,n){var o,i=e.length,a=i-1,s=0;if(0===i)return e.push(t);for(;n<=a;)0>=r(o=e[s=n+(a-n>>1)],t)?n=s+1:a=s-1;0>=r(o,t)&&s++,e.splice(s,0,t)}(e.previousResults,r,e.queryParams.sortComparator,0)},tk=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],tM={doNothing:e=>{},insertFirst:tx,insertLast:tj,removeFirstItem:t_,removeLastItem:tP,removeFirstInsertLast:e=>{t_(e),tj(e)},removeLastInsertFirst:e=>{tP(e),tx(e)},removeFirstInsertFirst:e=>{t_(e),tx(e)},removeLastInsertLast:e=>{tP(e),tj(e)},removeExisting:tS,replaceExisting:e=>{let t=e.changeEvent.doc,r=e.queryParams.primaryKey,n=e.previousResults;for(let o=0;o<n.length;o++)if(n[o][r]===e.changeEvent.id){n[o]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}},alwaysWrong:e=>{let t={_id:"wrongHuman"+new Date().getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},insertAtSortPosition:tD,removeExistingAndInsertAtSortPosition:e=>{tS(e),tD(e)},runFullQueryAgain:e=>{throw Error("Action runFullQueryAgain must be implemented by yourself")},unknownAction:e=>{throw Error("Action unknownAction should never be called")}};function tN(e,t){let r=[];for(let n=0,o=e.length;n<o;n+=t)r.push(e.substring(n,n+t));return r}function tE(e){return e.charCodeAt(0)-40}function tA(e){return e[e.length-1]}function tT(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!function(e){let t=typeof e;return null!==e&&("object"===t||"function"===t)}(e)||"string"!=typeof t)return void 0===r?e:r;let n=t.split(".");if(0===n.length)return r;for(let t=0;t<n.length;t++){let o=n[t];if(null==(e=!function(e,t){if("number"!=typeof t&&Array.isArray(e)){let r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}(e,o)?e[o]:t===n.length-1?void 0:null)){if(t!==n.length-1)return r;break}}return void 0===e?r:e}(function(e=6){let t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let t=0;t<e;t++)r.charAt(Math.floor(Math.random()*n))})(4);let tC=e=>!!e.queryParams.limit,t$={0:e=>"INSERT"===e.changeEvent.operation,1:e=>"UPDATE"===e.changeEvent.operation,2:e=>"DELETE"===e.changeEvent.operation,3:tC,4:e=>1===e.queryParams.limit,5:e=>!!e.queryParams.skip&&e.queryParams.skip>0,6:e=>0===e.previousResults.length,7:e=>tC(e)&&e.previousResults.length>=e.queryParams.limit,8:e=>{let t=e.previousResults[0];return!!t&&t[e.queryParams.primaryKey]===e.changeEvent.id},9:e=>{let t=tA(e.previousResults);return!!t&&t[e.queryParams.primaryKey]===e.changeEvent.id},10:e=>{let t=e.queryParams.sortFields,r=e.changeEvent.previous,n=e.changeEvent.doc;if(!n)return!1;if(!r)return!0;for(let e=0;e<t.length;e++){let o=t[e];if(tT(r,o)!==tT(n,o))return!0}return!1},11:e=>{let t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);{let r=e.queryParams.primaryKey,n=e.previousResults;for(let e=0;e<n.length;e++)if(n[e][r]===t)return!0;return!1}},12:e=>{let t=e.changeEvent.previous;if(!t)return!1;let r=e.previousResults[0];return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||0>e.queryParams.sortComparator(t,r))},13:e=>{let t=e.changeEvent.previous;if(!t)return!1;let r=tA(e.previousResults);return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)>0)},14:e=>{let t=e.changeEvent.doc;if(!t)return!1;let r=e.previousResults[0];return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||0>e.queryParams.sortComparator(t,r))},15:e=>{let t=e.changeEvent.doc;if(!t)return!1;let r=tA(e.previousResults);return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)>0)},16:e=>{let t=e.changeEvent.previous;return!!t&&e.queryParams.queryMatcher(t)},17:e=>{let t=e.changeEvent.doc;return!!t&&e.queryParams.queryMatcher(t)}},tI=e=>(function(e,t,r){let n=e,o=e.l;for(;;){if("number"==typeof(n=n[t[o](r)?"1":"0"])||"string"==typeof n)return n;o=n.l}})((n||(n=function(e){let t=new Map,r=2+2*parseInt(e.charAt(0)+e.charAt(1),10),n=tN(e.substring(2,r),2);for(let e=0;e<n.length;e++){let r=n[e],o=r.charAt(0),i=tE(r.charAt(1));t.set(o,i)}let o=tN(e.substring(r,e.length-3),4);for(let e=0;e<o.length;e++){let r=o[e],n=r.charAt(0),i=r.charAt(1),a=r.charAt(2),s=tE(r.charAt(3));if(!t.has(i))throw Error("missing node with id "+i);if(!t.has(a))throw Error("missing node with id "+a);let u={l:s,0:t.get(i),1:t.get(a)};t.set(n,u)}let i=e.slice(-3),a=i.charAt(0),s=i.charAt(1),u=tE(i.charAt(2));return{l:u,0:t.get(a),1:t.get(s)}}("14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7fae9\xa1bf9\xa2bq9\xa3cg9\xa4ck9\xa5cn9\xa6nd9\xa7np9\xa8nq9\xa9nf9\xaang9\xabnm9\xacnk9\xadmr9\xaems9\xafmt9\xb0mj9\xb1mk9\xb2ml9\xb3mn9\xb4mc8\xb5\xb3{8\xb6\xaf}8\xb7\xb0\xa48\xb8\xb3\xa78\xb9mn8\xba\xb3\xab8\xbb\xb3m8\xbcm\xb44\xbdz\xb24\xbe\xb3w4\xbfz\xb54\xc0\xaf\xb64\xc1\xb0\xb74\xc2\xb3\xba4\xc3\xb3\xb84\xc4m\xb94\xc5v\xa47\xc6yn7\xc7\xc0\xc17\xc8~\x7f7\xc9\xa5\xa47\xca\xc3\xc47\xcb\xa8n7\xcc\xba\xb97\xcd\xad\xb07\xce\xaem7\xcf\xaf\xb07\xd0\xb1m7\xd1\xb3m7\xd2\xbcm5\xd3\xc4m5\xd4\xb9m5\xd5\xbd\xb05\xd6\xbem5\xd7\xbf\xb05\xd8\xc7\xcf5\xd9\xc2m5\xda\xca\xd15\xdb\xb1m5\xdc\xbam5\xdd\xcc\xd15\xde\xd5\xcd2\xdf|\x7f2\xe0\xa1u2\xe1\xa3\xc52\xe2\xd6\xce2\xe3\xa6\xc62\xe4\xa9x2\xe5\xaa\xc62\xe6\xd7\xd82\xe7|\xc82\xe8\xa1\xa22\xe9\xa3\xc92\xea\xa4\xa52\xeb\xd9\xda2\xec\xa6\xcb2\xed\xa9n2\xee\xaan2\xef\xdb\xd02\xf0\xdc\xdd2\xf1\xacn2\xf2\xd2\xd3/\xf3an/\xf4bn/\xf5cn/\xf6\xde\xe2/\xf7\xdf\xe3/\xf8\xe0\xe4/\xf9\xe1\xe5/\xfa\xe6\xeb/\xfb\xe7\xec/\xfc\xe8\xed/\xfd\xe9\xee/\xfe\xcd\xce/\xff\xcf\xd1/\xf2\xd4,cn,\xf6\xef,\xa4\xf1,\xfa\xf0,\xea\xf1,\xfe\xd0,\xff\xd1,ac0bc0\xf3\xf50\xf40\xdf\xe10\xe0\xa40\xe7\xe90\xe8\xea0\xf7\xf90\xf80\xfb\xfd0\xfc0m\xd2-m-\xde\xe6------\xb2\xbb-\xcd\xcf--\xb2\xb3-3333(((++++11*m*.")),n),t$,e);var tR=String.fromCharCode(65535),tF=Number.MIN_SAFE_INTEGER,tB=new Set(["$eq","$gt","$gte","$lt","$lte"]),tL=new Set(["$eq","$gt","$gte"]),tq=new Set(["$eq","$lt","$lte"]),tV=r(50981),tU=r(93561),tz=r(39802),tK=r(15114),tW=r(33244),tH=r(17666),tY=r(2139),tQ=r(28407),tG=r(33605),tX=!1;function tZ(e,t){var r=H(e.primaryKey),n=f(t=l(t));if("number"!=typeof n.skip&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach(([e,t])=>{("object"!=typeof t||null===t)&&(n.selector[e]={$eq:t})})):n.selector={},n.index){var o=d(n.index);o.includes(r)||o.push(r),n.index=o}if(n.sort)n.sort.find(e=>Object.keys(e)[0]===r)||(n.sort=n.sort.slice(0),n.sort.push({[r]:"asc"}));else if(n.index)n.sort=n.index.map(e=>({[e]:"asc"}));else{if(e.indexes){var i,a=new Set;Object.entries(n.selector).forEach(([e,t])=>{("object"!=typeof t||null===t||Object.keys(t).find(e=>tB.has(e)))&&a.add(e)});var s=-1;e.indexes.forEach(e=>{var t=h(e)?e:[e],r=t.findIndex(e=>!a.has(e));r>0&&r>s&&(s=r,i=t)}),i&&(n.sort=i.map(e=>({[e]:"asc"})))}n.sort||(n.sort=[{[r]:"asc"}])}return n}function tJ(e,t){if(!t.sort)throw S("SNH",{query:t});var r=[];return t.sort.forEach(e=>{var t,n,o=Object.keys(e)[0],i=Object.values(e)[0];r.push({key:o,direction:i,getValueFn:1===(n=(t=o.split(".")).length)?e=>e[o]:e=>{for(var r=e,o=0;o<n&&void 0!==(r=r[t[o]]);++o);return r}})}),(e,t)=>{for(var n=0;n<r.length;++n){var o=r[n],i=o.getValueFn(e),a=o.getValueFn(t);if(i!==a)return"asc"===o.direction?(0,tV.compare)(i,a):(0,tV.compare)(a,i)}}}function t0(e,t){if(!t.sort)throw S("SNH",{query:t});var r,n=(r=t.selector,tX||((0,tU.useOperators)(tU.OperatorType.PIPELINE,{$sort:tK.$sort,$project:tK.$project}),(0,tU.useOperators)(tU.OperatorType.QUERY,{$and:tW.$and,$eq:tH.$eq,$elemMatch:tQ.$elemMatch,$exists:tG.$exists,$gt:tH.$gt,$gte:tH.$gte,$in:tH.$in,$lt:tH.$lt,$lte:tH.$lte,$ne:tH.$ne,$nin:tH.$nin,$mod:tY.$mod,$nor:tW.$nor,$not:tW.$not,$or:tW.$or,$regex:tY.$regex,$size:tQ.$size,$type:tG.$type}),tX=!0),new tz.Query(r));return e=>n.test(e)}async function t1(e,t){var r=await e.exec();return r?Array.isArray(r)?Promise.all(r.map(e=>t(e))):r instanceof Map?Promise.all([...r.values()].map(e=>t(e))):await t(r):null}var t2=new WeakMap,t3=function(){function e(){this._map=new Map}return e.prototype.getByQuery=function(e){var t=e.toString();return el(this._map,t,()=>e)},e}();function t5(e,t){t.uncached=!0;var r=t.toString();e._map.delete(r)}var t9=(e,t)=>{if(!(t._map.size<100)){var r=ef()-3e4,n=[];for(var o of Array.from(t._map.values()))if(!(o.refCount$.observers.length>0)){if(0===o._lastEnsureEqual&&o._creationTime<r){t5(t,o);continue}n.push(o)}var i=n.length-100;i<=0||n.sort((e,t)=>e._lastEnsureEqual-t._lastEnsureEqual).slice(0,i).forEach(e=>t5(t,e))}},t6=new WeakSet,t4=function(){function e(e,t,r){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry(e=>{var t=e.docId,r=this.cacheItemByDocId.get(t);r&&(r[0].delete(e.revisionHeight),0===r[0].size&&this.cacheItemByDocId.delete(t))}):void 0,this.primaryPath=e,this.changes$=t,this.documentCreator=r,t.subscribe(e=>{this.tasks.add(()=>{for(var t=this.cacheItemByDocId,r=0;r<e.length;r++){var n=e[r],o=t.get(n.documentId);if(o){var i=n.documentData;i||(i=n.previousDocumentData),o[1]=i}}}),this.tasks.size<=1&&ei().then(()=>{this.processTasks()})})}var t=e.prototype;return t.processTasks=function(){0!==this.tasks.size&&(Array.from(this.tasks).forEach(e=>e()),this.tasks.clear())},t.getLatestDocumentData=function(e){return this.processTasks(),eu(this.cacheItemByDocId,e)[1]},t.getLatestDocumentDataIfExists=function(e){this.processTasks();var t=this.cacheItemByDocId.get(e);if(t)return t[1]},s(e,[{key:"getCachedRxDocuments",get:function(){return p(this,"getCachedRxDocuments",t8(this))}},{key:"getCachedRxDocument",get:function(){var e=t8(this);return p(this,"getCachedRxDocument",t=>e([t])[0])}}])}();function t8(e){var t=e.primaryPath,r=e.cacheItemByDocId,n=e.registry,o=O.deepFreezeWhenDevMode,i=e.documentCreator;return a=>{for(var s=Array(a.length),u=[],l=0;l<a.length;l++){var c=a[l],f=c[t],p=ep(c._rev),d=void 0,h=void 0,m=r.get(f);m?h=(d=m[0]).get(p):(m=[d=new Map,c],r.set(f,m));var y=h?h.deref():void 0;!y&&(y=i(c=o(c)),d.set(p,re(y)),n&&u.push(y)),s[l]=y}return u.length>0&&n&&(e.tasks.add(()=>{for(var e=0;e<u.length;e++){var t=u[e];n.register(t,{docId:t.primary,revisionHeight:ep(t.revision)})}}),e.tasks.size<=1&&ei().then(()=>{e.processTasks()})),s}}function t7(e,t){return(0,e.getCachedRxDocuments)(t)}var re="function"==typeof WeakRef?function(e){return new WeakRef(e)}:function(e){return{deref:()=>e}},rt=function(){function e(e,t,r){this.time=ef(),this.query=e,this.count=r,this.documents=t7(this.query.collection._docCache,t)}return e.prototype.getValue=function(e){var t=this.query.op;if("count"===t)return this.count;if("findOne"===t){var r=0===this.documents.length?null:this.documents[0];if(r||!e)return r;throw S("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:t})}return"findByIds"===t?this.docsMap:this.documents.slice(0)},s(e,[{key:"docsData",get:function(){return p(this,"docsData",this.documents.map(e=>e._data))}},{key:"docsDataMap",get:function(){var e=new Map;return this.documents.forEach(t=>{e.set(t.primary,t._data)}),p(this,"docsDataMap",e)}},{key:"docsMap",get:function(){for(var e=new Map,t=this.documents,r=0;r<t.length;r++){var n=t[r];e.set(n.primary,n)}return p(this,"docsMap",e)}}])}(),rr=0,rn=function(){function e(e,t,r,n={}){this.id=++rr,this._execOverDatabaseCount=0,this._creationTime=ef(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new te(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=er,this.op=e,this.mangoQuery=t,this.collection=r,this.other=n,t||(this.mangoQuery=ro()),this.isFindOneByIdQuery=function(e,t){if(!t.skip&&t.selector&&1===Object.keys(t.selector).length&&t.selector[e]){var r=t.selector[e];if("string"==typeof r)return r;if(1===Object.keys(r).length&&"string"==typeof r.$eq||1===Object.keys(r).length&&Array.isArray(r.$eq)&&!r.$eq.find(e=>"string"!=typeof e))return r.$eq}return!1}(this.collection.schema.primaryPath,t)}var t=e.prototype;return t._setResultData=function(e){if(void 0===e)throw S("QU18",{database:this.collection.database.name,collection:this.collection.name});if("number"==typeof e){this._result=new rt(this,[],e);return}e instanceof Map&&(e=Array.from(e.values()));var t=new rt(this,e,e.length);this._result=t},t._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=ef(),"count"===this.op){var e=this.getPreparedQuery(),t=await this.collection.storageInstance.count(e);if("slow"!==t.mode||this.collection.database.allowSlowCount)return t.count;throw S("QU14",{collection:this.collection,queryObj:this.mangoQuery})}if("findByIds"===this.op){var r=ee(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,n=new Map,o=[];return r.forEach(e=>{var t=this.collection._docCache.getLatestDocumentDataIfExists(e);if(t){if(!t._deleted){var r=this.collection._docCache.getCachedRxDocument(t);n.set(e,r)}}else o.push(e)}),o.length>0&&(await this.collection.storageInstance.findDocumentsById(o,!1)).forEach(e=>{var t=this.collection._docCache.getCachedRxDocument(e);n.set(t.primary,t)}),n}return rl(this).then(e=>(this._lastExecEnd=ef(),e))},t.exec=async function(e){if(e&&"findOne"!==this.op)throw S("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return await rs(this),ee(this._result).getValue(e)},t.toString=function(){var e=JSON.stringify(c({op:this.op,query:this.mangoQuery,other:this.other},!0));return this.toString=()=>e,e},t.getPreparedQuery=function(){var e={rxQuery:this,mangoQuery:tZ(this.collection.schema.jsonSchema,this.mangoQuery)};e.mangoQuery.selector._deleted={$eq:!1},e.mangoQuery.index&&e.mangoQuery.index.unshift("_deleted"),E("prePrepareQuery",e);var t=ru(this.collection.schema.jsonSchema,e.mangoQuery);return this.getPreparedQuery=()=>t,t},t.doesDocumentDataMatch=function(e){return!e._deleted&&this.queryMatcher(e)},t.remove=function(){return this.exec().then(e=>Array.isArray(e)?Promise.all(e.map(e=>e.remove())):e.remove())},t.incrementalRemove=function(){return t1(this.asRxQuery,e=>e.incrementalRemove())},t.update=function(e){throw es("update")},t.patch=function(e){return t1(this.asRxQuery,t=>t.patch(e))},t.incrementalPatch=function(e){return t1(this.asRxQuery,t=>t.incrementalPatch(e))},t.modify=function(e){return t1(this.asRxQuery,t=>t.modify(e))},t.incrementalModify=function(e){return t1(this.asRxQuery,t=>t.incrementalModify(e))},t.where=function(e){throw es("query-builder")},t.sort=function(e){throw es("query-builder")},t.skip=function(e){throw es("query-builder")},t.limit=function(e){throw es("query-builder")},s(e,[{key:"$",get:function(){if(!this._$){var e=this.collection.$.pipe((0,J.hX)(e=>!e.isLocal),(0,J.O4)(null),(0,J.zg)(()=>rs(this)),(0,J.UI)(()=>this._result),(0,J.d)(et),(0,J.xb)((e,t)=>!!e&&e.time===ee(t).time),(0,J.hX)(e=>!!e),(0,J.UI)(e=>ee(e).getValue()));this._$=function(){for(var e,t,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=(e=tv(n))&&eT(e.schedule)?n.pop():void 0,a=(t=1/0,"number"==typeof tv(n)?n.pop():t);return n.length?1===n.length?td(n[0]):(void 0===(r=a)&&(r=1/0),ty(e5,r))(i?function(e,t){if(null!=e){if(eT(e[e3]))return td(e).pipe(tO(t),tg(t));if(ti(e))return new e9(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})});if(ta(e))return td(e).pipe(tO(t),tg(t));if(ts(e))return tw(e,t);if(tc(e))return new e9(function(r){var n;return tm(r,t,function(){n=e[tl](),tm(r,t,function(){var e,t,o;try{t=(e=n.next()).value,o=e.done}catch(e){r.error(e);return}o?r.complete():r.next(t)},0,!0)}),function(){return eT(null==n?void 0:n.return)&&n.return()}});if(tp(e))return tw(tf(e),t)}throw tu(e)}(n,i):td(n)):tb}(e,this.refCount$.pipe((0,J.hX)(()=>!1)))}return this._$}},{key:"$$",get:function(){return this.collection.database.getReactivityFactory().fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){return p(this,"queryMatcher",t0(this.collection.schema.jsonSchema,tZ(this.collection.schema.jsonSchema,this.mangoQuery)))}},{key:"asRxQuery",get:function(){return this}}])}();function ro(){return{selector:{}}}function ri(e,t,r,n){E("preCreateRxQuery",{op:e,queryObj:t,collection:r,other:n});var o,i=new rn(e,t,r,n);return i=(o=i).collection._queryCache.getByQuery(o),t6.has(r)||(t6.add(r),new Promise(e=>setTimeout(e,0)).then(()=>ea=ea.then(()=>ei(200))).then(()=>{r.destroyed||r.cacheReplacementPolicy(r,r._queryCache),t6.delete(r)})),i}function ra(e){var t=e.asRxQuery.collection._changeEventBuffer.getCounter();return e._latestChangeEvent>=t}async function rs(e){return e.collection.awaitBeforeReads.size>0&&await Promise.all(Array.from(e.collection.awaitBeforeReads).map(e=>e())),!(e.collection.database.destroyed||ra(e))&&(e._ensureEqualQueue=e._ensureEqualQueue.then(()=>(function(e){if(e._lastEnsureEqual=ef(),e.collection.database.destroyed||ra(e))return er;var t=!1,r=!1;if(-1===e._latestChangeEvent&&(r=!0),!r){var n=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(null===n)r=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.getCounter();var o=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n);if("count"===e.op){var i=ee(e._result).count,a=i;o.forEach(t=>{var r=t.previousDocumentData&&e.doesDocumentDataMatch(t.previousDocumentData),n=e.doesDocumentDataMatch(t.documentData);!r&&n&&a++,r&&!n&&a--}),a!==i&&(t=!0,e._setResultData(a))}else{var s=function(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=el(t2,e,()=>{var t=e.collection,r=tZ(t.storageInstance.schema,f(e.mangoQuery)),n=t.schema.primaryPath,o=tJ(t.schema.jsonSchema,r),i=t0(t.schema.jsonSchema,r);return{primaryKey:e.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:r.sort&&0!==r.sort.length?r.sort.map(e=>Object.keys(e)[0]):[n],sortComparator:(e,t)=>o(e,t),queryMatcher:t=>i({doc:t,rxQuery:e}.doc)}}),n=ee(e._result).docsData.slice(0),o=ee(e._result).docsDataMap,i=!1;return t.map(e=>(function(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:O.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}})(e)).filter(m).find(e=>{var t=tk[tI({queryParams:r,changeEvent:e,previousResults:n,keyDocumentMap:o})];return"runFullQueryAgain"===t||("doNothing"!==t?(i=!0,(0,tM[t])({queryParams:r,changeEvent:e,previousResults:n,keyDocumentMap:o}),!1):void 0)})?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:i,newResults:n}}(e,o);s.runFullQueryAgain?r=!0:s.changed&&(t=!0,e._setResultData(s.newResults))}}}return r?e._execOverDatabase().then(r=>((e._latestChangeEvent=e.collection._changeEventBuffer.getCounter(),"number"==typeof r)?e._result&&r===e._result.count||(t=!0,e._setResultData(r)):e._result&&function(e,t,r){if(t.length!==r.length)return!1;for(var n=0,o=t.length;n<o;){var i=t[n],a=r[n];if(n++,i._rev!==a._rev||i[e]!==a[e])return!1}return!0}(e.collection.schema.primaryPath,r,e._result.docsData)||(t=!0,e._setResultData(r)),t)):Promise.resolve(t)})(e)),e._ensureEqualQueue)}function ru(e,t){if(!t.sort)throw S("SNH",{query:t});var r=function(e,t){var r,n=t.selector,o=e.indexes?e.indexes.slice(0):[];t.index&&(o=[t.index]);var i=!!t.sort.find(e=>"desc"===Object.values(e)[0]),a=new Set;Object.keys(n).forEach(t=>{var r=W(e,t);r&&"boolean"===r.type&&Object.prototype.hasOwnProperty.call(n[t],"$eq")&&a.add(t)});var s=t.sort.map(e=>Object.keys(e)[0]).filter(e=>!a.has(e)).join(","),u=-1;if(o.forEach(e=>{var o,l,c=!0,f=!0,p=e.map(e=>{var t=n[e],r=t?Object.keys(t):[],o={};return t&&r.length?r.forEach(e=>{if(tB.has(e)){var r=t[e],n=function(e,t){switch(e){case"$eq":return{startKey:t,endKey:t,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:t,inclusiveEnd:!0};case"$gte":return{startKey:t,inclusiveStart:!0};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw Error("SNH")}}(e,r);o=Object.assign(o,n)}}):o={startKey:f?tF:tR,endKey:c?tR:tF,inclusiveStart:!0,inclusiveEnd:!0},void 0===o.startKey&&(o.startKey=tF),void 0===o.endKey&&(o.endKey=tR),void 0===o.inclusiveStart&&(o.inclusiveStart=!0),void 0===o.inclusiveEnd&&(o.inclusiveEnd=!0),f&&!o.inclusiveStart&&(f=!1),c&&!o.inclusiveEnd&&(c=!1),o}),d=p.map(e=>e.startKey),h=p.map(e=>e.endKey),m={index:e,startKeys:d,endKeys:h,inclusiveEnd:c,inclusiveStart:f,sortSatisfiedByIndex:!i&&s===e.filter(e=>!a.has(e)).join(","),selectorSatisfiedByIndex:function(e,t,r,n){if(Object.entries(t).find(([t,r])=>!e.includes(t)||Object.entries(r).find(([e,t])=>!tB.has(e)))||t.$and||t.$or)return!1;var o=[],i=new Set;for(var[a,s]of Object.entries(t)){if(!e.includes(a))return!1;var u=Object.keys(s).filter(e=>tL.has(e));if(u.length>1)return!1;var l=u[0];if(l&&i.add(a),"$eq"!==l){if(o.length>0)return!1;o.push(l)}}var c=[],f=new Set;for(var[p,d]of Object.entries(t)){if(!e.includes(p))return!1;var h=Object.keys(d).filter(e=>tq.has(e));if(h.length>1)return!1;var m=h[0];if(m&&f.add(p),"$eq"!==m){if(c.length>0)return!1;c.push(m)}}var y=0;for(var b of e){for(var v of[i,f]){if(!v.has(b)&&v.size>0)return!1;v.delete(b)}if(r[y]!==n[y]&&i.size>0&&f.size>0)return!1;y++}return!0}(e,t.selector,d,h)},b=(o=0,(l=e=>{e>0&&(o+=e)})(10*y(m.startKeys,e=>e!==tF&&e!==tR)),l(10*y(m.startKeys,e=>e!==tR&&e!==tF)),l(15*y(m.startKeys,(e,t)=>e===m.endKeys[t])),l(m.sortSatisfiedByIndex?5:0),o);(b>=u||t.index)&&(u=b,r=m)}),!r)throw S("SNH",{query:t});return r}(e,t);return{query:t,queryPlan:r}}async function rl(e){var t=[],r=e.collection;if(e.isFindOneByIdQuery){if(Array.isArray(e.isFindOneByIdQuery)){var n=e.isFindOneByIdQuery;if((n=n.filter(r=>{var n=e.collection._docCache.getLatestDocumentDataIfExists(r);return!n||(n._deleted||t.push(n),!1)})).length>0){var o=await r.storageInstance.findDocumentsById(n,!1);b(t,o)}}else{var i=e.isFindOneByIdQuery,a=e.collection._docCache.getLatestDocumentDataIfExists(i);if(!a){var s=await r.storageInstance.findDocumentsById([i],!1);s[0]&&(a=s[0])}a&&!a._deleted&&t.push(a)}}else{var u=e.getPreparedQuery();t=(await r.storageInstance.query(u)).documents}return t}function rc(e,t){return tt(function(r,n){var o=0;r.subscribe(tr(n,function(r){return e.call(t,r,o++)&&n.next(r)}))})}var rf="collection",rp="storage-token",rd=Q({version:0,title:"RxInternalDocument",primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[rf,rp,"rx-migration-status","OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function rh(e,t){return Y(rd,{key:e,context:t})}async function rm(e){var t=ru(e.schema,{selector:{context:rf,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0});return(await e.query(t)).documents}var ry="storageToken",rb=rh(ry,rp);async function rv(e){var t,r,n=$(10),o=e.password?await e.hashFunction(JSON.stringify(e.password)):void 0,i=[{document:{id:rb,context:rp,key:ry,data:{rxdbVersion:e.rxdbVersion,token:n,instanceToken:e.token,passwordHash:o},_deleted:!1,_meta:K(),_rev:"",_attachments:{}}}],a=await e.internalStore.bulkWrite(i,"internal-add-storage-token");if(!a.error[0])return ew("id",i,a)[0];var s=ee(a.error[0]);if(s.isError&&k(s)){if(t=s.documentInDb.data.rxdbVersion,r=e.rxdbVersion,!t||r.includes("beta")&&r!==t||t.split(".")[0]!==r.split(".")[0])throw S("DM5",{args:{database:e.name,databaseStateVersion:s.documentInDb.data.rxdbVersion,codeVersion:e.rxdbVersion}});if(o&&o!==s.documentInDb.data.passwordHash)throw S("DB1",{passwordHash:o,existingPasswordHash:s.documentInDb.data.passwordHash});return ee(s.documentInDb)}throw s}function rg(e,t){return e+"-"+t.version}function rO(e,t){return t=function(e,t){for(var r=Object.keys(e.defaultValues),n=0;n<r.length;++n){var o=r[n];Object.prototype.hasOwnProperty.call(t,o)&&void 0!==t[o]||(t[o]=e.defaultValues[o])}return t}(e,t=l(t)),"string"!=typeof e.jsonSchema.primaryKey&&(t=function(e,t,r){if("string"==typeof t.primaryKey)return r;var n=Y(t,r),o=r[e];if(o&&o!==n)throw S("DOC19",{args:{documentData:r,existingPrimary:o,newPrimary:n},schema:t});return r[e]=n,r}(e.primaryPath,e.jsonSchema,t)),t._meta=K(),Object.prototype.hasOwnProperty.call(t,"_deleted")||(t._deleted=!1),Object.prototype.hasOwnProperty.call(t,"_attachments")||(t._attachments={}),Object.prototype.hasOwnProperty.call(t,"_rev")||(t._rev=""),t}async function rw(e,t){return t.multiInstance=e.multiInstance,await e.storage.createStorageInstance(t)}async function rx(e,t,r,n,o,i,a){var s=(await rm(t)).filter(e=>e.data.name===o),u=[];s.forEach(e=>{u.push({collectionName:e.data.name,schema:e.data.schema,isCollection:!0}),e.data.connectedStorages.forEach(e=>u.push({collectionName:e.collectionName,isCollection:!1,schema:e.schema}))});var l=new Set;if(u=u.filter(e=>{var t=e.collectionName+"||"+e.schema.version;return!l.has(t)&&(l.add(t),!0)}),await Promise.all(u.map(async t=>{var a=await e.createStorageInstance({collectionName:t.collectionName,databaseInstanceToken:r,databaseName:n,multiInstance:!1,options:{},schema:t.schema,password:i,devMode:O.isDevMode()});await a.remove(),t.isCollection&&await A("postRemoveRxCollection",{storage:e,databaseName:n,collectionName:o})})),a){var c=s.map(e=>{var t=ev(e);return t._deleted=!0,t._meta.lwt=ef(),t._rev=ed(r,e),{previous:e,document:t}});await t.bulkWrite(c,"rx-database-remove-collection-all")}}function rj(e){if(e.destroyed)throw S("COL21",{collection:e.name,version:e.schema.version})}var r_=function(){function e(e){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=e,this.subs.push(this.collection.database.eventBulks$.pipe((0,J.hX)(e=>e.collectionName===this.collection.name),(0,J.hX)(e=>!e.events[0].isLocal)).subscribe(e=>{this.tasks.add(()=>this._handleChangeEvents(e.events)),this.tasks.size<=1&&ei().then(()=>{this.processTasks()})}))}var t=e.prototype;return t.processTasks=function(){0!==this.tasks.size&&(Array.from(this.tasks).forEach(e=>e()),this.tasks.clear())},t._handleChangeEvents=function(e){var t=this.counter;this.counter=this.counter+e.length,e.length>this.limit?this.buffer=e.slice(-1*e.length):(b(this.buffer,e),this.buffer=this.buffer.slice(-1*this.limit));for(var r=t+1,n=this.eventCounterMap,o=0;o<e.length;o++){var i=e[o];n.set(i,r+o)}},t.getCounter=function(){return this.processTasks(),this.counter},t.getBuffer=function(){return this.processTasks(),this.buffer},t.getArrayIndexByPointer=function(e){this.processTasks();var t=this.buffer[0],r=this.eventCounterMap.get(t);return e<r?null:e-r},t.getFrom=function(e){this.processTasks();var t=[],r=this.getArrayIndexByPointer(e);if(null===r)return null;for(;;){var n=this.buffer[r];if(r++,!n)return t;t.push(n)}},t.runFrom=function(e,t){this.processTasks();var r=this.getFrom(e);if(null===r)throw Error("out of bounds");r.forEach(e=>t(e))},t.reduceByLastOfDoc=function(e){return this.processTasks(),e.slice(0)},t.destroy=function(){this.tasks.clear(),this.subs.forEach(e=>e.unsubscribe())},e}(),rP=new WeakMap,rS=function(e,t){return u(eb(e.newDocumentState),eb(e.realMasterState))?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:e.realMasterState})},rD=["pre","post"],rk=["insert","save","remove","create"],rM=!1,rN=function(){function e(e,t,r,n,o={},i={},a={},s={},u={},l=t9,c={},f=rS){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=new t3,this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=e,this.name=t,this.schema=r,this.internalStorageInstance=n,this.instanceCreationOptions=o,this.migrationStrategies=i,this.methods=a,this.attachments=s,this.options=u,this.cacheReplacementPolicy=l,this.statics=c,this.conflictHandler=f,function(e){if(!rM){rM=!0;var t=Object.getPrototypeOf(e);rk.forEach(e=>{rD.map(r=>{t[r+I(e)]=function(t,n){return this.addHook(r,e,t,n)}})})}}(this.asRxCollection)}var t=e.prototype;return t.prepare=async function(){this.storageInstance=eO(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new ex(this.storageInstance,this.schema.primaryPath,(e,t)=>eP(this,e,t),e=>this._runHooks("post","save",e));var e,t=this.database.eventBulks$.pipe(rc(e=>e.collectionName===this.name));this.$=t.pipe(ty(e=>e.events)),this.checkpoint$=t.pipe(to(e=>e.checkpoint)),this._changeEventBuffer=new r_(this.asRxCollection),this._docCache=new t4(this.schema.primaryPath,this.database.eventBulks$.pipe(rc(e=>e.collectionName===this.name&&!e.events[0].isLocal),to(e=>e.events)),t=>{var r,n,o,i;return!e&&(e=el(rP,r=this.asRxCollection,()=>{var e,t,n;return function(e=e_){var t=function(e,t){this.collection=e,this._data=t,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}((e=r.schema.getDocumentPrototype(),n={},Object.entries(r.methods).forEach(([e,t])=>{n[e]=t}),t={},[e,n,e_].forEach(e=>{Object.getOwnPropertyNames(e).forEach(r=>{var n=Object.getOwnPropertyDescriptor(e,r),o=!0;(r.startsWith("_")||r.endsWith("_")||r.startsWith("$")||r.endsWith("$"))&&(o=!1),"function"==typeof n.value?Object.defineProperty(t,r,{get(){return n.value.bind(this)},enumerable:o,configurable:!1}):(n.enumerable=o,n.configurable=!1,n.writable&&(n.writable=!1),Object.defineProperty(t,r,n))})}),t))})),n=this.asRxCollection,E("createRxDocument",o=new e(n,O.deepFreezeWhenDevMode(t))),i=o,n._runHooksSync("post","create",t,i),E("postCreateRxDocument",i),i});var r=this.database.internalStore.changeStream().pipe(rc(e=>{var t=this.name+"-"+this.schema.version;return!!e.events.find(e=>"collection"===e.documentData.context&&e.documentData.key===t&&"DELETE"===e.operation)})).subscribe(async()=>{await this.destroy(),await Promise.all(this.onRemove.map(e=>e()))});this._subs.push(r);var n=await this.database.storageToken,o=this.storageInstance.changeStream().subscribe(e=>{for(var t=Array(e.events.length),r=e.events,o=this.name,i=O.deepFreezeWhenDevMode,a=0;a<r.length;a++){var s=r[a];t[a]={documentId:s.documentId,collectionName:o,isLocal:!1,operation:s.operation,documentData:i(s.documentData),previousDocumentData:i(s.previousDocumentData)}}var u={id:e.id,internal:!1,collectionName:this.name,storageToken:n,events:t,databaseToken:this.database.token,checkpoint:e.checkpoint,context:e.context,endTime:e.endTime,startTime:e.startTime};this.database.$emit(u)});return this._subs.push(o),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(e=>{this.conflictHandler(e.input,e.context).then(t=>{this.storageInstance.resolveConflictResultionTask({id:e.id,output:t})})})),eo},t.cleanup=function(e){throw rj(this),es("cleanup")},t.migrationNeeded=function(){throw es("migration-schema")},t.getMigrationState=function(){throw es("migration-schema")},t.startMigration=function(e=10){return rj(this),this.getMigrationState().startMigration(e)},t.migratePromise=function(e=10){return this.getMigrationState().migratePromise(e)},t.insert=async function(e){rj(this);var t=await this.bulkInsert([e]),r=t.error[0];return em(this,e[this.schema.primaryPath],e,r),ee(t.success[0])},t.bulkInsert=async function(e){if(rj(this),0===e.length)return{success:[],error:[]};var t,r,n=this.schema.primaryPath,o=new Set;if(this.hasHooks("pre","insert"))t=await Promise.all(e.map(e=>{var t=rO(this.schema,e);return this._runHooks("pre","insert",t).then(()=>(o.add(t[n]),{document:t}))}));else{t=Array(e.length);for(var i=this.schema,a=0;a<e.length;a++){var s=rO(i,e[a]);o.add(s[n]),t[a]={document:s}}}if(o.size!==e.length)throw S("COL22",{collection:this.name,args:{documents:e}});var u=await this.storageInstance.bulkWrite(t,"rx-collection-bulk-insert"),l=this,c={get success(){if(!r){var f=ew(l.schema.primaryPath,t,u);r=t7(l._docCache,f)}return r},error:u.error};if(this.hasHooks("post","insert")){var p=new Map;t.forEach(e=>{var t=e.document;p.set(t[n],t)}),await Promise.all(c.success.map(e=>this._runHooks("post","insert",p.get(e.primary),e)))}return c},t.bulkRemove=async function(e){rj(this);var t=this.schema.primaryPath;if(0===e.length)return{success:[],error:[]};var r=await this.findByIds(e).exec(),n=[],o=new Map;Array.from(r.values()).forEach(e=>{var t=e.toMutableJSON(!0);n.push(t),o.set(e.primary,t)}),await Promise.all(n.map(e=>{var t=e[this.schema.primaryPath];return this._runHooks("pre","remove",e,r.get(t))}));var i=n.map(e=>{var t=l(e);return t._deleted=!0,{previous:e,document:t}}),a=await this.storageInstance.bulkWrite(i,"rx-collection-bulk-remove"),s=ew(this.schema.primaryPath,i,a).map(e=>e[t]);return await Promise.all(s.map(e=>this._runHooks("post","remove",o.get(e),r.get(e)))),{success:s.map(e=>eu(r,e)),error:a.error}},t.bulkUpsert=async function(e){rj(this);var t=[],r=new Map;e.forEach(e=>{var n=rO(this.schema,e),o=n[this.schema.primaryPath];if(!o)throw S("COL3",{primaryPath:this.schema.primaryPath,data:n,schema:this.schema.jsonSchema});r.set(o,n),t.push(n)});var n=await this.bulkInsert(t),o=n.success.slice(0),i=[];return await Promise.all(n.error.map(async e=>{if(409!==e.status)i.push(e);else{var t=eu(r,e.documentId),n=ee(e.documentInDb),a=this._docCache.getCachedRxDocuments([n])[0],s=await a.incrementalModify(()=>t);o.push(s)}})),{error:i,success:o}},t.upsert=async function(e){rj(this);var t=await this.bulkUpsert([e]);return em(this.asRxCollection,e[this.schema.primaryPath],e,t.error[0]),t.success[0]},t.incrementalUpsert=function(e){rj(this);var t=rO(this.schema,e),r=t[this.schema.primaryPath];if(!r)throw S("COL4",{data:e});var n=this._incrementalUpsertQueues.get(r);return n||(n=eo),n=n.then(()=>{var e,n;return e=this,(n=e._docCache.getLatestDocumentDataIfExists(r))?Promise.resolve({doc:e._docCache.getCachedRxDocuments([n])[0],inserted:!1}):e.findOne(r).exec().then(r=>r?{doc:r,inserted:!1}:e.insert(t).then(e=>({doc:e,inserted:!0})))}).then(e=>e.inserted?e.doc:e.doc.incrementalModify(e=>t)),this._incrementalUpsertQueues.set(r,n),n},t.find=function(e){if(rj(this),"string"==typeof e)throw S("COL5",{queryObj:e});return e||(e=ro()),ri("find",e,this)},t.findOne=function(e){var t;if(rj(this),"number"==typeof e||Array.isArray(e))throw D("COL6",{queryObj:e});if("string"==typeof e)t=ri("findOne",{selector:{[this.schema.primaryPath]:e},limit:1},this);else{if(e||(e=ro()),e.limit)throw S("QU6");(e=l(e)).limit=1,t=ri("findOne",e,this)}return t},t.count=function(e){return rj(this),e||(e=ro()),ri("count",e,this)},t.findByIds=function(e){return rj(this),ri("findByIds",{selector:{[this.schema.primaryPath]:{$in:e.slice(0)}}},this)},t.exportJSON=function(){throw es("json-dump")},t.importJSON=function(e){throw es("json-dump")},t.insertCRDT=function(e){throw es("crdt")},t.addPipeline=function(e){throw es("pipeline")},t.addHook=function(e,t,r,n=!1){if("function"!=typeof r)throw D("COL7",{key:t,when:e});if(!rD.includes(e))throw D("COL8",{key:t,when:e});if(!rk.includes(t))throw S("COL9",{key:t});if("post"===e&&"create"===t&&!0===n)throw S("COL10",{when:e,key:t,parallel:n});var o=r.bind(this),i=n?"parallel":"series";this.hooks[t]=this.hooks[t]||{},this.hooks[t][e]=this.hooks[t][e]||{series:[],parallel:[]},this.hooks[t][e][i].push(o)},t.getHooks=function(e,t){return this.hooks[t]&&this.hooks[t][e]?this.hooks[t][e]:{series:[],parallel:[]}},t.hasHooks=function(e,t){if(!this.hooks[t]||!this.hooks[t][e])return!1;var r=this.getHooks(e,t);return!!r&&(r.series.length>0||r.parallel.length>0)},t._runHooks=function(e,t,r,n){var o=this.getHooks(e,t);return o?o.series.map(e=>()=>e(r,n)).reduce((e,t)=>e.then(t),Promise.resolve(void 0)).then(()=>Promise.all(o.parallel.map(e=>e(r,n)))):eo},t._runHooksSync=function(e,t,r,n){if(this.hasHooks(e,t)){var o=this.getHooks(e,t);o&&o.series.forEach(e=>e(r,n))}},t.promiseWait=function(e){return new Promise(t=>{var r=setTimeout(()=>{this.timeouts.delete(r),t()},e);this.timeouts.add(r)})},t.destroy=async function(){return this.destroyed?er:(await Promise.all(this.onDestroy.map(e=>e())),this.destroyed=!0,Array.from(this.timeouts).forEach(e=>clearTimeout(e)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(e=>e.unsubscribe()),delete this.database.collections[this.name],A("postDestroyRxCollection",this).then(()=>!0))))},t.remove=async function(){await this.destroy(),await Promise.all(this.onRemove.map(e=>e())),await rx(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)},s(e,[{key:"insert$",get:function(){return this.$.pipe(rc(e=>"INSERT"===e.operation))}},{key:"update$",get:function(){return this.$.pipe(rc(e=>"UPDATE"===e.operation))}},{key:"remove$",get:function(){return this.$.pipe(rc(e=>"DELETE"===e.operation))}},{key:"asRxCollection",get:function(){return this}}])}(),rE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._parallels=e||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};function rA(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var r=e._pHM.get(t);e._hPM.delete(r),e._pHM.delete(t)}e._iC.delete(t)}}function rT(e){e._tryIR||0===e._iC.size||(e._tryIR=!0,setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}0!==e._iC.size&&(e._iC.values().next().value._manRes(),setTimeout(function(){return rT(e)},0)),e._tryIR=!1},0)},0))}rE.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,rT(this)},wrapCall:function(e){var t,r=this;this.lock();try{t=e()}catch(e){throw this.unlock(),e}return t.then&&"function"==typeof t.then?t.then(function(e){return r.unlock(),e}).catch(function(e){throw r.unlock(),e}):(this.unlock(),t)},requestIdlePromise:function(e){var t,r=this;e=e||{};var n=new Promise(function(e){return t=e});if(n._manRes=function(){rA(r,n),t()},e.timeout){var o=setTimeout(function(){n._manRes()},e.timeout);n._timeoutObj=o}return this._iC.add(n),rT(this),n},cancelIdlePromise:function(e){rA(this,e)},requestIdleCallback:function(e,t){var r=this._lHN++,n=this.requestIdlePromise(t);return this._hPM.set(r,n),this._pHM.set(n,r),n.then(function(){return e()}),r},cancelIdleCallback:function(e){var t=this._hPM.get(e);this.cancelIdlePromise(t)},clear:function(){var e=this;this._iC.forEach(function(t){return rA(e,t)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};var rC="15.39.0";Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0}),Object.freeze(["prototype","__proto__","constructor"]);let r$="[native code] }",rI=r$.length;var rR=Object.defineProperty,rF=(e,t,r)=>t in e?rR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rB=(e,t,r)=>(rF(e,"symbol"!=typeof t?t+"":t,r),r);class rL{constructor(e,t){rB(this,"words"),rB(this,"sigBytes"),e=this.words=e||[],this.sigBytes=void 0===t?4*e.length:t}toString(e){return(e||rq).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){let r=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=r<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new rL([...this.words])}}let rq={stringify(e){let t=[];for(let r=0;r<e.sigBytes;r++){let n=e.words[r>>>2]>>>24-r%4*8&255;t.push((n>>>4).toString(16),(15&n).toString(16))}return t.join("")}},rV={parse(e){let t=e.length,r=[];for(let n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new rL(r,t)}},rU={parse:e=>rV.parse(unescape(encodeURIComponent(e)))};class rz{constructor(){rB(this,"_data",new rL),rB(this,"_nDataBytes",0),rB(this,"_minBufferSize",0),rB(this,"blockSize",16)}reset(){this._data=new rL,this._nDataBytes=0}_append(e){"string"==typeof e&&(e=rU.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,t){}_process(e){let t;let r=this._data.sigBytes/(4*this.blockSize),n=(r=e?Math.ceil(r):Math.max((0|r)-this._minBufferSize,0))*this.blockSize,o=Math.min(4*n,this._data.sigBytes);if(n){for(let e=0;e<n;e+=this.blockSize)this._doProcessBlock(this._data.words,e);t=this._data.words.splice(0,n),this._data.sigBytes-=o}return new rL(t,o)}}class rK extends rz{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}var rW=Object.defineProperty,rH=(e,t,r)=>t in e?rW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,rY=(e,t,r)=>(rH(e,"symbol"!=typeof t?t+"":t,r),r);let rQ=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],rG=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],rX=[];class rZ extends rK{constructor(){super(...arguments),rY(this,"_hash",new rL([...rQ]))}reset(){super.reset(),this._hash=new rL([...rQ])}_doProcessBlock(e,t){let r=this._hash.words,n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=r[7];for(let r=0;r<64;r++){if(r<16)rX[r]=0|e[t+r];else{let e=rX[r-15],t=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,n=rX[r-2],o=(n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10;rX[r]=t+rX[r-7]+o+rX[r-16]}let f=s&u^~s&l,p=n&o^n&i^o&i,d=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),h=c+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+f+rG[r]+rX[r],m=d+p;c=l,l=u,u=s,s=a+h|0,a=i,i=o,o=n,n=h+m|0}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+u|0,r[6]=r[6]+l|0,r[7]=r[7]+c|0}finalize(e){super.finalize(e);let t=8*this._nDataBytes,r=8*this._data.sigBytes;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[(r+64>>>9<<4)+14]=Math.floor(t/4294967296),this._data.words[(r+64>>>9<<4)+15]=t,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}async function rJ(e){var t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.prototype.map.call(new Uint8Array(r),e=>("00"+e.toString(16)).slice(-2)).join("")}var r0="undefined"!=typeof crypto&&void 0!==crypto.subtle&&"function"==typeof crypto.subtle.digest?rJ:function(e){return Promise.resolve(new rZ().finalize(e).toString())};class r1{ttl;map=new Map;_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,r2()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,function(e){let t=r2()-e.ttl,r=e.map[Symbol.iterator]();for(;;){let n=r.next().value;if(!n)return;let o=n[0];if(!(n[1]<t))return;e.map.delete(o)}}(this)},0))}clear(){this.map.clear()}}function r2(){return Date.now()}var r3=new Set,r5=0,r9=function(){function e(e,t,r,n,o,i,a=!1,s={},u,l,c,f,p){this.idleQueue=new rE,this.rxdbVersion=rC,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new e8,this.observable$=this.eventBulks$.pipe((0,J.zg)(e=>e.events)),this.storageToken=er,this.storageTokenDocument=er,this.emittedEventBulkIds=new r1(6e4),this.name=e,this.token=t,this.storage=r,this.instanceCreationOptions=n,this.password=o,this.multiInstance=i,this.eventReduce=a,this.options=s,this.internalStore=u,this.hashFunction=l,this.cleanupPolicy=c,this.allowSlowCount=f,this.reactivity=p,r5++,"pseudoInstance"!==this.name&&(this.internalStore=eO(this.asRxDatabase,u,rd),this.storageTokenDocument=rv(this.asRxDatabase).catch(e=>this.startupErrors.push(e)),this.storageToken=this.storageTokenDocument.then(e=>e.data.token).catch(e=>this.startupErrors.push(e)))}var t=e.prototype;return t.getReactivityFactory=function(){if(!this.reactivity)throw S("DB14",{database:this.name});return this.reactivity},t.$emit=function(e){this.emittedEventBulkIds.has(e.id)||(this.emittedEventBulkIds.add(e.id),this.eventBulks$.next(e))},t.removeCollectionDoc=async function(e,t){var r=await eh(this.internalStore,rh(rg(e,t),rf));if(!r)throw S("SNH",{name:e,schema:t});var n=ev(r);n._deleted=!0,await this.internalStore.bulkWrite([{document:n,previous:r}],"rx-database-remove-collection")},t.addCollections=async function(e){var t={},r={},n=[],o={};await Promise.all(Object.entries(e).map(async([e,i])=>{var a=i.schema;t[e]=a;var s=function(e,t,r=!0){r&&E("preCreateRxSchema",e);var n=Q(e);n=c(n,!0),O.deepFreezeWhenDevMode(n);var o=new Z(n,t);return E("createRxSchema",o),o}(a,this.hashFunction);if(r[e]=s,this.collections[e])throw S("DB3",{name:e});var u=rg(e,a),f={id:rh(u,rf),key:u,context:rf,data:{name:e,schemaHash:await s.hash,schema:s.jsonSchema,version:s.version,connectedStorages:[]},_deleted:!1,_meta:K(),_rev:"",_attachments:{}};n.push({document:f});var p=Object.assign({},i,{name:e,schema:s,database:this}),d=l(i);d.database=this,d.name=e,E("preCreateRxCollection",d),p.conflictHandler=d.conflictHandler,o[e]=p}));var i=await this.internalStore.bulkWrite(n,"rx-database-add-collection");await r8(this),await Promise.all(i.error.map(async e=>{if(409!==e.status)throw S("DB12",{database:this.name,writeError:e});var n=ee(e.documentInDb),o=n.data.name,i=r[o];if(n.data.schemaHash!==await i.hash)throw S("DB6",{database:this.name,collection:o,previousSchemaHash:n.data.schemaHash,schemaHash:await i.hash,previousSchema:n.data.schema,schema:ee(t[o])})}));var a={};return await Promise.all(Object.keys(e).map(async e=>{var t=o[e],r=await function({database:e,name:t,schema:r,instanceCreationOptions:n={},migrationStrategies:o={},autoMigrate:i=!0,statics:a={},methods:s={},attachments:u={},options:l={},localDocuments:c=!1,cacheReplacementPolicy:f=t9,conflictHandler:p=rS}){var d={databaseInstanceToken:e.token,databaseName:e.name,collectionName:t,schema:r.jsonSchema,options:n,multiInstance:e.multiInstance,password:e.password,devMode:O.isDevMode()};return E("preCreateRxStorageInstance",d),rw(e,d).then(d=>{var h=new rN(e,t,r,d,n,o,s,u,l,f,a,p);return h.prepare().then(()=>{Object.entries(a).forEach(([e,t])=>{Object.defineProperty(h,e,{get:()=>t.bind(h)})});var e=eo;return i&&0!==h.schema.version&&(e=h.migratePromise()),e}).then(()=>(E("createRxCollection",{collection:h,creator:{name:t,schema:r,storageInstance:d,instanceCreationOptions:n,migrationStrategies:o,methods:s,attachments:u,options:l,cacheReplacementPolicy:f,localDocuments:c,statics:a}}),h)).catch(e=>d.close().then(()=>Promise.reject(e)))})}(t);a[e]=r,this.collections[e]=r,this[e]||Object.defineProperty(this,e,{get:()=>this.collections[e]})})),a},t.lockedRun=function(e){return this.idleQueue.wrapCall(e)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(e){throw es("json-dump")},t.addState=function(e){throw es("state")},t.importJSON=function(e){throw es("json-dump")},t.backup=function(e){throw es("backup")},t.leaderElector=function(){throw es("leader-election")},t.isLeader=function(){throw es("leader-election")},t.waitForLeadership=function(){throw es("leader-election")},t.migrationStates=function(){throw es("migration-schema")},t.destroy=async function(){return this.destroyed?er:(this.destroyed=!0,await A("preDestroyRxDatabase",this),this.eventBulks$.complete(),r5--,this._subs.map(e=>e.unsubscribe()),"pseudoInstance"===this.name)?er:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(e=>e()))).then(()=>Promise.all(Object.keys(this.collections).map(e=>this.collections[e]).map(e=>e.destroy()))).then(()=>this.internalStore.close()).then(()=>r3.delete(this.storage.name+"|"+this.name)).then(()=>!0)},t.remove=function(){return this.destroy().then(()=>r4(this.name,this.storage,this.password))},s(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();async function r6(e,t,r,n,o,i){return await t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:"_rxdb_internal",schema:rd,options:n,multiInstance:o,password:i,devMode:O.isDevMode()})}async function r4(e,t,r){var n=$(10),o=await r6(n,t,e,{},!1,r),i=await rm(o),a=new Set;i.forEach(e=>a.add(e.data.name));var s=Array.from(a);return await Promise.all(s.map(i=>rx(t,o,n,e,i,r))),await A("postRemoveRxDatabase",{databaseName:e,storage:t}),await o.remove(),s}async function r8(e){if(await e.storageToken,e.startupErrors[0])throw e.startupErrors[0]}var r7={RxSchema:Z.prototype,RxDocument:e_,RxQuery:rn.prototype,RxCollection:rN.prototype,RxDatabase:r9.prototype},ne=new Set,nt=new Set;function nr(e){if(E("preAddRxPlugin",{plugin:e,plugins:ne}),!ne.has(e)){if(nt.has(e.name))throw S("PL3",{name:e.name,plugin:e});if(ne.add(e),nt.add(e.name),!e.rxdb)throw D("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach(([e,t])=>t(r7[e])),e.overwritable&&Object.assign(O,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(([e,t])=>{t.after&&N[e].push(t.after),t.before&&N[e].unshift(t.before)})}}var nn=r(8046);let no=Symbol.for("Dexie"),ni=globalThis[no]||(globalThis[no]=nn);if(nn.semVer!==ni.semVer)throw Error(`Two different versions of Dexie loaded in the same app: ${nn.semVer} and ${ni.semVer}`);let{liveQuery:na,mergeRanges:ns,rangesOverlap:nu,RangeSet:nl,cmp:nc,Entity:nf,PropModSymbol:np,PropModification:nd,replacePrefix:nh,add:nm,remove:ny}=ni;var nb="docs",nv="attachments",ng="dexie",nO=new Map,nw=new Map;async function nx(e){var t=await e,r=nw.get(e)-1;0===r?(t.dexieDb.close(),nw.delete(e)):nw.set(e,r)}function nj(e){var t=e.split(".");return t.length>1?t.map(e=>nj(e)).join("."):e.startsWith("|")?"__"+e.substring(1):e}function n_(e,t){return t&&(t=function e(t){if(!t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return t;if(Array.isArray(t))return t.map(t=>e(t));if("object"==typeof t){var r={};return Object.entries(t).forEach(([n,o])=>{("object"==typeof o||Array.isArray(t))&&(o=e(o)),r[function e(t){var r=t.split(".");return r.length>1?r.map(t=>e(t)).join("."):t.startsWith("__")?"|"+t.substring(2):t}(n)]=o}),r}}(t=l(t)),e.forEach(e=>{var r=U(t,e);z(t,e,"1"===r)})),t}async function nP(e,t){var r=await e;return(await r.dexieTable.bulkGet(t)).map(e=>n_(r.booleanIndexes,e))}var nS={};function nD(e){return e===tF?-1/0:e}function nk(e,t,r){return e.includes(t)?r===tR||!0===r?"1":"0":r}function nM(e,t,r){if(!r){if("undefined"==typeof window)throw Error("IDBKeyRange missing");r=window.IDBKeyRange}var n=t.startKeys.map((r,n)=>nk(e,t.index[n],r)).map(nD),o=t.endKeys.map((r,n)=>nk(e,t.index[n],r)).map(nD);return r.bound(n,o,!t.inclusiveStart,!t.inclusiveEnd)}async function nN(e,t){var r=await e.internals,n=t.query,o=n.skip?n.skip:0,i=o+(n.limit?n.limit:1/0),a=t.queryPlan,s=!1;a.selectorSatisfiedByIndex||(s=t0(e.schema,t.query));var u=nM(r.booleanIndexes,a,r.dexieDb._options.IDBKeyRange),l=a.index,c=[];if(await r.dexieDb.transaction("r",r.dexieTable,async e=>{var t,n=e.idbtrans.objectStore(nb);t="["+l.map(e=>nj(e)).join("+")+"]";var o=n.index(t).openCursor(u);await new Promise(e=>{o.onsuccess=function(t){var n=t.target.result;if(n){var o=n_(r.booleanIndexes,n.value);(!s||s(o))&&c.push(o),a.sortSatisfiedByIndex&&c.length===i?e():n.continue()}else e()}})}),!a.sortSatisfiedByIndex){var f=tJ(e.schema,t.query);c=c.sort(f)}return{documents:c=c.slice(o,i)}}async function nE(e,t){var r=await e.internals,n=t.queryPlan,o=n.index,i=nM(r.booleanIndexes,n,r.dexieDb._options.IDBKeyRange),a=-1;return await r.dexieDb.transaction("r",r.dexieTable,async e=>{var t,r=e.idbtrans.objectStore(nb);t="["+o.map(e=>nj(e)).join("+")+"]";var n=r.index(t).count(i);a=await new Promise((e,t)=>{n.onsuccess=function(){e(n.result)},n.onerror=e=>t(e)})}),a}Promise.resolve(!1),Promise.resolve(!0);var nA=Promise.resolve();function nT(e,t){return e||(e=0),new Promise(function(r){return setTimeout(function(){return r(t)},e)})}function nC(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function n$(){return Math.random().toString(36).substring(2)}var nI=0;function nR(){var e=1e3*Date.now();return e<=nI&&(e=nI+1),nI=e,e}function nF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var nB="messages",nL={durability:"relaxed"};function nq(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function nV(e){e.commit&&e.commit()}function nU(e){return e.closed||!e.messagesCallback?nA:(function(e,t){var r=e.transaction(nB,"readonly",nL),n=r.objectStore(nB),o=[],i=IDBKeyRange.bound(t+1,1/0);if(n.getAll){var a=n.getAll(i);return new Promise(function(e,t){a.onerror=function(e){return t(e)},a.onsuccess=function(t){e(t.target.result)}})}return new Promise(function(e,a){var s=function(){try{return i=IDBKeyRange.bound(t+1,1/0),n.openCursor(i)}catch(e){return n.openCursor()}}();s.onerror=function(e){return a(e)},s.onsuccess=function(n){var i=n.target.result;i?i.value.id<t+1?i.continue(t+1):(o.push(i.value),i.continue()):(nV(r),e(o))}})})(e.db,e.lastCursorId).then(function(t){return t.filter(function(e){return!!e}).map(function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t}).filter(function(t){return!(t.uuid===e.uuid||e.eMIs.has(t.id))&&!(t.data.time<e.messagesCallbackTime)}).sort(function(e,t){return e.time-t.time}).forEach(function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))}),nA})}function nz(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function nK(e){return"pubkey.broadcastChannel-"+e}function nW(){var e=nz();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(e){return!1}return!0}var nH=new Set,nY={create:function(e){var t={time:nR(),name:e,messagesCallback:null};return nH.add(t),t},close:function(e){nH.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(r){return setTimeout(function(){Array.from(nH).forEach(function(r){r.name===e.name&&r!==e&&r.messagesCallback&&r.time<t.time&&r.messagesCallback(t)}),r()},5)})},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:nR},nQ=r(39805),nG=r(67643);let nX=require("util"),nZ=require("fs"),nJ=require("crypto"),n0=require("os"),n1=require("events"),n2=require("net");var n3=r(55315),n5=r(5423),n9="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)?function(e){process.on("exit",function(){return e()}),process.on("beforeExit",function(){return e().then(function(){return process.exit()})}),process.on("SIGINT",function(){return e().then(function(){return process.exit()})}),process.on("uncaughtException",function(t){return e().then(function(){console.trace(t),process.exit(101)})})}:function(e){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var t=self.close.bind(self);self.close=function(){return e(),t()}}else{if("function"!=typeof window.addEventListener)return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}},n6=new Set,n4=!1;function n8(){var e=[];return n6.forEach(function(t){e.push(t()),n6.delete(t)}),Promise.all(e)}var n7=n5.default?n5.default:n5;function oe(e){return"win32"!==process.platform||e.startsWith("\\\\.\\pipe\\")?e:"\\\\.\\pipe\\"+(e=(e=e.replace(/^\//,"")).replace(/\//g,"-"))}var ot=nX.promisify(nZ.mkdir),or=nX.promisify(nZ.writeFile),on=nX.promisify(nZ.readFile),oo=nX.promisify(nZ.unlink),oi=nX.promisify(nZ.readdir),oa=nX.promisify(nZ.chmod),os=nX.promisify(nZ.rm),ou=function(){var e=nQ(nG.mark(function e(t){return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,os(t,{recursive:!0});case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!("ENOENT"!==e.t0.code)){e.next=10;break}throw e.t0;case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),ol={},oc=n3.join(n0.tmpdir(),"pubkey.bc"),of=new Map;function op(e){if(!of.has(e)){var t="A"+nJ.createHash("sha256").update(e).digest("hex").substring(0,20),r=n3.join(oc,t),n=n3.join(r,"rdrs"),o=n3.join(r,"msgs"),i={channelBase:r,readers:n,messages:o};return of.set(e,i),i}return of.get(e)}var od=null;function oh(){return om.apply(this,arguments)}function om(){return(om=nQ(nG.mark(function e(){return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return od||(od=ot(oc).catch(function(){return null})),e.abrupt("return",od);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oy(e,t){return ob.apply(this,arguments)}function ob(){return(ob=nQ(nG.mark(function e(t,r){return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=r||op(t),e.next=3,oh();case 3:return e.next=5,ot(r.channelBase).catch(function(){return null});case 5:return e.next=7,Promise.all([ot(r.readers).catch(function(){return null}),ot(r.messages).catch(function(){return null})]);case 7:return e.next=10,Promise.all([oa(r.channelBase,"777"),oa(r.readers,"777"),oa(r.messages,"777")]).catch(function(){return null});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ov(){return og.apply(this,arguments)}function og(){return(og=nQ(nG.mark(function e(){return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!oc||""===oc||"/"===oc)){e.next=2;break}throw Error("BroadcastChannel.clearNodeFolder(): path is wrong");case 2:return od=null,e.next=5,ou(oc);case 5:return od=null,e.abrupt("return",!0);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oO(e,t,r){return r=r||op(e),oe(n3.join(r.readers,t+".s"))}function ow(e,t,r){return r=r||op(e),n3.join(r.readers,t+".json")}function ox(e,t,r){var n=ow(e,t,r);return or(n,JSON.stringify({time:o2()})).then(function(){return n})}function oj(){return o_.apply(this,arguments)}function o_(){return(o_=nQ(nG.mark(function e(){var t;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oh();case 2:return e.next=4,oi(oc);case 4:return t=e.sent,e.abrupt("return",t.length);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oP(e){return oS.apply(this,arguments)}function oS(){return(oS=nQ(nG.mark(function e(t){var r,n;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oj();case 2:if(!(e.sent<30)){e.next=5;break}return e.abrupt("return",t);case 5:return r={},Object.entries(t).forEach(function(e){var t=e[0],n=e[1];return r[t]=n}),n="BroadcastChannel.create(): error: This might happen if you have created to many channels, like when you use BroadcastChannel in unit-tests.Try using BroadcastChannel.clearNodeFolder() to clear the tmp-folder before each test.See https://github.com/pubkey/broadcast-channel#clear-tmp-folder",e.abrupt("return",Error(n+": "+JSON.stringify(r,null,2)));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oD(e,t,r){return ok.apply(this,arguments)}function ok(){return(ok=nQ(nG.mark(function e(t,r,n){var o,i,a;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=oO(t,r,n),i=new n1.EventEmitter,a=n2.createServer(function(e){e.on("end",function(){}),e.on("data",function(e){i.emit("data",e.toString())})}),e.next=5,new Promise(function(e,t){a.on("error",function(){var e=nQ(nG.mark(function e(r){return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oP(r);case 2:t(e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),a.listen(o,function(){var r=nQ(nG.mark(function r(n,o){return nG.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n){r.next=7;break}return r.next=3,oP(n);case 3:t(r.sent),r.next=8;break;case 7:e(o);case 8:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}())});case 5:return e.abrupt("return",{path:o,emitter:i,server:a});case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oM(e,t){return oN.apply(this,arguments)}function oN(){return(oN=nQ(nG.mark(function e(t,r){var n,o;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=oO(t,r),o=new n2.Socket,e.abrupt("return",new Promise(function(e,t){o.connect(n,function(){return e(o)}),o.on("error",function(e){return t(e)})}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oE(e,t,r,n){var o=r.time;o||(o=o2()),n=n||op(e);var i=n$(),a=o+"_"+t+"_"+i+".json",s=n3.join(n.messages,a);return or(s,JSON.stringify({uuid:t,data:r})).then(function(){return{time:o,uuid:t,token:i,path:s}})}function oA(e,t){return oT.apply(this,arguments)}function oT(){return(oT=nQ(nG.mark(function e(t,r){var n,o;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=r||op(t)).readers,e.next=4,oi(n);case 4:return o=e.sent,e.abrupt("return",o.map(function(e){return e.split(".")}).filter(function(e){return"json"===e[1]}).map(function(e){return e[0]}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oC(e,t,r,n){return o$.apply(this,arguments)}function o$(){return(o$=nQ(nG.mark(function e(t,r,n,o){var i;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r+"_"+o+"_"+n+".json",e.abrupt("return",n3.join(op(t).messages,i));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oI(e,t){return oR.apply(this,arguments)}function oR(){return(oR=nQ(nG.mark(function e(t,r){var n,o;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=r||op(t)).messages,e.next=4,oi(n);case 4:return o=e.sent,e.abrupt("return",o.map(function(e){var t=e.split(".")[0].split("_");return{path:n3.join(n,e),time:parseInt(t[0]),senderUuid:t[1],token:t[2]}}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oF(e,t,r){return r=r||op(e),{path:n3.join(r.messages,t.t+"_"+t.u+"_"+t.to+".json"),time:t.t,senderUuid:t.u,token:t.to}}function oB(e){return on(e.path,"utf8").then(function(e){return JSON.parse(e)})}function oL(e,t){return oq.apply(this,arguments)}function oq(){return(oq=nQ(nG.mark(function e(t,r){var n;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o2()-1e3*r,e.next=3,Promise.all(t.filter(function(e){return e.time<n}).map(function(e){return oo(e.path).catch(function(){return null})}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var oV="node";function oU(e){return oz.apply(this,arguments)}function oz(){return(oz=nQ(nG.mark(function e(t){var r,n,o,i,a,s,u,l,c,f=arguments;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=nF(r=f.length>1&&void 0!==f[1]?f[1]:{}),n=o2(),o=op(t),i=oy(t,o),a=n$(),s={time:n,channelName:t,options:r,uuid:a,paths:o,emittedMessagesIds:new r1(2*r.node.ttl),writeFileQueue:new n7({concurrency:r.node.maxParallelWrites}),messagesCallbackTime:null,messagesCallback:null,writeBlockPromise:nA,otherReaderClients:{},removeUnload:function(e){if(n4||(n4=!0,n9(n8)),"function"!=typeof e)throw Error("Listener is no function");return n6.add(e),{remove:function(){return n6.delete(e)},run:function(){return n6.delete(e),e()}}}(function(){return oJ(s)}),closed:!1},ol[t]||(ol[t]=[]),ol[t].push(s),e.next=11,i;case 11:return e.next=13,Promise.all([oD(t,a,o),ox(t,a,o),oY(s)]);case 13:return l=(u=e.sent)[0],c=u[1],s.socketEE=l,s.infoFilePath=c,l.emitter.on("data",function(e){e.split("|").filter(function(e){return""!==e}).forEach(function(e){try{var t=JSON.parse(e);oW(s,t)}catch(t){throw Error("could not parse data: "+e)}})}),e.abrupt("return",s);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oK(e,t){return!(e.senderUuid===t.uuid||t.emittedMessagesIds.has(e.token))&&!!t.messagesCallback&&!(e.time<t.messagesCallbackTime)&&!(e.time<t.time)&&(t.emittedMessagesIds.add(e.token),!0)}function oW(e,t){return oH.apply(this,arguments)}function oH(){return(oH=nQ(nG.mark(function e(t,r){var n,o;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.messagesCallback){e.next=2;break}return e.abrupt("return");case 2:if(r){e.next=8;break}return e.next=5,oI(t.channelName,t.paths);case 5:n=e.sent,e.next=9;break;case 8:n=[oF(t.channelName,r,t.paths)];case 9:if(!(!(o=n.filter(function(e){return oK(e,t)}).sort(function(e,t){return e.time-t.time})).length||!t.messagesCallback)){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,Promise.all(o.map(function(e){return oB(e).then(function(t){return e.content=t})}));case 14:o.forEach(function(e){t.emittedMessagesIds.add(e.token),t.messagesCallback&&t.messagesCallback(e.content.data)});case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oY(e){return oA(e.channelName,e.paths).then(function(t){var r,n;return Object.keys(e.otherReaderClients).filter(function(e){return!t.includes(e)}).forEach((r=nQ(nG.mark(function t(r){return nG.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.otherReaderClients[r].destroy();case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:delete e.otherReaderClients[r];case 8:case"end":return t.stop()}},t,null,[[0,5]])})),function(e){return r.apply(this,arguments)})),Promise.all(t.filter(function(t){return t!==e.uuid}).filter(function(t){return!e.otherReaderClients[t]}).map((n=nQ(nG.mark(function t(r){var n;return nG.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.closed){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,oM(e.channelName,r);case 6:n=t.sent,e.otherReaderClients[r]=n,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(3);case 12:t.next=16;break;case 14:t.prev=14,t.t1=t.catch(0);case 16:case"end":return t.stop()}},t,null,[[0,14],[3,10]])})),function(e){return n.apply(this,arguments)})))})}function oQ(e,t){return oG.apply(this,arguments)}function oG(){return(oG=nQ(nG.mark(function e(t,r){var n;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.writeFileQueue.add(function(){return oE(t.channelName,t.uuid,r,t.paths)}),t.writeBlockPromise=t.writeBlockPromise.then(nQ(nG.mark(function e(){var o,i,a;return nG.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){return setTimeout(e,0)});case 2:return e.next=4,Promise.all([n,oY(t)]);case 4:return oX(t,o=e.sent[0],r),i='{"t":'+o.time+',"u":"'+o.uuid+'","to":"'+o.token+'"}|',a=Promise.all(Object.values(t.otherReaderClients).filter(function(e){return e.writable}).map(function(e){return new Promise(function(t){e.write(i,t)})})),0===nC(0,20)&&oI(t.channelName,t.paths).then(function(e){return oL(e,t.options.node.ttl)}),e.abrupt("return",a);case 11:case"end":return e.stop()}},e)}))),e.abrupt("return",t.writeBlockPromise);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oX(e,t,r){if(e.options.node.useFastPath){var n=ol[e.channelName].filter(function(t){return t!==e}),o={time:t.time,senderUuid:t.uuid,token:t.token};n.filter(function(e){return oK(o,e)}).forEach(function(e){e.messagesCallback(r)})}}function oZ(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o2();e.messagesCallbackTime=r,e.messagesCallback=t,oW(e)}function oJ(e){return e.closed?nA:(e.closed=!0,e.emittedMessagesIds.clear(),ol[e.channelName]=ol[e.channelName].filter(function(t){return t!==e}),e.removeUnload&&e.removeUnload.remove(),new Promise(function(t){if(e.socketEE&&e.socketEE.emitter.removeAllListeners(),Object.values(e.otherReaderClients).forEach(function(e){return e.destroy()}),e.infoFilePath)try{nZ.unlinkSync(e.infoFilePath)}catch(e){}setTimeout(function(){e.socketEE.server.close(),t()},200)}))}function o0(){return"function"==typeof nZ.mkdir}function o1(){return 200}function o2(){return parseInt(Number(process.hrtime.bigint())/1e3)}var o3=[{create:function(e){var t={time:nR(),messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),nA}catch(e){return Promise.reject(e)}},canBeUsed:function(){if("undefined"!=typeof globalThis&&globalThis.Deno&&globalThis.Deno.args)return!0;if("undefined"==typeof window&&"undefined"==typeof self||"function"!=typeof BroadcastChannel)return!1;if(BroadcastChannel._pubkey)throw Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0},type:"native",averageResponseTime:function(){return 150},microSeconds:nR},{create:function(e,t){var r;return t=nF(t),((r=nq().open("pubkey.broadcast-channel-0-"+e)).onupgradeneeded=function(e){e.target.result.createObjectStore(nB,{keyPath:"id",autoIncrement:!0})},new Promise(function(e,t){r.onerror=function(e){return t(e)},r.onsuccess=function(){e(r.result)}})).then(function(r){var n={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:n$(),eMIs:new r1(2*t.idb.ttl),writeBlockPromise:nA,messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){n.closed=!0,t.idb.onclose&&t.idb.onclose()},function e(t){t.closed||nU(t).then(function(){return nT(t.options.idb.fallbackInterval)}).then(function(){return e(t)})}(n),n})},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t,nU(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){var r,n,o;return r=e.db,n={uuid:e.uuid,time:Date.now(),data:t},o=r.transaction([nB],"readwrite",nL),new Promise(function(e,t){o.oncomplete=function(){return e()},o.onerror=function(e){return t(e)},o.objectStore(nB).add(n),nV(o)})}).then(function(){if(0===nC(0,10)){var t,r,n,o,i,a;(t=e.db,r=e.options.idb.ttl,n=Date.now()-r,i=(o=t.transaction(nB,"readonly",nL)).objectStore(nB),a=[],new Promise(function(e){i.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var i=r.value;i.time<n?(a.push(i),r.continue()):(nV(o),e(a))}else e(a)}})).then(function(t){return function(e,t){if(e.closed)return Promise.resolve([]);var r=e.db.transaction(nB,"readwrite",nL).objectStore(nB);return Promise.all(t.map(function(e){var t=r.delete(e);return new Promise(function(e){t.onsuccess=function(){return e()}})}))}(e,t.map(function(e){return e.id}))})}}),e.writeBlockPromise},canBeUsed:function(){return!!nq()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:nR},{create:function(e,t){if(t=nF(t),!nW())throw Error("BroadcastChannel: localstorage cannot be used");var r,n,o,i=n$(),a=new r1(t.localstorage.removeTimeout),s={channelName:e,uuid:i,eMIs:a};return s.listener=(r=function(e){!(!s.messagesCallback||e.uuid===i||!e.token||a.has(e.token))&&(e.data.time&&e.data.time<s.messagesCallbackTime||(a.add(e.token),s.messagesCallback(e.data)))},n=nK(e),o=function(e){e.key===n&&r(JSON.parse(e.newValue))},window.addEventListener("storage",o),o),s},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(r){nT().then(function(){var n=nK(e.channelName),o=JSON.stringify({token:n$(),time:Date.now(),data:t,uuid:e.uuid});nz().setItem(n,o);var i=document.createEvent("Event");i.initEvent("storage",!0,!0),i.key=n,i.newValue=o,window.dispatchEvent(i),r()})})},canBeUsed:nW,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:nR}],o5=new Set,o9=0,o6=function(e,t){var r,n;this.id=o9++,o5.add(this),this.name=e,o&&(t=o),this.options=nF(t),this.method=function(e){var t=[].concat(e.methods,o3).filter(Boolean);if(t.push(a),e.type){if("simulate"===e.type)return nY;var r=t.find(function(t){return t.type===e.type});if(r)return r;throw Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter(function(e){return"idb"!==e.type}));var n=t.find(function(e){return e.canBeUsed()});if(n)return n;throw Error("No usable method found in "+JSON.stringify(o3.map(function(e){return e.type})))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,r=this,(n=r.method.create(r.name,r.options))&&"function"==typeof n.then?(r._prepP=n,n.then(function(e){r._state=e})):r._state=n};function o4(e,t,r){var n={time:e.method.microSeconds(),type:t,data:r};return(e._prepP?e._prepP:nA).then(function(){var t=e.method.postMessage(e._state,n);return e._uMP.add(t),t.catch().then(function(){return e._uMP.delete(t)}),t})}function o8(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function o7(e,t,r){e._addEL[t].push(r),function(e){if(!e._iL&&o8(e)){var t=function(t){e._addEL[t.type].forEach(function(e){t.time>=e.time&&e.fn(t.data)})},r=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,r)}):(e._iL=!0,e.method.onMessage(e._state,t,r))}}(e)}function ie(e,t,r){e._addEL[t]=e._addEL[t].filter(function(e){return e!==r}),function(e){if(e._iL&&!o8(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}o6._pubkey=!0,o6.prototype={postMessage:function(e){if(this.closed)throw Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return o4(this,"message",e)},postInternal:function(e){return o4(this,"internal",e)},set onmessage(fn){var it={time:this.method.microSeconds(),fn:fn};ie(this,"message",this._onML),fn&&"function"==typeof fn?(this._onML=it,o7(this,"message",it)):this._onML=null},addEventListener:function(e,t){o7(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){var r=this._addEL[e].find(function(e){return e.fn===t});ie(this,e,r)},close:function(){var e=this;if(!this.closed){o5.delete(this),this.closed=!0;var t=this._prepP?this._prepP:nA;return this._onML=null,this._addEL.message=[],t.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(e){return e()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};var ir=new Map;function io(e,t){var r=ir.get(e);if(r&&(r.refs.delete(t),0===r.refs.size))return ir.delete(e),r.bc.close()}var ii=ef(),ia=!1,is=function(){function e(e,t,r,n,o,i,a,s){this.changes$=new e8,this.instanceId=ii++,this.storage=e,this.databaseName=t,this.collectionName=r,this.schema=n,this.internals=o,this.options=i,this.settings=a,this.devMode=s,this.primaryPath=H(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=async function(e,t){il(this),ia||nS.premium&&"string"==typeof nS.premium&&await r0(nS.premium)==="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93"||console.warn("-------------- RxDB Open Core RxStorage -------------------------------\nYou are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie \nWhile this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.\nFor professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability.\n https://rxdb.info/premium?console=dexie \nIf you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.\n---------------------------------------------------------------------"),ia=!0,e.forEach(e=>{if(!e.document._rev||e.previous&&!e.previous._rev)throw S("SNH",{args:{row:e}})});var r,n=await this.internals,o={error:[]};this.devMode&&(e=e.map(e=>{var t=ev(e.document);return{previous:e.previous,document:t}}));var i=e.map(e=>e.document[this.primaryPath]);if(await n.dexieDb.transaction("rw",n.dexieTable,n.dexieAttachmentsTable,async()=>{var a=new Map;(await nP(this.internals,i)).forEach(e=>(e&&a.set(e[this.primaryPath],e),e)),r=function(e,t,r,n,o,i,a){for(var s,u=!!e.schema.attachments,l=[],c=[],f=[],p={id:$(10),events:[],checkpoint:null,context:o,startTime:ef(),endTime:0},d=p.events,h=[],m=[],y=[],b=r.size>0,v=n.length,g=0;g<v;g++)if(function(){var e,o=n[g],i=o.document,a=o.previous,p=i[t],v=i._deleted,O=a&&a._deleted,w=void 0;if(b&&(w=r.get(p)),w){var x=w._rev;if(!a||a&&x!==a._rev){var j={isError:!0,status:409,documentId:p,writeRow:o,documentInDb:w};return f.push(j),1}var _=u?ey(o):o;u&&(v?a&&Object.keys(a._attachments).forEach(e=>{m.push({documentId:p,attachmentId:e,digest:ee(a)._attachments[e].digest})}):(Object.entries(i._attachments).find(([t,r])=>((a?a._attachments[t]:void 0)||r.data||(e={documentId:p,documentInDb:w,isError:!0,status:510,writeRow:o,attachmentId:t}),!0)),e||Object.entries(i._attachments).forEach(([e,t])=>{var r=a?a._attachments[e]:void 0;if(r){var n=_.document._attachments[e].digest;t.data&&r.digest!==n&&y.push({documentId:p,attachmentId:e,attachmentData:t,digest:t.digest})}else h.push({documentId:p,attachmentId:e,attachmentData:t,digest:t.digest})}))),e?f.push(e):(u?c.push(ey(_)):c.push(_),s=_);var P=null,D=null,k=null;if(O&&!v)k="INSERT",P=u?eb(i):i;else if(!a||O||v){if(v)k="DELETE",P=ee(i),D=a;else throw S("SNH",{args:{writeRow:o}})}else k="UPDATE",P=u?eb(i):i,D=a;var M={documentId:p,documentData:P,previousDocumentData:D,operation:k};d.push(M)}else if(u&&Object.entries(i._attachments).forEach(([t,r])=>{r.data?h.push({documentId:p,attachmentId:t,attachmentData:r,digest:r.digest}):(e={documentId:p,isError:!0,status:510,writeRow:o,attachmentId:t},f.push(e))}),e||(u?l.push(ey(o)):l.push(o),s=o),!v){var N={documentId:p,operation:"INSERT",documentData:u?eb(i):i,previousDocumentData:u&&a?eb(a):a};d.push(N)}}())continue;return{bulkInsertDocs:l,bulkUpdateDocs:c,newestRow:s,errors:f,eventBulk:p,attachmentsAdd:h,attachmentsRemove:m,attachmentsUpdate:y}}(this,this.primaryPath,a,e,t),o.error=r.errors;var s=[];r.bulkInsertDocs.forEach(e=>{s.push(e.document)}),r.bulkUpdateDocs.forEach(e=>{s.push(e.document)}),(s=s.map(e=>(function(e,t){if(!t)return t;var r=l(t);return r=function e(t){if(!t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return t;if(Array.isArray(t))return t.map(t=>e(t));if("object"==typeof t){var r={};return Object.entries(t).forEach(([t,n])=>{"object"==typeof n&&(n=e(n)),r[nj(t)]=n}),r}}(r),e.forEach(e=>{var n=U(t,e),o=nj(e);z(r,o,n?"1":"0")}),r})(n.booleanIndexes,e))).length>0&&await n.dexieTable.bulkPut(s);var u=[];r.attachmentsAdd.forEach(e=>{u.push({id:e.documentId+"||"+e.attachmentId,data:e.attachmentData.data})}),r.attachmentsUpdate.forEach(e=>{u.push({id:e.documentId+"||"+e.attachmentId,data:e.attachmentData.data})}),await n.dexieAttachmentsTable.bulkPut(u),await n.dexieAttachmentsTable.bulkDelete(r.attachmentsRemove.map(e=>e.documentId+"||"+e.attachmentId))}),(r=ee(r)).eventBulk.events.length>0){var a=ee(r.newestRow).document;r.eventBulk.checkpoint={id:a[this.primaryPath],lwt:a._meta.lwt},r.eventBulk.endTime=ef(),this.changes$.next(r.eventBulk)}return o},t.findDocumentsById=async function(e,t){il(this);var r=await this.internals,n=[];return await r.dexieDb.transaction("r",r.dexieTable,async()=>{(await nP(this.internals,e)).forEach(e=>{e&&(!e._deleted||t)&&n.push(e)})}),n},t.query=function(e){return il(this),nN(this,e)},t.count=async function(e){return e.queryPlan.selectorSatisfiedByIndex?{count:await nE(this,e),mode:"fast"}:{count:(await nN(this,e)).documents.length,mode:"slow"}},t.changeStream=function(){return il(this),this.changes$.asObservable()},t.cleanup=async function(e){il(this);var t=await this.internals;return await t.dexieDb.transaction("rw",t.dexieTable,async()=>{var r=ef()-e,n=await t.dexieTable.where("_meta.lwt").below(r).toArray(),o=[];n.forEach(e=>{"1"===e._deleted&&o.push(e[this.primaryPath])}),await t.dexieTable.bulkDelete(o)}),!0},t.getAttachmentData=async function(e,t,r){il(this);var n=await this.internals,o=e+"||"+t;return await n.dexieDb.transaction("r",n.dexieAttachmentsTable,async()=>{var r=await n.dexieAttachmentsTable.get(o);if(r)return r.data;throw Error("attachment missing documentId: "+e+" attachmentId: "+t)})},t.remove=async function(){il(this);var e=await this.internals;return await e.dexieTable.clear(),this.close()},t.close=function(){return this.closed||(this.closed=(async()=>{this.changes$.complete(),await nx(this.internals)})()),this.closed},t.conflictResultionTasks=function(){return new e8},t.resolveConflictResultionTask=async function(e){},e}();async function iu(e,t,r){var n,o,i,a,s,u=(n=t.databaseName,o=t.collectionName,s=el(nO,a="rxdb-dexie-"+n+"--"+(i=t.schema).version+"--"+o,()=>{var e=(async()=>{var e,t,n,o,s,u=l(r);u.autoOpen=!1;var c=new ni(a,u),f={[nb]:(e=[],t=H(i.primaryKey),e.push([t]),e.push(["_deleted",t]),i.indexes&&i.indexes.forEach(t=>{var r=d(t);e.push(r)}),e.push(["_meta.lwt",t]),e.push(["_meta.lwt"]),(e=e.map(e=>e.map(e=>nj(e)))).map(e=>1===e.length?e[0]:"["+e.join("+")+"]").filter((e,t,r)=>r.indexOf(e)===t).join(", ")),changes:"++sequence, id",[nv]:"id"};return c.version(1).stores(f),await c.open(),{dexieDb:c,dexieTable:c[nb],dexieAttachmentsTable:c[nv],booleanIndexes:(o=new Set,s=[],i.indexes?(i.indexes.forEach(e=>{d(e).forEach(e=>{o.has(e)||(o.add(e),"boolean"===W(i,e).type&&s.push(e))})}),s.push("_deleted"),s.filter(function(e,t,r){return r.indexOf(e)===t})):s)}})();return nO.set(a,s),nw.set(s,0),e})),c=new is(e,t.databaseName,t.collectionName,t.schema,u,t.options,r,t.devMode);return await function(e,t,r,n){if(t.multiInstance){var o,i,a,s=(o=t.databaseInstanceToken,i=r.databaseName,(a=ir.get(o))||(a={bc:new o6(["RxDB:",e,i].join("|")),refs:new Set},ir.set(o,a)),a.refs.add(r),a.bc),u=new e8,l=r=>{r.storageName===e&&r.databaseName===t.databaseName&&r.collectionName===t.collectionName&&r.version===t.schema.version&&u.next(r.eventBulk)};s.addEventListener("message",l);var c=r.changeStream(),f=!1,p=c.subscribe(r=>{f||s.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:r})});r.changeStream=function(){return u.asObservable().pipe((0,J.bT)(c))};var d=r.close.bind(r);r.close=async function(){return f=!0,p.unsubscribe(),s.removeEventListener("message",l),await io(t.databaseInstanceToken,r),d()};var h=r.remove.bind(r);r.remove=async function(){return f=!0,p.unsubscribe(),s.removeEventListener("message",l),await io(t.databaseInstanceToken,r),h()}}}(ng,t,c),Promise.resolve(c)}function il(e){if(e.closed)throw Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var ic=function(){function e(e){this.name=ng,this.rxdbVersion=rC,this.settings=e}return e.prototype.createStorageInstance=function(e){return function(e){var t;if(e.schema.keyCompression)throw S("UT5",{args:{params:e}});if((t=e.schema).encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)throw S("UT6",{args:{params:e}});if(e.schema.attachments&&e.schema.attachments.compression)throw S("UT7",{args:{params:e}})}(e),iu(this,e,this.settings)},e}();r(86981);var ip=["__proto__","constructor","prototype"];function id(e,t){Object.keys(t).forEach(r=>{ip.includes(r)||(void 0===e[r]?e[r]=t[r]:ih(t[r])?id(e[r],t[r]):e[r]=t[r])})}function ih(e){return"[object Object]"===e.toString()}var im=function(){function e(e,t){if(this.options={},this._conditions={},this._fields={},this._path=t,e){var r=this;e.selector&&r.find(e.selector),e.limit&&r.limit(e.limit),e.skip&&r.skip(e.skip),e.sort&&e.sort.forEach(e=>r.sort(e))}}var t=e.prototype;return t.where=function(e,t){if(!arguments.length)return this;var r=typeof arguments[0];if("string"===r)return this._path=arguments[0],2==arguments.length&&(this._conditions[this._path]=arguments[1]),this;if("object"===r&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw D("MQ1",{path:arguments[0]})},t.equals=function(e){this._ensurePath("equals");var t=this._path;return this._conditions[t]=e,this},t.eq=function(e){this._ensurePath("eq");var t=this._path;return this._conditions[t]=e,this},t.or=function(e){var t=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this},t.nor=function(e){var t=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this},t.and=function(e){var t=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),t.push.apply(t,e),this},t.mod=function(e,t){var r,n;return 1==arguments.length?(this._ensurePath("mod"),r=arguments[0],n=this._path):2!=arguments.length||Array.isArray(arguments[1])?(r=3==arguments.length?arguments.slice(1):arguments[1],n=arguments[0]):(this._ensurePath("mod"),r=arguments.slice(),n=this._path),(this._conditions[n]||(this._conditions[n]={})).$mod=r,this},t.exists=function(e,t){var r,n;return 0==arguments.length?(this._ensurePath("exists"),r=this._path,n=!0):1==arguments.length?"boolean"==typeof arguments[0]?(this._ensurePath("exists"),r=this._path,n=arguments[0]):(r=arguments[0],n=!0):2==arguments.length&&(r=arguments[0],n=arguments[1]),(this._conditions[r]||(this._conditions[r]={})).$exists=n,this},t.elemMatch=function(t,r){var n,o,i;if(null===arguments[0])throw D("MQ2");if("function"==typeof arguments[0])this._ensurePath("elemMatch"),o=this._path,n=arguments[0];else if(ih(arguments[0]))this._ensurePath("elemMatch"),o=this._path,i=arguments[0];else if("function"==typeof arguments[1])o=arguments[0],n=arguments[1];else if(arguments[1]&&ih(arguments[1]))o=arguments[0],i=arguments[1];else throw D("MQ2");return n&&(n(i=new e),i=i._conditions),(this._conditions[o]||(this._conditions[o]={})).$elemMatch=i,this},t.sort=function(e){if(!e)return this;var t,r=typeof e;if(Array.isArray(e)){t=e.length;for(var n=0;n<e.length;++n)(function(e,t,r){if(e.sort=e.sort||[],!Array.isArray(e.sort))throw D("MQ8",{opts:e,field:t,value:r});e.sort.push([t,r])})(this.options,e[n][0],e[n][1]);return this}if(1==arguments.length&&"string"===r){t=(e=e.split(/\s+/)).length;for(var o=0;o<t;++o){var i=e[o];if(i){var a="-"===i[0]?-1:1;-1===a&&(i=i.substring(1)),iv(this.options,i,a)}}return this}if(ih(e))return Object.keys(e).forEach(t=>iv(this.options,t,e[t])),this;throw D("MQ3",{args:arguments})},t.merge=function(t){if(!t)return this;if(!ig(t))throw D("MQ4",{source:t});return t instanceof e?(t._conditions&&id(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),id(this._fields,t._fields)),t.options&&(this.options||(this.options={}),id(this.options,t.options)),t._distinct&&(this._distinct=t._distinct)):id(this._conditions,t),this},t.find=function(e){return ig(e)&&this.merge(e),this},t._ensurePath=function(e){if(!this._path)throw S("MQ5",{method:e})},t.toJSON=function(){var e={selector:this._conditions};return this.options.skip&&(e.skip=this.options.skip),this.options.limit&&(e.limit=this.options.limit),this.options.sort&&(e.sort=Object.entries(this.options.sort).map(([e,t])=>({[e]:1===t?"asc":"desc"}))),{query:e,path:this._path}},e}(),iy=["limit","skip","maxScan","batchSize","comment"];iy.forEach(function(e){im.prototype[e]=function(t){return this.options[e]=t,this}});var ib=["gt","gte","lt","lte","ne","in","nin","all","regex","size"];function iv(e,t,r){if(Array.isArray(e.sort))throw D("MQ6",{opts:e,field:t,value:r});if(r&&r.$meta){(e.sort||(e.sort={}))[t]={$meta:r.$meta};return}var n=String(r||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(n))throw Array.isArray(r)&&(r="["+r+"]"),D("MQ7",{field:t,value:r});var o=e.sort||(e.sort={}),i=r.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");o[t]=parseInt(i,10)}function ig(e){return e instanceof im||ih(e)}ib.forEach(function(e){im.prototype[e]=function(){1==arguments.length?(this._ensurePath(e),r=arguments[0],t=this._path):(r=arguments[1],t=arguments[0]);var t,r,n=null===this._conditions[t]||"object"==typeof this._conditions[t]?this._conditions[t]:this._conditions[t]={};if("regex"===e){if(r instanceof RegExp)throw S("QU16",{field:t,query:this._conditions});"string"==typeof r?n["$"+e]=r:(n["$"+e]=r.$regex,r.$options&&(n.$options=r.$options))}else n["$"+e]=r;return this}});var iO="queryBuilderPath";function iw(e,t){e[t]=function(e){if(O.isDevMode()&&"findByIds"===this.op)throw S("QU17",{collection:this.collection.name,query:this.mangoQuery});return function(e,t,r){var n=new im(f(e.mangoQuery),e.other[iO]);n[t](r);var o=n.toJSON();return ri(e.op,o.query,e.collection,{...e.other,[iO]:o.path})}(this,t,e)}}var ix=r(30092);function ij(e,t){if(!i){var r=(0,ix.createUpdater)({cloneMode:"none"});i=(e,t)=>{var n=f(e);return r(n,t),n}}return i(e,t)}function i_(e){return this.incrementalModify(t=>ij(t,e))}function iP(e){var t=this._data,r=ij(t,e);return this._saveData(r,t)}async function iS(e){return t1(this.asRxQuery,t=>t.update(e))}let iD={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},userId:{type:"string"},userEmail:{type:"string"},type:{type:"string"},office:{type:"string"},startDate:{type:"string"},endDate:{type:"string"},hours:{type:"number"},days:{type:"number"},note:{type:"string"},status:{type:"string"},managerEmail:{type:"string"},createdAt:{type:"string"},updatedAt:{type:"string"},approvedAt:{type:"string"},deniedAt:{type:"string"},cancelledAt:{type:"string"}},required:["id","userId","userEmail","type","office","startDate","status","createdAt","updatedAt"],indexes:["userId","userEmail","managerEmail","status","startDate","office"]},ik={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},email:{type:"string"},name:{type:"string"},role:{type:"string"},managerEmail:{type:"string"},office:{type:"string"},createdAt:{type:"string"},updatedAt:{type:"string"},teams:{type:"array",items:{type:"string"}}},required:["id","email","name","role","office","createdAt"],indexes:["email","role","managerEmail","office"]},iM={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},createdAt:{type:"string"},updatedAt:{type:"string"}},required:["id","name","createdAt","updatedAt"],indexes:["name"]};nr({name:"query-builder",rxdb:!0,prototypes:{RxQuery(e){["where","equals","eq","or","nor","and","mod","exists","elemMatch","sort"].forEach(t=>{iw(e,t)}),iy.forEach(t=>{iw(e,t)}),ib.forEach(t=>{iw(e,t)})}}}),nr({name:"update",rxdb:!0,prototypes:{RxDocument:e=>{e.update=iP,e.incrementalUpdate=i_},RxQuery:e=>{e.update=iS}}});let iN=null;async function iE(){if(iN)return iN;let e=function(e={}){return new ic(e)}();iN=await function({storage:e,instanceCreationOptions:t,name:r,password:n,multiInstance:o=!0,eventReduce:i=!0,ignoreDuplicate:a=!1,options:s={},cleanupPolicy:u,allowSlowCount:l=!1,localDocuments:c=!1,hashFunction:f=r0,reactivity:p}){E("preCreateRxDatabase",{storage:e,instanceCreationOptions:t,name:r,password:n,multiInstance:o,eventReduce:i,ignoreDuplicate:a,options:s,localDocuments:c}),a||function(e,t){var r=t.name+"|"+e;if(r3.has(r))throw S("DB8",{name:e,storage:t.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}(r,e),r3.add(e.name+"|"+r);var d=$(10);return r6(d,e,r,t,o,n).catch(t=>{throw r3.delete(e.name+"|"+r),t}).then(h=>{var m=new r9(r,d,e,t,n,o,i,s,h,f,u,l,p);return A("createRxDatabase",{database:m,creator:{storage:e,instanceCreationOptions:t,name:r,password:n,multiInstance:o,eventReduce:i,ignoreDuplicate:a,options:s,localDocuments:c}}).then(()=>m)})}({name:"vacaybot",storage:e,ignoreDuplicate:!0});let t=await iN.addCollections({absences:{schema:iD},users:{schema:ik},roles:{schema:iM}});if(!t.users||!t.absences||!t.roles)throw Error("Failed to create database collections");if((!iN.users||!iN.absences||!iN.roles)&&(await new Promise(e=>setTimeout(e,100)),!iN.users||!iN.absences||!iN.roles))throw Error("Database collections not available after initialization");try{let e=await iN.users.count().exec(),t=await iN.absences.count().exec(),r=await iN.roles.count().exec();0===e&&0===t&&await iA(iN),0===r&&await iT(iN)}catch(e){console.error("Error checking/initializing demo data:",e);try{let e=await iN.users.count().exec(),t=await iN.absences.count().exec();0===e&&0===t&&await iA(iN);let r=await iN.roles.count().exec();0===r&&await iT(iN)}catch(e){console.error("Error initializing demo data:",e)}}return iN}async function iA(e){let t="2025-11-11T22:55:29.924Z";await e.users.insert({id:"demo-employee-1",email:"employee@demo.com",name:"Demo Employee",role:"employee",managerEmail:"manager@demo.com",office:"ljubljana",createdAt:t}),await e.users.insert({id:"demo-manager-1",email:"manager@demo.com",name:"Demo Manager",role:"manager",office:"ljubljana",createdAt:t}),await e.absences.insert({id:"abs_1762902314011_fmgqo8zsq",userId:"employee@demo.com",userEmail:"employee@demo.com",type:"vacation",office:"ljubljana",startDate:"2025-11-15",endDate:"2025-11-23",managerEmail:"manager@demo.com",status:"approved",createdAt:"2025-11-11T23:05:14.011Z",updatedAt:"2025-11-11T23:13:44.571Z",approvedAt:"2025-11-11T23:13:44.571Z"}),await e.absences.insert({id:"abs_1762903173668_13geoe102",userId:"employee@demo.com",userEmail:"employee@demo.com",type:"sick_child",office:"ljubljana",startDate:"2025-11-14",endDate:"2025-11-17",note:"test",managerEmail:"manager@demo.com",status:"pending",createdAt:"2025-11-11T23:19:33.668Z",updatedAt:"2025-11-11T23:19:33.668Z"})}async function iT(e){let t=new Date().toISOString();await e.roles.insert({id:"role_manager",name:"Manager",createdAt:t,updatedAt:t}),await e.roles.insert({id:"role_employee",name:"Employee",createdAt:t,updatedAt:t}),await e.roles.insert({id:"role_admin",name:"Admin",createdAt:t,updatedAt:t})}},98143:(e,t,r)=>{"use strict";r.d(t,{getUserByEmail:()=>o,wy:()=>a,yw:()=>i});var n=r(77e3);async function o(e){try{let t=await (0,n.N8)();if(!t.users)return console.error("Users collection not available"),null;let r=await t.users.findOne({selector:{email:e}}).exec();return r?r.toJSON():null}catch(e){return console.error("Error getting user by email:",e),null}}async function i(){let e=await (0,n.N8)();return e.users?(await e.users.find().exec()).map(e=>e.toJSON()):[]}async function a(e,t){try{let r=await (0,n.N8)();if(!r.users)return null;let o=await r.users.findOne(e).exec();if(!o)return null;return await o.update({$set:{teams:t,updatedAt:new Date().toISOString()}}),o.toJSON()}catch(e){return console.error("Error updating user teams:",e),null}}},32029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,metadata:()=>a});var n=r(19510),o=r(45317),i=r.n(o);r(5023);let a={title:"VacayBot - Absence Management",description:"Request and manage your absences"};function s({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:i().className,children:e})})}},35480:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(68570).createProxy)(String.raw`/Users/simonbohlin/13/VacayBot/src/app/page.tsx#default`)},5023:()=>{},39805:e=>{function t(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){r(e);return}s.done?t(u):Promise.resolve(u).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=e.apply(r,n);function s(e){t(a,o,i,s,u,"next",e)}function u(e){t(a,o,i,s,u,"throw",e)}s(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},62517:(e,t,r)=>{var n=r(47690).default;function o(){"use strict";e.exports=o=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function d(e,r,n,o){var i,a,u=Object.create((r&&r.prototype instanceof g?r:g).prototype);return s(u,"_invoke",{value:(i=new N(o||[]),a=m,function(r,o){if(a===y)throw Error("Generator is already running");if(a===b){if("throw"===r)throw o;return{value:t,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var u=function e(r,n){var o=n.method,i=r.iterator[o];if(i===t)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),v;var a=h(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var s=a.arg;return s?s.done?(n[r.resultName]=s.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,v)}(s,i);if(u){if(u===v)continue;return u}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===m)throw a=b,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=y;var l=h(e,n,i);if("normal"===l.type){if(a=i.done?b:"suspendedYield",l.arg===v)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(a=b,i.method="throw",i.arg=l.arg)}})}),u}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=d;var m="suspendedStart",y="executing",b="completed",v={};function g(){}function O(){}function w(){}var x={};p(x,l,function(){return this});var j=Object.getPrototypeOf,_=j&&j(j(E([])));_&&_!==i&&a.call(_,l)&&(x=_);var P=w.prototype=g.prototype=Object.create(x);function S(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function D(e,t){var r;s(this,"_invoke",{value:function(o,i){function s(){return new t(function(r,s){!function r(o,i,s,u){var l=h(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,s,u)},function(e){r("throw",e,s,u)}):t.resolve(f).then(function(e){c.value=e,s(c)},function(e){return r("throw",e,s,u)})}u(l.arg)}(o,i,r,s)})}return r=r?r.then(s,s):s()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw TypeError(n(e)+" is not iterable")}return O.prototype=w,s(P,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:O,configurable:!0}),O.displayName=p(w,f,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,f,"GeneratorFunction")),e.prototype=Object.create(P),e},r.awrap=function(e){return{__await:e}},S(D.prototype),p(D.prototype,c,function(){return this}),r.AsyncIterator=D,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new D(d(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},S(P),p(P,f,"Generator"),p(P,l,function(){return this}),p(P,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=E,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:E(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},r}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},47690:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},67643:(e,t,r)=>{var n=r(62517)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},50793:(e,t,r)=>{var n=r(27976),o=r(70202);e.exports=function(e,t,r){if(n())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var a=new(e.bind.apply(e,i));return r&&o(a,r.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports},48646:(e,t,r)=>{var n=r(84129);function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},52967:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},98312:(e,t,r)=>{var n=r(70202);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},94346:e=>{e.exports=function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}},e.exports.__esModule=!0,e.exports.default=e.exports},27976:e=>{function t(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(e.exports=t=function(){return!!r},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},86981:e=>{e.exports=function(e){throw TypeError('"'+e+'" is read-only')},e.exports.__esModule=!0,e.exports.default=e.exports},70202:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},34353:(e,t,r)=>{var n=r(94841).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},84129:(e,t,r)=>{var n=r(94841).default,o=r(34353);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},94841:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},40326:(e,t,r)=>{var n=r(52967),o=r(70202),i=r(94346),a=r(50793);function s(t){var r="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[975],()=>r(99836));module.exports=n})();